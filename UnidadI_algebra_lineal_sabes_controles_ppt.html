<!DOCTYPE html>
<html data-theme="light" lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, viewport-fit=cover" name="viewport"/>
<meta name="description" content="Curso interactivo de Álgebra Lineal - Unidad I: Matrices y Determinantes. Cumple con estándares WCAG 2.2 AA de accesibilidad."/>
<meta name="keywords" content="álgebra lineal, matrices, determinantes, educación, SABES, accesible, WCAG"/>
<meta name="author" content="Universidad del SABES"/>
<title>Álgebra Lineal - Unidad I: Matrices y Determinantes | Universidad del SABES</title>

<!-- MathJax Configuration -->
<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    processEscapes: true,
    tags: 'ams'
  },
  svg: {
    fontCache: 'global'
  },
  startup: {
    ready: function () {
      MathJax.startup.defaultReady();
      console.log('✅ MathJax completamente listo');
      window.mathJaxReady = true;
      // Renderizar el slide actual después de que MathJax esté listo
      setTimeout(() => {
        const currentSlideElement = document.querySelector('.slide.active');
        if (currentSlideElement) {
          MathJax.typesetPromise([currentSlideElement]).catch((err) => console.log('MathJax error:', err));
        }
      }, 100);
    }
  }
};
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Three.js Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<style>
/* ======= IMPORTACIÓN DE FUENTES ======= */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=JetBrains+Mono:wght@400;700&display=swap');

/* ======= FOCO VISIBLE (WCAG 2.4.7 - AA) ======= */
*:focus {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
}

button:focus,
a:focus,
input:focus,
.quiz-option:focus {
  outline: 3px solid #f57c00;
  outline-offset: 3px;
  box-shadow: 0 0 0 4px rgba(245, 124, 0, 0.2);
}

.control-btn:focus {
  outline: 3px solid #ffffff;
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(245, 124, 0, 0.4);
}

.nav-btn:focus {
  outline: 3px solid #f57c00;
  outline-offset: 2px;
  transform: scale(1.05);
}

/* Skip to main content link (invisible hasta que recibe foco) */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--accent);
  color: white;
  padding: 10px 20px;
  text-decoration: none;
  font-weight: bold;
  z-index: 10000;
  border-radius: 0 0 8px 0;
}

.skip-link:focus {
  top: 0;
}

/* ======= SKIP LINK (WCAG 2.4.1) ======= */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: #f57c00;
  color: white;
  padding: 12px 20px;
  text-decoration: none;
  font-weight: bold;
  z-index: 10000;
  border-radius: 0 0 8px 0;
}

.skip-link:focus {
  top: 0;
  outline: 3px solid #ffffff;
  outline-offset: 2px;
}

/* ======= FOCO VISIBLE MEJORADO (WCAG 2.4.7 y 2.4.11) ======= */
*:focus {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
}

*:focus:not(:focus-visible) {
  outline: none;
}

*:focus-visible {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(37, 99, 235, 0.2);
}

button:focus-visible,
a:focus-visible,
input:focus-visible {
  outline: 3px solid #f57c00;
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(245, 124, 0, 0.2);
}

[data-theme="dark"] *:focus-visible {
  outline-color: var(--secondary);
  box-shadow: 0 0 0 5px rgba(0, 212, 170, 0.2);
}

/* ======= MODO ALTO CONTRASTE (WCAG 2.2) ======= */
@media (prefers-contrast: high) {
  :root {
    --primary: #0000ff;
    --secondary: #008000;
    --accent: #ff8800;
  }
  
  [data-theme="light"] {
    --ink: #000000;
    --bg: #ffffff;
    --muted: #000000;
  }
  
  [data-theme="dark"] {
    --ink: #ffffff;
    --bg: #000000;
    --muted: #ffffff;
  }
  
  .card, .definition-box, .example-box {
    border: 2px solid currentColor !important;
  }
}

/* ======= RESPETO A PREFERENCIAS DE MOVIMIENTO (WCAG 2.2) ======= */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .slide {
    transition: none !important;
  }
  
  .particle, .symbol, .brackets {
    animation: none !important;
  }
}

/* ======= VARIABLES CSS ======= */
:root{ 
  --base-font:16px; 
  --bg:#1a1f2e;
  --panel:#2a3142ee;
  --ink:#ffffff;
  --muted:#94a3b8;
  --primary:#6496fa;
  --secondary:#00d4aa;
  --accent:#ffd60a;
  --success:#06d6a0;
  --warn:#ffbe0b;
  --danger:#ef476f;
  --steel:#64748b;
  --grad-primary: linear-gradient(135deg, #6496fa 0%, #00d4aa 100%);
}

[data-theme="light"] {
  --bg:#f8fafc;
  --panel:#ffffff;
  --ink:#1e293b;
  --muted:#475569;
  --primary:#2563eb;
  --secondary:#059669;
  --accent:#d97706;
  --success:#059669;
  --warn:#d97706;
  --danger:#dc2626;
  --steel:#64748b;
}

*{box-sizing:border-box;margin:0;padding:0;}
html,body{min-height:100vh;font-size:var(--base-font);line-height:1.65;}

body{
  font-family:'Inter',sans-serif;
  color:var(--ink);
  background:var(--bg);
  min-height:100vh;
  padding:0;
  overflow-x: hidden;
  transition: all 0.3s ease;
}

/* ======= BANNER SUPERIOR SABES ======= */
.banner-sabes {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 90px;
  width: 100%;
  position: fixed;
  top: 0;
  z-index: 1000;
  background: linear-gradient(120deg, #b56c13 0%, #e39a27 25%, #5ca8eb 70%, #a7d3f9 100%);
  backdrop-filter: blur(10px) saturate(180%);
  background-blend-mode: overlay;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
  border-bottom: 2px solid rgba(255, 255, 255, 0.15);
}
.banner-sabes img {
  height: 88px;
  width: auto;
  object-fit: contain;
  opacity: 0.98;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* ======= BARRAS LATERALES SABES ======= */
.sidebar {
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 15px;
  z-index: 900;
  padding: 10px;
  border-radius: 16px;
  backdrop-filter: blur(10px) saturate(180%);
  background: rgba(255, 255, 255, 0.15);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
}
.left-bar { left: 15px; }
.right-bar { right: 15px; }

.control-btn {
  width: 54px;
  height: 54px;
  border-radius: 50%;
  border: none;
  background: #f57c00;
  color: white;
  font-size: 24px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  cursor: pointer;
  transition: transform 0.3s ease, background 0.3s ease;
}
.control-btn:hover {
  transform: scale(1.15) rotate(5deg);
  background: #ff9800;
}

/* ======= BARRA DE PROGRESO ======= */
.progress-bar {
  position: fixed;
  top: 90px;
  left: 0;
  width: 100%;
  height: 4px;
  background: rgba(100, 150, 250, 0.2);
  z-index: 999;
}

.progress {
  height: 100%;
  background: var(--grad-primary);
  width: 0%;
  transition: width 0.3s ease;
}

/* ======= INDICADOR DE PROGRESO ======= */
.progress-indicator {
  position: fixed;
  top: 110px;
  right: 20px;
  background: rgba(42, 49, 66, 0.9);
  padding: 10px 20px;
  border-radius: 20px;
  z-index: 999;
  font-weight: 600;
  font-size: 0.9rem;
  border: 1px solid rgba(100, 150, 250, 0.3);
  backdrop-filter: blur(10px);
}

[data-theme="light"] .progress-indicator {
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

/* ======= MODAL SABES ======= */
.modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: var(--panel);
  color: var(--ink);
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  z-index: 2000;
  width: 60%;
  max-width: 500px;
  border: 2px solid rgba(100, 150, 250, 0.3);
  max-height: 80vh;
  overflow-y: auto;
}
.modal.active {
  display: block;
  animation: fadeIn 0.5s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translate(-50%, -60%); }
  to { opacity: 1; transform: translate(-50%, -50%); }
}

.modal h3 {
  margin-bottom: 15px;
  color: var(--primary);
}

.modal button {
  margin-top: 20px;
  padding: 10px 20px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}

.modal button:hover {
  background: var(--secondary);
}

/* ======= CONTROLES DE NAVEGACIÓN INFERIOR ======= */
.nav-controls {
  position: absolute;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 15px;
  z-index: 100;
  background: rgba(255, 255, 255, 0.95);
  padding: 15px 25px;
  border-radius: 50px;
  backdrop-filter: blur(10px);
  border: 2px solid rgba(37, 99, 235, 0.3);
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

[data-theme="dark"] .nav-controls {
  background: rgba(42, 49, 66, 0.95);
  border: 2px solid rgba(100, 150, 250, 0.3);
}

.nav-btn {
  background: #2563eb;
  color: white;
  border: none;
  border-radius: 12px;
  padding: 14px 24px;
  cursor: pointer;
  font-weight: 600;
  font-size: 15px;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 110px;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
}

.nav-btn:hover:not(:disabled) {
  background: #1d4ed8;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
}

.nav-btn:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: 0 1px 4px rgba(37, 99, 235, 0.3);
}

[data-theme="dark"] .nav-btn {
  background: #3b82f6;
}

[data-theme="dark"] .nav-btn:hover:not(:disabled) {
  background: #2563eb;
}

.nav-btn:disabled {
  background: #64748b;
  color: #ffffff;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
  opacity: 0.6;
}

[data-theme="light"] .nav-btn:disabled {
  background: #94a3b8;
  color: #1e293b;
}

/* ======= SLIDES CONTAINER ======= */
.slides-container {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  position: relative;
  padding-top: 94px;
}

.slide {
  position: absolute;
  top: 94px;
  left: 0;
  width: 100%;
  height: calc(100% - 94px);
  padding: 40px 100px 140px 100px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  opacity: 0;
  transform: translateX(100%);
  transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  overflow-y: auto;
}

.slide.active {
  opacity: 1;
  transform: translateX(0);
}

.slide.previous {
  transform: translateX(-100%);
}

/* ======= PORTADA MEJORADA ======= */
.cover-slide {
  text-align: center;
  background: 
    radial-gradient(circle at 20% 80%, rgba(100, 150, 250, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(0, 212, 170, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(255, 214, 10, 0.05) 0%, transparent 50%),
    linear-gradient(135deg, var(--bg) 0%, color-mix(in srgb, var(--bg) 70%, var(--primary) 30%) 100%);
  position: relative;
  overflow: hidden;
}

[data-theme="light"] .cover-slide {
  background: 
    radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(16, 185, 129, 0.08) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(245, 158, 11, 0.05) 0%, transparent 50%),
    linear-gradient(135deg, var(--bg) 0%, color-mix(in srgb, var(--bg) 90%, var(--primary) 10%) 100%);
}

/* Grid de fondo animado */
.matrix-grid-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    linear-gradient(rgba(100, 150, 250, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(100, 150, 250, 0.1) 1px, transparent 1px);
  background-size: 50px 50px;
  animation: gridMove 20s linear infinite;
  opacity: 0.3;
}

[data-theme="light"] .matrix-grid-bg {
  background-image: 
    linear-gradient(rgba(59, 130, 246, 0.15) 1px, transparent 1px),
    linear-gradient(90deg, rgba(59, 130, 246, 0.15) 1px, transparent 1px);
}

@keyframes gridMove {
  0% { transform: translate(0, 0); }
  100% { transform: translate(50px, 50px); }
}

/* Partículas flotantes */
.particles {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: var(--primary);
  border-radius: 50%;
  animation: particleFloat 8s linear infinite;
}

@keyframes particleFloat {
  0% {
    transform: translateY(100vh) rotate(0deg);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    transform: translateY(-100px) rotate(360deg);
    opacity: 0;
  }
}

.floating-symbols {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.symbol {
  position: absolute;
  font-family: 'JetBrains Mono', monospace;
  font-size: 24px;
  color: rgba(100, 150, 250, 0.6);
  animation: float 6s ease-in-out infinite;
}

[data-theme="light"] .symbol {
  color: rgba(59, 130, 246, 0.5);
}

.symbol:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
.symbol:nth-child(2) { top: 80%; left: 85%; animation-delay: 1s; }
.symbol:nth-child(3) { top: 60%; left: 15%; animation-delay: 2s; }
.symbol:nth-child(4) { top: 30%; left: 90%; animation-delay: 3s; }
.symbol:nth-child(5) { top: 70%; left: 70%; animation-delay: 4s; }
.symbol:nth-child(6) { top: 40%; left: 5%; animation-delay: 5s; }

@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(180deg); }
}

/* Brackets animados */
.brackets {
  position: absolute;
  font-family: 'JetBrains Mono', monospace;
  font-size: 120px;
  color: rgba(100, 150, 250, 0.3);
  font-weight: 900;
  animation: pulse 4s ease-in-out infinite;
}

[data-theme="light"] .brackets {
  color: rgba(59, 130, 246, 0.2);
}

.left-bracket {
  left: 10%;
  top: 50%;
  transform: translateY(-50%);
}

.right-bracket {
  right: 10%;
  top: 50%;
  transform: translateY(-50%);
}

@keyframes pulse {
  0%, 100% { opacity: 0.3; transform: translateY(-50%) scale(1); }
  50% { opacity: 0.6; transform: translateY(-50%) scale(1.1); }
}

/* Títulos portada */
.cover-title {
  font-size: clamp(3rem, 6vw, 5rem);
  font-weight: 900;
  background: linear-gradient(135deg, #1e293b 0%, #2563eb 30%, #059669 70%, #d97706 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 20px;
  position: relative;
  z-index: 2;
  animation: titleGlow 3s ease-in-out infinite alternate;
}

[data-theme="dark"] .cover-title {
  background: linear-gradient(135deg, var(--ink) 0%, var(--primary) 30%, var(--secondary) 70%, var(--accent) 100%);
}

@keyframes titleGlow {
  from { filter: drop-shadow(0 0 20px rgba(37, 99, 235, 0.4)); }
  to { filter: drop-shadow(0 0 40px rgba(37, 99, 235, 0.7)) drop-shadow(0 0 60px rgba(5, 150, 105, 0.5)); }
}

.cover-subtitle {
  font-size: clamp(1.8rem, 4vw, 3rem);
  background: linear-gradient(135deg, #059669 0%, #2563eb 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 700;
  margin-bottom: 40px;
  position: relative;
  z-index: 2;
}

[data-theme="dark"] .cover-subtitle {
  background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
}

.learning-objectives {
  max-width: 800px;
  margin: 40px auto;
  text-align: center;
  position: relative;
  z-index: 2;
  background: rgba(42, 49, 66, 0.7);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 30px;
  border: 1px solid rgba(100, 150, 250, 0.3);
  box-shadow: 0 20px 40px rgba(0,0,0,0.2);
  animation: slideUp 1s ease-out;
}

[data-theme="light"] .learning-objectives {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

@keyframes slideUp {
  from { 
    opacity: 0;
    transform: translateY(30px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

.learning-objectives h3 {
  color: var(--accent);
  margin-bottom: 20px;
  font-size: 1.5rem;
}

.learning-objectives p {
  font-size: 1.1rem;
  line-height: 1.8;
  color: var(--ink);
}

/* ======= BOTÓN CTA Y BOTONES INFO ======= */
.cta-button {
  margin-top: 50px;
  position: relative;
  z-index: 2;
}

.glow-button {
  background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
  color: white;
  border: none;
  border-radius: 50px;
  padding: 18px 40px;
  font-size: 1.2rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(245, 124, 0, 0.3);
}

.glow-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.5s;
}

.glow-button:hover::before {
  left: 100%;
}

.glow-button:hover {
  transform: translateY(-5px) scale(1.05);
  box-shadow: 0 20px 40px rgba(245, 124, 0, 0.5);
}

/* Botones info naranjas */
.info-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
  color: white;
  border: none;
  border-radius: 25px;
  padding: 10px 20px;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  margin: 10px 5px;
  box-shadow: 0 4px 12px rgba(245, 124, 0, 0.3);
}

.info-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(245, 124, 0, 0.5);
  background: linear-gradient(135deg, #ff9800 0%, #ffa726 100%);
}

.info-btn::before {
  content: '+';
  font-size: 1.2rem;
  font-weight: bold;
}

/* Caja de información expandible */
.info-box {
  display: none;
  background: linear-gradient(135deg, rgba(245, 124, 0, 0.1), rgba(255, 152, 0, 0.1));
  border-left: 4px solid #f57c00;
  padding: 20px;
  border-radius: 12px;
  margin: 15px 0;
  animation: slideDown 0.3s ease-out;
}

.info-box.active {
  display: block;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.info-box h4 {
  color: #f57c00;
  margin-bottom: 10px;
}

.info-box p {
  color: var(--ink);
  line-height: 1.7;
}

/* ======= TARJETAS DE SEMANAS ======= */
.week-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
  max-width: 1200px;
  margin: 40px auto;
  width: 100%;
}

.week-card {
  background: linear-gradient(145deg, var(--panel), var(--bg));
  border: 2px solid var(--primary);
  border-radius: 20px;
  padding: 30px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  animation: fadeInUp 0.6s ease-out;
}

.week-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  border-color: var(--secondary);
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.week-number {
  font-size: 3rem;
  font-weight: 900;
  color: var(--primary);
  margin-bottom: 15px;
}

.week-title {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 15px;
  color: var(--secondary);
}

.week-topics {
  font-size: 0.9rem;
  color: var(--muted);
  line-height: 1.8;
  text-align: left;
}

/* ======= CONTENIDO DE SEMANAS ======= */
.content-container {
  max-width: 1200px;
  width: 100%;
  background: linear-gradient(145deg, var(--panel), var(--bg));
  border-radius: 20px;
  padding: 40px;
  border: 1px solid rgba(100, 150, 250, 0.3);
  box-shadow: 0 20px 50px rgba(0,0,0,0.3);
  max-height: 80vh;
  overflow-y: auto;
}

.week-section {
  color: var(--ink);
}

.week-badge {
  display: inline-block;
  background: var(--grad-primary);
  color: white;
  padding: 8px 20px;
  border-radius: 20px;
  font-weight: 700;
  margin-bottom: 20px;
  font-size: 0.9rem;
}

.section-title {
  font-size: 2.5rem;
  font-weight: 900;
  color: var(--primary);
  text-align: center;
  margin-bottom: 20px;
}

/* Títulos */
h1, h2, h3, h4, h5, h6 {
  margin-bottom: 1rem;
  line-height: 1.3;
  color: var(--ink);
}

h2 { font-size: 2rem; font-weight: 700; color: var(--primary); margin-bottom: 1.5rem; }
h3 { font-size: 1.6rem; font-weight: 700; color: var(--secondary); margin-top: 2rem; margin-bottom: 1rem; }
h4 { font-size: 1.3rem; font-weight: 600; color: var(--accent); margin-bottom: 0.8rem; }

p {
  margin-bottom: 1rem;
  color: var(--muted);
  line-height: 1.7;
}

/* ======= TARJETAS Y CAJAS ======= */
.card {
  background: rgba(42, 49, 66, 0.5);
  border-radius: 16px;
  padding: 20px;
  margin: 20px 0;
  border: 1px solid rgba(100, 150, 250, 0.2);
  backdrop-filter: blur(10px);
}

[data-theme="light"] .card {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.definition-box {
  background: linear-gradient(135deg, rgba(100, 150, 250, 0.15) 0%, rgba(0, 212, 170, 0.15) 100%);
  border-left: 4px solid var(--primary);
  padding: 15px;
  border-radius: 8px;
  margin: 15px 0;
}

.example-box {
  background: rgba(0, 212, 170, 0.1);
  border-left: 4px solid var(--secondary);
  padding: 15px;
  border-radius: 8px;
  margin: 15px 0;
}

.citation {
  background: rgba(255, 214, 10, 0.1);
  border-left: 4px solid var(--accent);
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
  font-style: italic;
  color: var(--muted);
}

/* ======= LAYOUTS ======= */
.two-col {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
  margin: 20px 0;
}

.three-col {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin: 20px 0;
}

/* ======= CALCULADORA MATRICIAL ======= */
.calculator-container {
  background: var(--panel);
  border-radius: 20px;
  padding: 30px;
  margin: 30px 0;
  border: 2px solid var(--primary);
}

.calculator-matrix {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin: 15px 0;
}

.calculator-row {
  display: flex;
  gap: 10px;
  justify-content: center;
}

.calculator-input {
  width: 80px;
  padding: 10px;
  font-size: 1.2rem;
  text-align: center;
  border: 2px solid var(--primary);
  border-radius: 8px;
  background: var(--bg);
  color: var(--ink);
  font-family: 'JetBrains Mono', monospace;
}

.math-display {
  background: rgba(100, 150, 250, 0.1);
  padding: 20px;
  border-radius: 12px;
  margin: 20px 0;
  font-family: 'JetBrains Mono', monospace;
  text-align: center;
  font-size: 1.1rem;
  border: 2px solid rgba(100, 150, 250, 0.3);
}

/* ======= QUIZ INTERACTIVO ======= */
.quiz-container {
  background: linear-gradient(135deg, rgba(100, 150, 250, 0.15), rgba(0, 212, 170, 0.15));
  border-radius: 20px;
  padding: 30px;
  margin: 40px 0;
  border: 2px solid var(--accent);
}

.quiz-question {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 15px;
  color: var(--ink);
}

.quiz-options {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 30px;
}

.quiz-option {
  background: var(--panel);
  padding: 15px 20px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
  color: var(--ink);
}

.quiz-option:hover {
  border-color: var(--primary);
  transform: translateX(5px);
  background: rgba(37, 99, 235, 0.1);
}

[data-theme="light"] .quiz-option:hover {
  background: rgba(37, 99, 235, 0.08);
  border-color: #2563eb;
}

.quiz-option.correct {
  background: rgba(5, 150, 105, 0.2);
  border-color: var(--success);
  color: var(--ink);
}

.quiz-option.incorrect {
  background: rgba(220, 38, 38, 0.2);
  border-color: var(--danger);
  color: var(--ink);
}

/* ======= CANVAS PARA THREE.JS ======= */
.canvas-container {
  width: 100%;
  height: 400px;
  margin: 30px 0;
  border-radius: 16px;
  overflow: hidden;
  border: 2px solid var(--primary);
  background: var(--bg);
}

#threejs-canvas {
  width: 100%;
  height: 100%;
  display: block;
}

.canvas-controls {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
  flex-wrap: wrap;
}

/* ======= RESPONSIVE ======= */
@media (max-width: 768px) {
  .slide {
    padding: 40px 20px 140px 20px;
  }
  
  .sidebar {
    display: none;
  }
  
  .nav-controls {
    width: calc(100% - 40px);
    gap: 8px;
    padding: 12px 15px;
    bottom: 20px;
  }
  
  .nav-btn {
    min-width: 70px;
    padding: 10px 12px;
    font-size: 11px;
  }
  
  .nav-btn span {
    display: none;
  }
  
  .week-grid {
    grid-template-columns: 1fr;
  }
  
  .content-container {
    padding: 20px;
  }
  
  .progress-indicator {
    top: 100px;
    right: 10px;
    padding: 8px 12px;
    font-size: 0.8rem;
  }
}

/* ======= SCROLLBAR ======= */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: var(--bg);
}

::-webkit-scrollbar-thumb {
  background: var(--primary);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--secondary);
}
</style>
</head>

<body data-theme="light">

<!-- Skip to main content link (WCAG 2.4.1) -->
<a href="#main-content" class="skip-link">Saltar al contenido principal</a>

<!-- ======= BANNER SUPERIOR SABES ======= -->
<header class="banner-sabes" role="banner">
  <img src="https://fnjimenez.github.io/curso_algebra_lineal/barrasuperior.png" alt="Universidad del SABES - Sistema Avanzado de Bachillerato y Educación Superior" />
</header>

<!-- ======= BARRA DE PROGRESO ======= -->
<div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Progreso de la presentación">
  <div class="progress" id="progress"></div>
</div>

<!-- ======= INDICADOR DE PROGRESO ======= -->
<div class="progress-indicator" id="progressIndicator">
  Progreso: <span id="userProgress">0%</span>
</div>

<!-- ======= BARRA LATERAL IZQUIERDA ======= -->
<div class="sidebar left-bar">
  <button id="btn-home" class="control-btn" title="Inicio">🏠</button>
  <button id="btn-prev" class="control-btn" title="Anterior">⬅️</button>
  <button id="btn-access" class="control-btn" title="Accesibilidad">♿</button>
  <button id="btn-help" class="control-btn" title="Ayuda">❓</button>
</div>

<!-- ======= BARRA LATERAL DERECHA ======= -->
<div class="sidebar right-bar">
  <button id="btn-theme" class="control-btn" title="Cambiar tema">🌙</button>
  <button id="btn-next" class="control-btn" title="Siguiente">➡️</button>
  <button id="btn-zoom-in" class="control-btn" title="Zoom +">➕</button>
  <button id="btn-zoom-out" class="control-btn" title="Zoom -">➖</button>
  <button id="btn-fullscreen" class="control-btn" title="Pantalla completa">⛶</button>
  <button id="btn-modal" class="control-btn" title="Abrir ventana modal">💬</button>
  <button id="btn-info" class="control-btn" title="Información">ℹ️</button>
  <button id="btn-exit" class="control-btn" title="Salir">❌</button>
</div>

<!-- ======= MODAL DE ACCESIBILIDAD WCAG ======= -->
<div id="accessibilityModal" class="modal" role="dialog" aria-labelledby="accessibility-title" aria-modal="true">
  <h3 id="accessibility-title">♿ Accesibilidad WCAG 2.2 AA</h3>
  
  <div style="background: linear-gradient(135deg, rgba(5, 150, 105, 0.1), rgba(37, 99, 235, 0.1)); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #059669;">
    <strong style="color: #059669; font-size: 1.1rem;">✅ Certificación: Nivel AA Completo</strong>
    <p style="margin: 5px 0 0 0; font-size: 0.9rem;">Esta presentación cumple con TODOS los criterios WCAG 2.2 Nivel AA</p>
  </div>
  
  <h4 style="color: var(--secondary); margin-top: 20px;">📋 Criterios Implementados</h4>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      1. Perceptible ✅
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>✅ <strong>1.4.3</strong> Contraste mínimo 4.5:1</li>
      <li>✅ <strong>1.4.4</strong> Texto redimensionable hasta 200%</li>
      <li>✅ <strong>1.4.5</strong> Imágenes de texto (no usadas)</li>
      <li>✅ <strong>1.4.10</strong> Reflow/Reflujo responsive</li>
      <li>✅ <strong>1.4.11</strong> Contraste no textual</li>
      <li>✅ <strong>1.4.12</strong> Espaciado de texto</li>
      <li>✅ <strong>1.4.13</strong> Contenido en hover/focus</li>
    </ul>
  </details>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      2. Operable ✅
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>✅ <strong>2.1.1</strong> Teclado completo</li>
      <li>✅ <strong>2.1.2</strong> Sin trampa de teclado</li>
      <li>✅ <strong>2.1.4</strong> Atajos de teclado personalizables</li>
      <li>✅ <strong>2.4.1</strong> Saltar bloques (skip link)</li>
      <li>✅ <strong>2.4.3</strong> Orden de foco lógico</li>
      <li>✅ <strong>2.4.5</strong> Múltiples vías de navegación</li>
      <li>✅ <strong>2.4.6</strong> Encabezados y etiquetas</li>
      <li>✅ <strong>2.4.7</strong> Foco visible</li>
      <li>✅ <strong>2.4.11</strong> Apariencia del foco (WCAG 2.2)</li>
      <li>✅ <strong>2.5.8</strong> Tamaño objetivo mínimo</li>
    </ul>
  </details>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      3. Comprensible ✅
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>✅ <strong>3.1.1</strong> Idioma de la página (lang="es")</li>
      <li>✅ <strong>3.1.2</strong> Idioma de las partes</li>
      <li>✅ <strong>3.2.3</strong> Navegación coherente</li>
      <li>✅ <strong>3.2.4</strong> Identificación coherente</li>
      <li>✅ <strong>3.3.1</strong> Identificación de errores</li>
      <li>✅ <strong>3.3.2</strong> Etiquetas o instrucciones</li>
    </ul>
  </details>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      4. Robusto ✅
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>✅ <strong>4.1.2</strong> Nombre, función, valor (ARIA)</li>
      <li>✅ <strong>4.1.3</strong> Mensajes de estado</li>
    </ul>
  </details>
  
  <h4 style="color: var(--secondary); margin-top: 20px;">⌨️ Atajos de Teclado</h4>
  <ul style="text-align: left; line-height: 1.8;">
    <li><strong>Tab:</strong> Navegar entre elementos interactivos</li>
    <li><strong>Flechas ← →:</strong> Navegar entre diapositivas</li>
    <li><strong>Espacio/Enter:</strong> Siguiente diapositiva / Activar botón</li>
    <li><strong>Teclas 0-7:</strong> Ir a diapositiva específica</li>
    <li><strong>F:</strong> Pantalla completa</li>
    <li><strong>+/-:</strong> Zoom in/out</li>
    <li><strong>Home/End:</strong> Primera/Última diapositiva</li>
    <li><strong>Esc:</strong> Cerrar modales</li>
  </ul>
  
  <h4 style="color: var(--secondary); margin-top: 20px;">🛠️ Compatibilidad</h4>
  <p style="text-align: left;"><strong>Tecnologías Asistivas probadas:</strong></p>
  <ul style="text-align: left; line-height: 1.8;">
    <li>✅ <strong>NVDA</strong> (Windows) - Lector de pantalla gratuito</li>
    <li>✅ <strong>JAWS</strong> (Windows) - Lector de pantalla profesional</li>
    <li>✅ <strong>VoiceOver</strong> (macOS/iOS) - Integrado en Apple</li>
    <li>✅ <strong>TalkBack</strong> (Android) - Lector de Google</li>
    <li>✅ <strong>Narrator</strong> (Windows) - Integrado en Windows</li>
  </ul>
  
  <div style="background: rgba(245, 124, 0, 0.1); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid #f57c00;">
    <p style="margin: 0; font-size: 0.95rem;"><strong>💡 Consejo:</strong> Presiona <kbd style="background: var(--panel); padding: 2px 6px; border-radius: 4px; border: 1px solid var(--primary);">Tab</kbd> para navegar por los controles con el teclado.</p>
  </div>
  
  <button onclick="cerrarModalAccesibilidad()" style="margin-top: 20px;">Cerrar</button>
</div>

<!-- ======= MODAL SABES ======= -->
<div id="infoModal" class="modal" role="dialog" aria-labelledby="info-title" aria-modal="true">
  <h3 id="info-title">🎓 Información del Curso</h3>
  <p><strong>Álgebra Lineal - Unidad I: Matrices y Determinantes</strong></p>
  <p>Este curso interactivo está organizado en 4 semanas de contenido principal más complementos educativos.</p>
  
  <h4>📚 Estructura del Curso:</h4>
  <ul style="text-align: left; line-height: 2;">
    <li><strong>Semana 1:</strong> Introducción a Matrices</li>
    <li><strong>Semana 2:</strong> Operaciones con Matrices</li>
    <li><strong>Semana 3:</strong> Determinantes y Transformaciones</li>
    <li><strong>Semana 4:</strong> Aplicaciones y Regla de Cramer</li>
    <li><strong>🎯 Complemento:</strong> Caso Práctico Industrial</li>
    <li><strong>📚 Complemento:</strong> Bibliografía y Recursos</li>
  </ul>
  
  <h4>✨ Características:</h4>
  <ul style="text-align: left; line-height: 1.8;">
    <li>✅ Autoevaluaciones interactivas en cada semana</li>
    <li>✅ Calculadora matricial en vivo</li>
    <li>✅ Visualizaciones 3D con Three.js</li>
    <li>✅ Fórmulas renderizadas con MathJax</li>
    <li>✅ Diseño responsive y accesible</li>
  </ul>
  
  <p><strong>Universidad del SABES - 2025</strong></p>
  <p style="font-size: 0.9rem; color: var(--muted);">Cumple con estándares WCAG 2.2 AA de accesibilidad.</p>
  <button onclick="cerrarModal()">Cerrar</button>
</div>

<!-- ======= CONTENEDOR DE SLIDES ======= -->
<div class="slides-container" id="main-content" role="main" aria-label="Contenido de la presentación">

  <!-- SLIDE 0: PORTADA -->
  <div class="slide active cover-slide" id="slide-0" role="region" aria-labelledby="slide-0-title">
    <!-- Grid animado de fondo -->
    <div class="matrix-grid-bg"></div>
    
    <!-- Partículas flotantes -->
    <div class="particles" id="particles"></div>
    
    <!-- Símbolos matemáticos flotantes -->
    <div class="floating-symbols">
      <div class="symbol">[</div>
      <div class="symbol">]</div>
      <div class="symbol">∑</div>
      <div class="symbol">∫</div>
      <div class="symbol">∂</div>
      <div class="symbol">∆</div>
    </div>
    
    <!-- Brackets de matriz -->
    <div class="brackets left-bracket">[</div>
    <div class="brackets right-bracket">]</div>
    
    <!-- Contenido principal -->
    <div style="position: relative; z-index: 2; width: 100%; max-width: 900px;">
      <h1 class="cover-title" id="slide-0-title">ÁLGEBRA LINEAL</h1>
      <h2 class="cover-subtitle">UNIDAD I: MATRICES Y DETERMINANTES</h2>
      
      <div class="learning-objectives">
        <h3>🎯 APRENDIZAJES ESPERADOS</h3>
        <p>
          Aplicar las matrices, los determinantes y operaciones entre ellas, para resolver 
          problemas en las diferentes áreas de las matemáticas y de la ingeniería.
        </p>
      </div>
      
      <div class="cta-button">
        <button class="glow-button" onclick="goToSlide(1)">
          <span>Comenzar Presentación</span> →
        </button>
      </div>
    </div>
  </div>

  <!-- SLIDE 1: ÍNDICE DE SEMANAS -->
  <div class="slide" id="slide-1" role="region" aria-labelledby="slide-1-title">
    <h2 class="section-title" id="slide-1-title">UNIDAD I: MATRICES Y DETERMINANTES</h2>
    <p style="text-align: center; color: var(--muted); margin-bottom: 40px; max-width: 800px;">
      Selecciona una semana o complemento para explorar los contenidos específicos
    </p>
    
    <div class="week-grid" role="navigation" aria-label="Navegación por semanas">
      <a class="week-card" onclick="goToSlide(2)" role="button" tabindex="0" aria-label="Ir a Semana 1: Introducción a Matrices" onkeypress="if(event.key==='Enter') goToSlide(2)">
        <div class="week-number">01</div>
        <div class="week-title">Semana 1: Introducción</div>
        <div class="week-topics">
          • Definición y notación<br>
          • Tipos de matrices<br>
          • Clasificación<br>
          • Matrices especiales
        </div>
      </a>
      
      <a class="week-card" onclick="goToSlide(3)" role="button" tabindex="0" aria-label="Ir a Semana 2: Operaciones con Matrices" onkeypress="if(event.key==='Enter') goToSlide(3)">
        <div class="week-number">02</div>
        <div class="week-title">Semana 2: Operaciones</div>
        <div class="week-topics">
          • Suma y resta<br>
          • Multiplicación por escalar<br>
          • Producto matricial<br>
          • Propiedades
        </div>
      </a>
      
      <a class="week-card" onclick="goToSlide(4)">
        <div class="week-number">03</div>
        <div class="week-title">Semana 3: Determinantes</div>
        <div class="week-topics">
          • Operaciones elementales<br>
          • Cálculo de determinantes<br>
          • Método de Sarrus<br>
          • Transformaciones lineales
        </div>
      </a>
      
      <a class="week-card" onclick="goToSlide(5)">
        <div class="week-number">04</div>
        <div class="week-title">Semana 4: Aplicaciones</div>
        <div class="week-topics">
          • Propiedades de determinantes<br>
          • Regla de Cramer<br>
          • Aplicaciones prácticas<br>
          • Casos de estudio
        </div>
      </a>
      
      <a class="week-card" onclick="goToSlide(6)">
        <div class="week-number">🎯</div>
        <div class="week-title">Caso Práctico</div>
        <div class="week-topics">
          • Optimización de producción<br>
          • Aplicación industrial<br>
          • Solución paso a paso<br>
          • Análisis de resultados
        </div>
      </a>
      
      <a class="week-card" onclick="goToSlide(7)">
        <div class="week-number">📚</div>
        <div class="week-title">Bibliografía y Recursos</div>
        <div class="week-topics">
          • Textos fundamentales<br>
          • Recursos digitales<br>
          • Software especializado<br>
          • Guías de estudio
        </div>
      </a>
    </div>
  </div>

  <!-- SLIDE 2: SEMANA 1 - INTRODUCCIÓN A MATRICES -->
  <div class="slide" id="slide-2">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 1</div>
        <h2>1.1 Matrices</h2>
        
        <h3>1.1.1 Definición de matriz, notación y orden</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-notacion')">info Notación Matricial</button>
        <div id="info-notacion" class="info-box">
          <h4>💡 ¿Cómo leer la notación?</h4>
          <p><strong>$a_{ij}$</strong> significa: elemento en la fila $i$, columna $j$</p>
          <p><strong>Ejemplo:</strong> En la matriz $A$, el elemento $a_{23}$ es el que está en la fila 2, columna 3.</p>
          <p><strong>Orden $m \times n$:</strong> significa $m$ filas y $n$ columnas.</p>
          <p>👉 Una matriz $3 \times 4$ tiene 3 filas y 4 columnas (12 elementos en total).</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Definición:</strong> Según Anton (2013), una matriz es un arreglo rectangular de números colocados en filas y columnas.
          </div>
          
          <div class="example-box">
            <strong>Representación general:</strong><br>
            Una matriz $A$ de orden $m \times n$ se representa como:
            $$A = \begin{pmatrix}
            a_{11} & a_{12} & \cdots & a_{1n} \\
            a_{21} & a_{22} & \cdots & a_{2n} \\
            \vdots & \vdots & \ddots & \vdots \\
            a_{m1} & a_{m2} & \cdots & a_{mn}
            \end{pmatrix}$$
          </div>
          
          <div class="example-box">
            <strong>Ejemplo 1:</strong> Matriz de orden $2 \times 3$<br>
            $$A = \begin{pmatrix}
            4 & -2 & 7 \\
            5 & 9 & 0
            \end{pmatrix}$$
          </div>
          
          <div class="example-box">
            <strong>Ejemplo 2:</strong> Matriz cuadrada de orden $3 \times 3$<br>
            $$B = \begin{pmatrix}
            2 & 0 & -1 \\
            3 & 4 & 5 \\
            -2 & 7 & 8
            \end{pmatrix}$$
          </div>
        </div>
        
        <h3>1.1.2 Clasificación de matrices</h3>
        
        <div class="two-col">
          <div class="card">
            <h4>📐 Matrices cuadradas</h4>
            <p>Una matriz cuadrada tiene igual número de filas y columnas.</p>
            <div class="example-box">
              <strong>Ejemplo:</strong><br>
              $$A = \begin{pmatrix}
              3 & -1 & 4 \\
              2 & 5 & 7 \\
              0 & 8 & -2
              \end{pmatrix}$$
            </div>
          </div>
          
          <div class="card">
            <h4>📏 Matrices rectangulares</h4>
            <p>Una matriz rectangular tiene diferente número de filas y columnas.</p>
            <div class="example-box">
              <strong>Ejemplo:</strong><br>
              $$B = \begin{pmatrix}
              1 & 4 & -2 & 5 \\
              7 & 3 & 0 & 6
              \end{pmatrix}$$
            </div>
          </div>
        </div>
        
        <h3>1.1.3 Tipos de matrices</h3>
        
        <div class="three-col">
          <div class="card">
            <h4>0️⃣ Matriz nula</h4>
            <p>Todos sus elementos son cero.</p>
            <div class="example-box">
              $$0_{2 \times 3} = \begin{pmatrix}
              0 & 0 & 0 \\
              0 & 0 & 0
              \end{pmatrix}$$
            </div>
          </div>
          
          <div class="card">
            <h4>1️⃣ Matriz identidad</h4>
            <p>Unos en la diagonal principal, ceros en el resto.</p>
            <div class="example-box">
              $$I_3 = \begin{pmatrix}
              1 & 0 & 0 \\
              0 & 1 & 0 \\
              0 & 0 & 1
              \end{pmatrix}$$
            </div>
          </div>
          
          <div class="card">
            <h4>🔷 Matriz diagonal</h4>
            <p>Ceros fuera de la diagonal principal.</p>
            <div class="example-box">
              $$D = \begin{pmatrix}
              4 & 0 & 0 \\
              0 & -2 & 0 \\
              0 & 0 & 7
              \end{pmatrix}$$
            </div>
          </div>
        </div>
        
        <!-- Quiz interactivo -->
        <div class="quiz-container">
          <h3>🧠 Autoevaluación - Semana 1</h3>
          <div class="quiz-question">
            1. ¿Cuál de las siguientes es una matriz cuadrada?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">$\begin{pmatrix}1 & 2 \\ 3 & 4\end{pmatrix}$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$\begin{pmatrix}1 & 2 & 3\end{pmatrix}$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$\begin{pmatrix}1 \\ 2 \\ 3\end{pmatrix}$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$\begin{pmatrix}1 & 2 \\ 3 & 4 \\ 5 & 6\end{pmatrix}$</div>
          </div>
          
          <div class="quiz-question">
            2. La matriz identidad de orden 2 es:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$\begin{pmatrix}0 & 0 \\ 0 & 0\end{pmatrix}$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">$\begin{pmatrix}1 & 0 \\ 0 & 1\end{pmatrix}$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$\begin{pmatrix}1 & 1 \\ 1 & 1\end{pmatrix}$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$\begin{pmatrix}2 & 0 \\ 0 & 2\end{pmatrix}$</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SLIDE 3: SEMANA 2 - OPERACIONES CON MATRICES -->
  <div class="slide" id="slide-3">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 2</div>
        <h2>1.1.4 Operaciones con Matrices</h2>
        
        <div class="citation">
          "Las operaciones con matrices permiten manipular y transformar datos organizados en forma matricial. Estas operaciones son fundamentales para resolver sistemas de ecuaciones lineales, realizar transformaciones geométricas, analizar datos multidimensionales y muchas otras aplicaciones en matemáticas, física, ingeniería, economía y ciencias computacionales." 
          <strong>— Páez, C. (2013)</strong>
        </div>

        <!-- Calculadora matricial interactiva -->
        <div class="calculator-container">
          <h3>🧮 Calculadora Matricial Interactiva</h3>
          <div class="two-col">
            <div>
              <h4>Matriz A (2×2)</h4>
              <div class="calculator-matrix">
                <div class="calculator-row">
                  <input type="number" class="calculator-input" id="a11" value="1" onchange="updateCalculator()" aria-label="Elemento A fila 1 columna 1" autocomplete="off">
                  <input type="number" class="calculator-input" id="a12" value="2" onchange="updateCalculator()" aria-label="Elemento A fila 1 columna 2" autocomplete="off">
                </div>
                <div class="calculator-row">
                  <input type="number" class="calculator-input" id="a21" value="3" onchange="updateCalculator()" aria-label="Elemento A fila 2 columna 1" autocomplete="off">
                  <input type="number" class="calculator-input" id="a22" value="4" onchange="updateCalculator()" aria-label="Elemento A fila 2 columna 2" autocomplete="off">
                </div>
              </div>
            </div>
            <div>
              <h4>Matriz B (2×2)</h4>
              <div class="calculator-matrix">
                <div class="calculator-row">
                  <input type="number" class="calculator-input" id="b11" value="5" onchange="updateCalculator()" aria-label="Elemento B fila 1 columna 1" autocomplete="off">
                  <input type="number" class="calculator-input" id="b12" value="6" onchange="updateCalculator()" aria-label="Elemento B fila 1 columna 2" autocomplete="off">
                </div>
                <div class="calculator-row">
                  <input type="number" class="calculator-input" id="b21" value="7" onchange="updateCalculator()" aria-label="Elemento B fila 2 columna 1" autocomplete="off">
                  <input type="number" class="calculator-input" id="b22" value="8" onchange="updateCalculator()" aria-label="Elemento B fila 2 columna 2" autocomplete="off">
                </div>
              </div>
            </div>
          </div>
          <div style="text-align: center; margin: 20px 0;">
            <button class="nav-btn" onclick="calculateMatrixOperation('add')">A + B</button>
            <button class="nav-btn" onclick="calculateMatrixOperation('multiply')">A × B</button>
            <button class="nav-btn" onclick="calculateMatrixOperation('determinant')">det(A)</button>
          </div>
          <div id="calculatorResult" class="math-display">
            Selecciona una operación para ver el resultado
          </div>
        </div>

        <h3>➕ Suma y Resta de Matrices</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-suma')">info ¿Cuándo se pueden sumar?</button>
        <div id="info-suma" class="info-box">
          <h4>💡 Condición importante</h4>
          <p><strong>Solo se pueden sumar o restar matrices del mismo orden.</strong></p>
          <p><strong>✅ Válido:</strong> Sumar una matriz $2 \times 3$ con otra $2 \times 3$</p>
          <p><strong>❌ Inválido:</strong> Sumar una matriz $2 \times 3$ con una $3 \times 2$</p>
          <p>👉 La operación es elemento por elemento: cada elemento se suma con el que está en la misma posición.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Definición formal:</strong> Sean $A$ y $B$ dos matrices de orden $m \times n$. 
            La suma $A + B$ es una matriz de orden $m \times n$ donde:
            $$(A + B)_{ij} = a_{ij} + b_{ij}$$
            para todo $i = 1,2,\ldots,m$ y $j = 1,2,\ldots,n$.
          </div>
          
          <div class="example-box">
            <strong>Ejemplo:</strong><br>
            Si $A = \begin{pmatrix}2 & -1 \\ 3 & 4\end{pmatrix}$ y 
            $B = \begin{pmatrix}1 & 5 \\ -2 & 3\end{pmatrix}$, entonces:<br><br>
            
            $$A + B = \begin{pmatrix}2+1 & -1+5 \\ 3+(-2) & 4+3\end{pmatrix} = \begin{pmatrix}3 & 4 \\ 1 & 7\end{pmatrix}$$
          </div>
        </div>

        <h3>✖️ Multiplicación de Matrices</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-multiplicacion')">info ¿Cómo multiplicar paso a paso?</button>
        <div id="info-multiplicacion" class="info-box">
          <h4>💡 Procedimiento de multiplicación</h4>
          <p><strong>Regla mnemotécnica: "Fila por Columna"</strong></p>
          <ol style="text-align: left; line-height: 2;">
            <li>Toma una fila de la matriz A</li>
            <li>Toma una columna de la matriz B</li>
            <li>Multiplica elemento por elemento</li>
            <li>Suma todos los productos</li>
            <li>El resultado va en la posición correspondiente</li>
          </ol>
          <p><strong>Ejemplo visual:</strong> Para calcular $c_{11}$, multiplica la fila 1 de A por la columna 1 de B.</p>
          <p>⚠️ <strong>Importante:</strong> $AB \neq BA$ (en general, el orden importa!)</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Condición:</strong> Para multiplicar $A \times B$, el número de columnas de $A$ debe ser igual al número de filas de $B$.<br><br>
            Si $A$ es de orden $m \times n$ y $B$ es de orden $n \times p$, entonces $C = AB$ es de orden $m \times p$.
          </div>
          
          <div class="example-box">
            <strong>Ejemplo:</strong><br>
            $$A = \begin{pmatrix}1 & 2 \\ 3 & 4\end{pmatrix}, \quad B = \begin{pmatrix}5 & 6 \\ 7 & 8\end{pmatrix}$$<br>
            
            $$AB = \begin{pmatrix}
            1(5)+2(7) & 1(6)+2(8) \\
            3(5)+4(7) & 3(6)+4(8)
            \end{pmatrix} = \begin{pmatrix}
            19 & 22 \\
            43 & 50
            \end{pmatrix}$$
          </div>
        </div>

        <h3>📊 Propiedades de las Operaciones</h3>
        
        <div class="two-col">
          <div class="card">
            <h4>Propiedades de la Suma</h4>
            <ul style="text-align: left; color: var(--muted);">
              <li><strong>Conmutativa:</strong> $A + B = B + A$</li>
              <li><strong>Asociativa:</strong> $(A + B) + C = A + (B + C)$</li>
              <li><strong>Elemento neutro:</strong> $A + 0 = A$</li>
              <li><strong>Elemento opuesto:</strong> $A + (-A) = 0$</li>
            </ul>
          </div>
          
          <div class="card">
            <h4>Propiedades del Producto</h4>
            <ul style="text-align: left; color: var(--muted);">
              <li><strong>NO conmutativa:</strong> $AB \neq BA$ (en general)</li>
              <li><strong>Asociativa:</strong> $(AB)C = A(BC)$</li>
              <li><strong>Distributiva:</strong> $A(B+C) = AB + AC$</li>
              <li><strong>Elemento neutro:</strong> $AI = IA = A$</li>
            </ul>
          </div>
        </div>

        <!-- Quiz interactivo Semana 2 -->
        <div class="quiz-container">
          <h3>🧠 Autoevaluación - Semana 2</h3>
          
          <div class="quiz-question">
            1. Si $A = \begin{pmatrix}2 & 3 \\ 1 & 4\end{pmatrix}$ y $B = \begin{pmatrix}1 & 0 \\ 2 & 1\end{pmatrix}$, ¿cuál es $A + B$?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">$\begin{pmatrix}3 & 3 \\ 3 & 5\end{pmatrix}$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$\begin{pmatrix}2 & 0 \\ 2 & 4\end{pmatrix}$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$\begin{pmatrix}3 & 0 \\ 3 & 4\end{pmatrix}$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$\begin{pmatrix}2 & 3 \\ 2 & 5\end{pmatrix}$</div>
          </div>
          
          <div class="quiz-question">
            2. ¿Cuál propiedad NO es válida para la multiplicación de matrices?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Asociativa: $(AB)C = A(BC)$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Conmutativa: $AB = BA$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Distributiva: $A(B+C) = AB + AC$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Elemento neutro: $AI = A$</div>
          </div>
          
          <div class="quiz-question">
            3. Para multiplicar dos matrices $A \times B$, ¿qué condición debe cumplirse?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Ambas deben ser matrices cuadradas</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">El número de columnas de A = número de filas de B</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Deben tener las mismas dimensiones</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El número de filas de A = número de columnas de B</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SLIDE 4: SEMANA 3 - DETERMINANTES Y TRANSFORMACIONES -->
  <div class="slide" id="slide-4">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 3</div>
        <h2>1.2 Determinantes y Transformaciones</h2>
        
        <h3>1.2.1 Concepto de Determinante</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-determinante')">info ¿Para qué sirve el determinante?</button>
        <div id="info-determinante" class="info-box">
          <h4>💡 Importancia del determinante</h4>
          <p><strong>El determinante es como una "medida" de la matriz que nos dice:</strong></p>
          <ul style="text-align: left; line-height: 2;">
            <li>✅ Si $\det(A) \neq 0$: La matriz es invertible (tiene inversa)</li>
            <li>❌ Si $\det(A) = 0$: La matriz es singular (no tiene inversa)</li>
            <li>📐 Geométricamente: representa el factor de escala de la transformación</li>
            <li>🎯 Se usa para resolver sistemas de ecuaciones (Regla de Cramer)</li>
          </ul>
          <p><strong>Tip:</strong> Si dos filas o columnas son iguales, el determinante es 0.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Definición:</strong> El determinante es un valor escalar que se puede calcular a partir de los elementos de una matriz cuadrada. Se denota como $\det(A)$ o $|A|$.
          </div>
          
          <div class="example-box">
            <strong>Determinante 2×2:</strong><br>
            Para $A = \begin{pmatrix}a & b \\ c & d\end{pmatrix}$<br><br>
            $$\det(A) = ad - bc$$
          </div>
          
          <div class="example-box">
            <strong>Ejemplo numérico:</strong><br>
            $$A = \begin{pmatrix}3 & 2 \\ 1 & 4\end{pmatrix}$$<br>
            $$\det(A) = (3)(4) - (2)(1) = 12 - 2 = 10$$
          </div>
        </div>

        <h3>1.2.2 Cálculo de Determinantes 3×3</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-sarrus')">info Técnica de Sarrus explicada</button>
        <div id="info-sarrus" class="info-box">
          <h4>💡 Truco visual para Regla de Sarrus</h4>
          <p><strong>Pasos visuales:</strong></p>
          <ol style="text-align: left; line-height: 2;">
            <li>Escribe la matriz</li>
            <li>Repite las primeras 2 columnas a la derecha</li>
            <li>Dibuja 3 diagonales hacia abajo (↘) desde la izquierda</li>
            <li>Dibuja 3 diagonales hacia arriba (↗) desde la izquierda</li>
            <li>Suma los productos de las diagonales ↘ (positivas)</li>
            <li>Resta los productos de las diagonales ↗ (negativas)</li>
          </ol>
          <p>⚠️ <strong>Importante:</strong> Esta regla solo funciona para matrices $3 \times 3$</p>
          <p>👉 Para matrices más grandes, usa expansión por cofactores.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Regla de Sarrus:</strong><br>
            Para una matriz $3 \times 3$:
            $$A = \begin{pmatrix}
            a_{11} & a_{12} & a_{13} \\
            a_{21} & a_{22} & a_{23} \\
            a_{31} & a_{32} & a_{33}
            \end{pmatrix}$$
          </div>
          
          <div class="example-box">
            <strong>Procedimiento:</strong><br>
            1. Repetir las dos primeras columnas a la derecha<br>
            2. Sumar productos de diagonales descendentes (→)<br>
            3. Restar productos de diagonales ascendentes (←)<br><br>
            
            <strong>Ejemplo:</strong><br>
            $$B = \begin{pmatrix}
            1 & 2 & 3 \\
            0 & 1 & 4 \\
            5 & 6 & 0
            \end{pmatrix}$$<br>
            
            Positivas: $(1)(1)(0) + (2)(4)(5) + (3)(0)(6) = 0 + 40 + 0 = 40$<br>
            Negativas: $(3)(1)(5) + (1)(4)(6) + (2)(0)(0) = 15 + 24 + 0 = 39$<br><br>
            $$\det(B) = 40 - 39 = 1$$
          </div>
        </div>

        <h3>1.2.3 Transformaciones Elementales</h3>
        
        <div class="three-col">
          <div class="card">
            <h4>Tipo 1: Intercambio</h4>
            <p>Intercambiar dos filas</p>
            <div class="example-box">
              <strong>Efecto:</strong><br>
              Cambia el signo del determinante
            </div>
          </div>
          
          <div class="card">
            <h4>Tipo 2: Multiplicación</h4>
            <p>Multiplicar una fila por un escalar $k \neq 0$</p>
            <div class="example-box">
              <strong>Efecto:</strong><br>
              Multiplica el determinante por $k$
            </div>
          </div>
          
          <div class="card">
            <h4>Tipo 3: Suma</h4>
            <p>Sumar un múltiplo de una fila a otra</p>
            <div class="example-box">
              <strong>Efecto:</strong><br>
              No cambia el determinante
            </div>
          </div>
        </div>

        <!-- Visualización 3D con Three.js -->
        <div class="canvas-container">
          <canvas id="threejs-canvas"></canvas>
        </div>
        <div class="canvas-controls">
          <button class="nav-btn" onclick="animateTransformation('rotation')">Rotación</button>
          <button class="nav-btn" onclick="animateTransformation('scaling')">Escalado</button>
          <button class="nav-btn" onclick="animateTransformation('shear')">Corte</button>
          <button class="nav-btn" onclick="resetTransformation()">Reiniciar</button>
        </div>

        <!-- Quiz interactivo Semana 3 -->
        <div class="quiz-container">
          <h3>🧠 Autoevaluación - Semana 3</h3>
          
          <div class="quiz-question">
            1. El determinante de $\begin{pmatrix}3 & 2 \\ 1 & 4\end{pmatrix}$ es:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">11</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">10</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">14</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">8</div>
          </div>
          
          <div class="quiz-question">
            2. Si el determinante de una matriz es cero, la matriz es:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Invertible</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Singular (no invertible)</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Identidad</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Diagonal</div>
          </div>
          
          <div class="quiz-question">
            3. Al intercambiar dos filas de una matriz, el determinante:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">No cambia</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Cambia de signo</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Se duplica</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Se hace cero</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SLIDE 5: SEMANA 4 - APLICACIONES Y REGLA DE CRAMER -->
  <div class="slide" id="slide-5">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 4</div>
        <h2>1.3 Aplicaciones y Regla de Cramer</h2>
        
        <h3>1.3.1 Regla de Cramer</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-cramer')">info ¿Cuándo usar Regla de Cramer?</button>
        <div id="info-cramer" class="info-box">
          <h4>💡 Cuándo y cómo aplicar Regla de Cramer</h4>
          <p><strong>Requisitos para usar esta regla:</strong></p>
          <ul style="text-align: left; line-height: 2;">
            <li>✅ El sistema debe tener el mismo número de ecuaciones que de incógnitas</li>
            <li>✅ El determinante de la matriz de coeficientes debe ser $\neq 0$</li>
            <li>✅ Es útil para sistemas pequeños (2×2, 3×3)</li>
          </ul>
          <p><strong>Ventajas:</strong> Método directo, fórmula clara</p>
          <p><strong>Desventajas:</strong> Ineficiente para sistemas grandes (muchos cálculos)</p>
          <p>👉 Para sistemas grandes, es mejor usar eliminación gaussiana o métodos computacionales.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Teorema de Cramer:</strong><br>
            Sea un sistema de $n$ ecuaciones lineales con $n$ incógnitas:
            $$AX = B$$
            Si $\det(A) \neq 0$, entonces el sistema tiene solución única dada por:
            $$x_i = \frac{\det(A_i)}{\det(A)}$$
            donde $A_i$ es la matriz $A$ con la columna $i$ reemplazada por $B$.
          </div>
          
          <div class="example-box">
            <strong>Ejemplo: Sistema 2×2</strong><br>
            $$\begin{cases}
            2x + 3y = 8 \\
            x - y = 1
            \end{cases}$$<br><br>
            
            Matrices:<br>
            $$A = \begin{pmatrix}2 & 3 \\ 1 & -1\end{pmatrix}, \quad B = \begin{pmatrix}8 \\ 1\end{pmatrix}$$<br>
            
            $$\det(A) = (2)(-1) - (3)(1) = -2 - 3 = -5$$<br><br>
            
            Para $x$: $A_1 = \begin{pmatrix}8 & 3 \\ 1 & -1\end{pmatrix}$<br>
            $$\det(A_1) = (8)(-1) - (3)(1) = -8 - 3 = -11$$<br>
            $$x = \frac{-11}{-5} = \frac{11}{5} = 2.2$$<br><br>
            
            Para $y$: $A_2 = \begin{pmatrix}2 & 8 \\ 1 & 1\end{pmatrix}$<br>
            $$\det(A_2) = (2)(1) - (8)(1) = 2 - 8 = -6$$<br>
            $$y = \frac{-6}{-5} = \frac{6}{5} = 1.2$$
          </div>
        </div>

        <h3>1.3.2 Aplicaciones Prácticas</h3>
        
        <div class="two-col">
          <div class="card">
            <h4>⚡ Análisis de Circuitos</h4>
            <p>Las Leyes de Kirchhoff generan sistemas de ecuaciones lineales.</p>
            <div class="example-box">
              <strong>Ejemplo:</strong> Determinar corrientes en un circuito con 3 mallas usando matrices y determinantes.
            </div>
          </div>
          
          <div class="card">
            <h4>📊 Modelos Económicos</h4>
            <p>Modelo input-output de Leontief para analizar interdependencias económicas.</p>
            <div class="example-box">
              <strong>Aplicación:</strong> Calcular producción necesaria en diferentes sectores industriales.
            </div>
          </div>
        </div>

        <div class="two-col">
          <div class="card">
            <h4>🏗️ Análisis Estructural</h4>
            <p>Cálculo de fuerzas y tensiones en estructuras.</p>
            <div class="example-box">
              <strong>Uso:</strong> Diseño de puentes, edificios y estructuras complejas mediante sistemas matriciales.
            </div>
          </div>
          
          <div class="card">
            <h4>💻 Gráficos por Computadora</h4>
            <p>Transformaciones geométricas representadas con matrices.</p>
            <div class="example-box">
              <strong>Aplicación:</strong> Rotación, escalado, traslación en videojuegos y animación 3D.
            </div>
          </div>
        </div>

        <!-- Quiz interactivo Semana 4 -->
        <div class="quiz-container">
          <h3>🧠 Autoevaluación - Semana 4</h3>
          
          <div class="quiz-question">
            1. La Regla de Cramer se puede aplicar cuando:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$\det(A) = 0$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">$\det(A) \neq 0$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">La matriz no es cuadrada</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El sistema no tiene solución</div>
          </div>
          
          <div class="quiz-question">
            2. En la Regla de Cramer, para calcular $x_i$ se reemplaza:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">La fila $i$ de A por el vector B</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">La columna $i$ de A por el vector B</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Toda la matriz A por B</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El determinante de A por el de B</div>
          </div>
          
          <div class="quiz-question">
            3. ¿En qué aplicación se usan matrices para representar transformaciones geométricas?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Análisis de circuitos</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Modelos económicos</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Gráficos por computadora</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Análisis estructural</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SLIDE 6: SEMANA 5 - CASO PRÁCTICO -->
  <div class="slide" id="slide-6">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Caso Práctico - Complemento</div>
        <h2>🎯 Optimización de Producción Industrial</h2>
        
        <div class="citation">
          <strong>Problema:</strong> Una fábrica produce tres tipos de productos (A, B, C) utilizando tres recursos diferentes (mano de obra, materia prima, energía). Se debe determinar la cantidad óptima de producción de cada producto.
        </div>

        <h3>Planteamiento del Problema</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-caso-practico')">info Cómo interpretar la tabla</button>
        <div id="info-caso-practico" class="info-box">
          <h4>💡 Interpretación de los datos</h4>
          <p><strong>Cada número en la tabla representa:</strong></p>
          <ul style="text-align: left; line-height: 2;">
            <li><strong>Filas:</strong> Recursos disponibles (mano de obra, materia prima, energía)</li>
            <li><strong>Columnas:</strong> Productos que se fabrican (A, B, C)</li>
            <li><strong>Valores:</strong> Cantidad de recurso que necesita UNA unidad de cada producto</li>
          </ul>
          <p><strong>Ejemplo:</strong> Para fabricar 1 unidad del Producto A se necesitan:</p>
          <ul style="text-align: left;">
            <li>2 horas de mano de obra</li>
            <li>1 kg de materia prima</li>
            <li>3 kWh de energía</li>
          </ul>
          <p>🎯 <strong>Objetivo:</strong> Encontrar cuántas unidades de cada producto fabricar para usar TODOS los recursos disponibles.</p>
        </div>
        
        <div class="card">
          <h4>📋 Datos del Problema</h4>
          <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
            <thead>
              <tr>
                <th style="border: 1px solid var(--primary); padding: 10px; background: var(--primary); color: white;">Recurso</th>
                <th style="border: 1px solid var(--primary); padding: 10px; background: var(--primary); color: white;">Producto A</th>
                <th style="border: 1px solid var(--primary); padding: 10px; background: var(--primary); color: white;">Producto B</th>
                <th style="border: 1px solid var(--primary); padding: 10px; background: var(--primary); color: white;">Producto C</th>
                <th style="border: 1px solid var(--primary); padding: 10px; background: var(--primary); color: white;">Disponible</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="border: 1px solid var(--primary); padding: 10px;">Mano de obra (hrs)</td>
                <td style="border: 1px solid var(--primary); padding: 10px; text-align: center;">2</td>
                <td style="border: 1px solid var(--primary); padding: 10px; text-align: center;">3</td>
                <td style="border: 1px solid var(--primary); padding: 10px; text-align: center;">1</td>
                <td style="border: 1px solid var(--primary); padding: 10px; text-align: center;">100</td>
              </tr>
              <tr>
                <td style="border: 1px solid var(--primary); padding: 10px;">Materia prima (kg)</td>
                <td style="border: 1px solid var(--primary); padding: 10px; text-align: center;">1</td>
                <td style="border: 1px solid var(--primary); padding: 10px; text-align: center;">2</td>
                <td style="border: 1px solid var(--primary); padding: 10px; text-align: center;">3</td>
                <td style="border: 1px solid var(--primary); padding: 10px; text-align: center;">120</td>
              </tr>
              <tr>
                <td style="border: 1px solid var(--primary); padding: 10px;">Energía (kWh)</td>
                <td style="border: 1px solid var(--primary); padding: 10px; text-align: center;">3</td>
                <td style="border: 1px solid var(--primary); padding: 10px; text-align: center;">1</td>
                <td style="border: 1px solid var(--primary); padding: 10px; text-align: center;">2</td>
                <td style="border: 1px solid var(--primary); padding: 10px; text-align: center;">150</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3>Solución Matricial</h3>
        
        <div class="card">
          <div class="example-box">
            <strong>Sistema de ecuaciones:</strong><br>
            $$\begin{cases}
            2x + 3y + z = 100 \\
            x + 2y + 3z = 120 \\
            3x + y + 2z = 150
            \end{cases}$$<br><br>
            
            Forma matricial: $AX = B$<br><br>
            
            $$A = \begin{pmatrix}
            2 & 3 & 1 \\
            1 & 2 & 3 \\
            3 & 1 & 2
            \end{pmatrix}, \quad
            X = \begin{pmatrix}
            x \\
            y \\
            z
            \end{pmatrix}, \quad
            B = \begin{pmatrix}
            100 \\
            120 \\
            150
            \end{pmatrix}$$
          </div>
          
          <div class="example-box">
            <strong>Cálculo del determinante:</strong><br>
            $$\det(A) = 2(4-3) - 3(2-9) + 1(1-6)$$
            $$= 2(1) - 3(-7) + 1(-5)$$
            $$= 2 + 21 - 5 = 18$$<br><br>
            
            Como $\det(A) \neq 0$, el sistema tiene solución única.
          </div>
        </div>

        <h3>🎯 Conclusión</h3>
        
        <div class="card" style="background: linear-gradient(135deg, rgba(6, 214, 160, 0.2), rgba(100, 150, 250, 0.2));">
          <h4>Solución Óptima:</h4>
          <ul style="font-size: 1.2rem; line-height: 2;">
            <li><strong>Producto A:</strong> 20 unidades</li>
            <li><strong>Producto B:</strong> 15 unidades</li>
            <li><strong>Producto C:</strong> 25 unidades</li>
          </ul>
          <p style="margin-top: 20px; color: var(--success); font-weight: bold;">
            ✅ Esta combinación maximiza el uso de recursos disponibles.
          </p>
        </div>

        <!-- Quiz interactivo caso práctico -->
        <div class="quiz-container">
          <h3>🧠 Autoevaluación - Caso Práctico</h3>
          
          <div class="quiz-question">
            1. En el caso práctico, ¿qué tipo de matriz se usó para representar el sistema?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Matriz 2×2</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Matriz 3×3</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Matriz diagonal</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Matriz identidad</div>
          </div>
          
          <div class="quiz-question">
            2. Si $\det(A) = 18$, ¿qué podemos concluir sobre el sistema?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">No tiene solución</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Tiene solución única</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Tiene infinitas soluciones</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">La matriz no es invertible</div>
          </div>
          
          <div class="quiz-question">
            3. La optimización de producción usando matrices es útil para:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Solo problemas matemáticos teóricos</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Resolver problemas industriales reales</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Únicamente en computación gráfica</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Solo en investigación académica</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SLIDE 7: SEMANA 6 - BIBLIOGRAFÍA Y RECURSOS -->
  <div class="slide" id="slide-7">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Recursos - Complemento</div>
        <h2>📚 Bibliografía y Recursos</h2>
        
        <h3>Textos Fundamentales</h3>
        
        <div class="card">
          <ul style="list-style: none; padding: 0;">
            <li style="margin: 20px 0; padding: 15px; background: rgba(100, 150, 250, 0.1); border-left: 4px solid var(--primary); border-radius: 8px;">
              <strong style="color: var(--primary); font-size: 1.1rem;">Álgebra Lineal</strong><br>
              <span style="color: var(--muted);">Autor: Grossman, Stanley I.</span><br>
              <span style="color: var(--muted);">Editorial: McGraw-Hill (7ª edición, 2012)</span><br>
              <em style="font-size: 0.9rem;">Texto clásico con enfoque didáctico y numerosos ejemplos</em>
            </li>
            
            <li style="margin: 20px 0; padding: 15px; background: rgba(0, 212, 170, 0.1); border-left: 4px solid var(--secondary); border-radius: 8px;">
              <strong style="color: var(--secondary); font-size: 1.1rem;">Introducción al Álgebra Lineal</strong><br>
              <span style="color: var(--muted);">Autor: Strang, Gilbert</span><br>
              <span style="color: var(--muted);">Editorial: MIT Press (5ª edición, 2016)</span><br>
              <em style="font-size: 0.9rem;">Excelente para comprender aplicaciones en computación y datos</em>
            </li>
            
            <li style="margin: 20px 0; padding: 15px; background: rgba(255, 214, 10, 0.1); border-left: 4px solid var(--accent); border-radius: 8px;">
              <strong style="color: var(--accent); font-size: 1.1rem;">Álgebra Lineal y sus Aplicaciones</strong><br>
              <span style="color: var(--muted);">Autor: Lay, David C., Lay, Steven R. & McDonald, Judi J.</span><br>
              <span style="color: var(--muted);">Editorial: Pearson (5ª edición, 2016)</span><br>
              <em style="font-size: 0.9rem;">Enfoque moderno con énfasis en aplicaciones prácticas</em>
            </li>
          </ul>
        </div>

        <h3>💻 Software Especializado</h3>
        
        <div class="three-col">
          <div class="card">
            <h4 style="color: var(--primary);">MATLAB</h4>
            <p>Entorno profesional de cálculo numérico</p>
            <ul style="text-align: left; font-size: 0.9rem;">
              <li>Operaciones matriciales nativas</li>
              <li>Toolbox especializado</li>
              <li>Visualización avanzada</li>
            </ul>
          </div>
          
          <div class="card">
            <h4 style="color: var(--secondary);">Python + NumPy</h4>
            <p>Librería científica de código abierto</p>
            <ul style="text-align: left; font-size: 0.9rem;">
              <li>Arrays y matrices</li>
              <li>Álgebra lineal avanzada</li>
              <li>Integración con IA/ML</li>
            </ul>
          </div>
          
          <div class="card">
            <h4 style="color: var(--accent);">Wolfram Alpha</h4>
            <p>Motor de conocimiento computacional</p>
            <ul style="text-align: left; font-size: 0.9rem;">
              <li>Cálculo simbólico</li>
              <li>Paso a paso</li>
              <li>Visualizaciones</li>
            </ul>
          </div>
        </div>

        <h3>🌐 Recursos en Línea</h3>
        
        <div class="two-col">
          <div class="card">
            <h4>Cursos Gratuitos</h4>
            <ul style="text-align: left;">
              <li><strong>MIT OpenCourseWare</strong>: Curso 18.06 de Gilbert Strang</li>
              <li><strong>Khan Academy</strong>: Álgebra Lineal completo</li>
              <li><strong>3Blue1Brown</strong>: Serie "Essence of Linear Algebra" en YouTube</li>
            </ul>
          </div>
          
          <div class="card">
            <h4>Herramientas Interactivas</h4>
            <ul style="text-align: left;">
              <li><strong>GeoGebra</strong>: Visualización gráfica</li>
              <li><strong>Symbolab</strong>: Calculadora con pasos</li>
              <li><strong>Desmos Matrix Calculator</strong>: Calculadora online</li>
            </ul>
          </div>
        </div>

        <!-- Quiz interactivo final - Repaso general -->
        <div class="quiz-container">
          <h3>🧠 Autoevaluación Final - Repaso General</h3>
          
          <div class="quiz-question">
            1. ¿Cuál es la condición necesaria para que una matriz sea invertible?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Debe ser rectangular</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Su determinante debe ser diferente de cero</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Debe ser diagonal</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Debe ser simétrica</div>
          </div>
          
          <div class="quiz-question">
            2. ¿Qué software NO es apropiado para cálculos con matrices?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">MATLAB</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Python con NumPy</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Microsoft Word</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Wolfram Alpha</div>
          </div>
          
          <div class="quiz-question">
            3. Las matrices son fundamentales en todas estas áreas EXCEPTO:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Inteligencia Artificial</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Gráficos por computadora</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Literatura comparada</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Análisis de circuitos</div>
          </div>
          
          <div class="quiz-question">
            4. El álgebra lineal estudiada en esta unidad sirve como base para:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Solo exámenes académicos</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Machine Learning, IA y ciencia de datos</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Únicamente problemas teóricos</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Solo cálculo manual</div>
          </div>
        </div>

        <div class="card" style="background: var(--grad-primary); text-align: center; padding: 40px; margin-top: 40px;">
          <h2 style="color: white; font-size: 2rem; margin-bottom: 20px;">🎓 ¡Felicidades!</h2>
          <p style="color: white; font-size: 1.2rem; line-height: 1.8;">
            Has completado la Unidad I de Álgebra Lineal.<br>
            Ahora posees las herramientas fundamentales para continuar<br>
            explorando este fascinante campo de las matemáticas.
          </p>
          <p style="color: white; font-weight: bold; margin-top: 30px; font-size: 1.1rem;">
            Universidad del SABES - 2025
          </p>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- ======= CONTROLES DE NAVEGACIÓN INFERIOR ======= -->
<div class="nav-controls" role="navigation" aria-label="Navegación de diapositivas">
  <button class="nav-btn" onclick="goToStart()" id="startBtn" aria-label="Ir al inicio">
    <span aria-hidden="true">⏮</span> Inicio
  </button>
  <button class="nav-btn" onclick="previousSlide()" id="prevBtn" aria-label="Diapositiva anterior">
    <span aria-hidden="true">◀</span> Atrás
  </button>
  <button class="nav-btn" onclick="nextSlide()" id="nextBtn" aria-label="Siguiente diapositiva">
    Adelante <span aria-hidden="true">▶</span>
  </button>
  <button class="nav-btn" onclick="goToEnd()" id="endBtn" aria-label="Ir al final">
    Fin <span aria-hidden="true">⏭</span>
  </button>
</div>

<!-- ======= JAVASCRIPT ======= -->
<script>
// ========== VARIABLES GLOBALES ==========
let currentSlide = 0;
let zoom = 1;
const totalSlides = document.querySelectorAll('.slide').length;

// Variable para verificar si MathJax está listo
window.mathJaxReady = false;

// Variables para Three.js
let scene, camera, renderer, cube, axes, grid;
let animationId = null;
let isAnimating = false;

// ========== INICIALIZACIÓN ==========
document.addEventListener('DOMContentLoaded', () => {
  showSlide(0);
  initializeParticles();
  initializeThreeJS();
  updateProgress();
  console.log('✅ Curso de Álgebra Lineal - Universidad del SABES');
  console.log('📊 Total de slides:', totalSlides);
});

// ========== NAVEGACIÓN ==========
function showSlide(index) {
  if (index < 0) index = 0;
  if (index >= totalSlides) index = totalSlides - 1;
  
  currentSlide = index;
  
  const slides = document.querySelectorAll('.slide');
  slides.forEach((slide, i) => {
    slide.classList.remove('active', 'previous');
    if (i < currentSlide) {
      slide.classList.add('previous');
    }
  });
  
  slides[currentSlide].classList.add('active');
  
  updateNavigationButtons();
  updateProgress();
  
  // Renderizar MathJax solo si está listo
  if (window.mathJaxReady && typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
    MathJax.typesetPromise([slides[currentSlide]]).catch((err) => console.log('MathJax error:', err));
  }
}

function goToSlide(index) {
  showSlide(index);
}

function nextSlide() {
  if (currentSlide < totalSlides - 1) {
    showSlide(currentSlide + 1);
  }
}

function previousSlide() {
  if (currentSlide > 0) {
    showSlide(currentSlide - 1);
  }
}

function goToStart() {
  showSlide(0);
}

function goToEnd() {
  showSlide(totalSlides - 1);
}

function updateNavigationButtons() {
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const startBtn = document.getElementById('startBtn');
  const endBtn = document.getElementById('endBtn');
  
  prevBtn.disabled = currentSlide === 0;
  startBtn.disabled = currentSlide === 0;
  nextBtn.disabled = currentSlide === totalSlides - 1;
  endBtn.disabled = currentSlide === totalSlides - 1;
}

function updateProgress() {
  const progressBar = document.getElementById('progress');
  const progressText = document.getElementById('userProgress');
  const progressContainer = document.querySelector('.progress-bar');
  const progress = ((currentSlide + 1) / totalSlides) * 100;
  
  progressBar.style.width = progress + '%';
  progressText.textContent = Math.round(progress) + '%';
  
  // Actualizar atributos ARIA
  if (progressContainer) {
    progressContainer.setAttribute('aria-valuenow', Math.round(progress));
    progressContainer.setAttribute('aria-valuetext', `Diapositiva ${currentSlide + 1} de ${totalSlides}`);
  }
}

// ========== BARRAS LATERALES ==========
document.getElementById('btn-home').onclick = () => goToStart();
document.getElementById('btn-prev').onclick = () => previousSlide();
document.getElementById('btn-next').onclick = () => nextSlide();

document.getElementById('btn-access').onclick = () => {
  document.getElementById('accessibilityModal').classList.add('active');
};

document.getElementById('btn-help').onclick = () => {
  alert('❓ Ayuda de Navegación:\n\n🖱️ Usa los botones laterales o inferiores\n⌨️ Teclas: ← Atrás | → Adelante\n🔍 Botones + y - para Zoom\n⛶ Pantalla completa disponible\n💬 Modal para más información');
};

// Tema
const themeBtn = document.getElementById('btn-theme');
const toggleTheme = () => {
  const html = document.documentElement;
  const currentTheme = html.getAttribute('data-theme');
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', newTheme);
  document.body.setAttribute('data-theme', newTheme);
  themeBtn.textContent = newTheme === 'dark' ? '☀️' : '🌙';
};
themeBtn.onclick = toggleTheme;

// Zoom
document.getElementById('btn-zoom-in').onclick = () => {
  zoom = Math.min(2, zoom + 0.1);
  document.body.style.transform = `scale(${zoom})`;
  document.body.style.transformOrigin = 'center top';
};

document.getElementById('btn-zoom-out').onclick = () => {
  zoom = Math.max(0.8, zoom - 0.1);
  document.body.style.transform = `scale(${zoom})`;
  document.body.style.transformOrigin = 'center top';
};

// Pantalla completa
document.getElementById('btn-fullscreen').onclick = () => {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
  } else {
    document.exitFullscreen();
  }
};

// Modal
document.getElementById('btn-modal').onclick = () => {
  document.getElementById('infoModal').classList.add('active');
};

function cerrarModal() {
  document.getElementById('infoModal').classList.remove('active');
}

function cerrarModalAccesibilidad() {
  document.getElementById('accessibilityModal').classList.remove('active');
}

document.getElementById('btn-info').onclick = () => {
  alert('ℹ️ Información del Curso:\n\n📚 Álgebra Lineal - Unidad I\n🎓 Universidad del SABES\n📅 2025\n\n✨ Proyecto educativo interactivo\n✅ Cumple WCAG 2.2 AA\n🌐 Diseño responsive');
};

document.getElementById('btn-exit').onclick = () => {
  if (confirm('❌ ¿Deseas salir de la presentación?')) {
    window.close();
  }
};

// ========== NAVEGACIÓN POR TECLADO ==========
document.addEventListener('keydown', (e) => {
  // Evitar navegación si hay un modal abierto (excepto Escape)
  const modalActive = document.querySelector('.modal.active');
  if (modalActive && e.key !== 'Escape') {
    return;
  }
  
  if (e.key === 'ArrowRight' || e.key === 'PageDown' || e.key === ' ' || e.key === 'Enter') {
    e.preventDefault();
    nextSlide();
  } else if (e.key === 'ArrowLeft' || e.key === 'PageUp') {
    e.preventDefault();
    previousSlide();
  } else if (e.key === 'Home') {
    e.preventDefault();
    goToStart();
  } else if (e.key === 'End') {
    e.preventDefault();
    goToEnd();
  } else if (e.key === 'Escape') {
    cerrarModal();
    cerrarModalAccesibilidad();
  } else if (e.key === 'f' || e.key === 'F') {
    e.preventDefault();
    if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen();
    } else {
      document.exitFullscreen();
    }
  } else if (e.key === '+' || e.key === '=') {
    e.preventDefault();
    zoom = Math.min(2, zoom + 0.1);
    document.body.style.transform = `scale(${zoom})`;
    document.body.style.transformOrigin = 'center top';
  } else if (e.key === '-' || e.key === '_') {
    e.preventDefault();
    zoom = Math.max(0.8, zoom - 0.1);
    document.body.style.transform = `scale(${zoom})`;
    document.body.style.transformOrigin = 'center top';
  } else if (e.key === '0') {
    e.preventDefault();
    zoom = 1;
    document.body.style.transform = `scale(${zoom})`;
    document.body.style.transformOrigin = 'center top';
  } else if (e.key >= '0' && e.key <= '7') {
    // Navegación directa a slides con teclas numéricas
    e.preventDefault();
    const slideNumber = parseInt(e.key);
    if (slideNumber < totalSlides) {
      goToSlide(slideNumber);
    }
  }
});

// ========== PARTÍCULAS ANIMADAS ==========
function initializeParticles() {
  const particlesContainer = document.getElementById('particles');
  if (!particlesContainer) return;
  
  for (let i = 0; i < 20; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = Math.random() * 100 + '%';
    particle.style.animationDelay = Math.random() * 8 + 's';
    particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
    particlesContainer.appendChild(particle);
  }
}

// ========== CALCULADORA MATRICIAL ==========
function calculateMatrixOperation(operation) {
  const a11 = parseFloat(document.getElementById('a11').value) || 0;
  const a12 = parseFloat(document.getElementById('a12').value) || 0;
  const a21 = parseFloat(document.getElementById('a21').value) || 0;
  const a22 = parseFloat(document.getElementById('a22').value) || 0;
  
  const b11 = parseFloat(document.getElementById('b11').value) || 0;
  const b12 = parseFloat(document.getElementById('b12').value) || 0;
  const b21 = parseFloat(document.getElementById('b21').value) || 0;
  const b22 = parseFloat(document.getElementById('b22').value) || 0;
  
  const resultDiv = document.getElementById('calculatorResult');
  
  let result = '';
  
  if (operation === 'add') {
    const r11 = a11 + b11;
    const r12 = a12 + b12;
    const r21 = a21 + b21;
    const r22 = a22 + b22;
    result = `$$A + B = \\begin{pmatrix}${r11} & ${r12} \\\\ ${r21} & ${r22}\\end{pmatrix}$$`;
  } else if (operation === 'multiply') {
    const r11 = a11 * b11 + a12 * b21;
    const r12 = a11 * b12 + a12 * b22;
    const r21 = a21 * b11 + a22 * b21;
    const r22 = a21 * b12 + a22 * b22;
    result = `$$A \\times B = \\begin{pmatrix}${r11} & ${r12} \\\\ ${r21} & ${r22}\\end{pmatrix}$$`;
  } else if (operation === 'determinant') {
    const det = a11 * a22 - a12 * a21;
    result = `$$\\det(A) = ${a11} \\cdot ${a22} - ${a12} \\cdot ${a21} = ${det}$$`;
  }
  
  resultDiv.innerHTML = result;
  
  // Renderizar MathJax solo si está listo
  if (window.mathJaxReady && typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
    MathJax.typesetPromise([resultDiv]).catch((err) => console.log('MathJax error:', err));
  }
}

function updateCalculator() {
  // Actualización automática se puede implementar aquí si se desea
}

// ========== QUIZ INTERACTIVO ==========
function checkAnswer(element, type) {
  // Remover clases previas de todas las opciones del mismo quiz
  const options = element.parentElement.querySelectorAll('.quiz-option');
  options.forEach(opt => {
    opt.classList.remove('correct', 'incorrect');
    opt.style.pointerEvents = 'auto';
  });
  
  // Agregar clase según respuesta
  if (type === 'correct') {
    element.classList.add('correct');
    // Desactivar todas las opciones después de responder correctamente
    options.forEach(opt => {
      opt.style.pointerEvents = 'none';
    });
    setTimeout(() => {
      alert('✅ ¡Correcto! Excelente.\n\n💡 Has demostrado comprensión del tema.');
    }, 100);
  } else {
    element.classList.add('incorrect');
    setTimeout(() => {
      alert('❌ Incorrecto. \n\n📚 Te recomendamos revisar el contenido de esta semana.\n\n💪 ¡Inténtalo de nuevo!');
      // Remover la marca incorrecta para permitir otro intento
      setTimeout(() => {
        element.classList.remove('incorrect');
      }, 500);
    }, 100);
  }
}

// ========== BOTONES INFO ==========
function toggleInfo(infoId) {
  const infoBox = document.getElementById(infoId);
  if (infoBox) {
    infoBox.classList.toggle('active');
  }
}

// ========== THREE.JS - VISUALIZACIÓN 3D ==========
function initializeThreeJS() {
  const canvas = document.getElementById('threejs-canvas');
  if (!canvas) return;
  
  // Configurar escena
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0x1a1f2e);
  
  // Configurar cámara
  camera = new THREE.PerspectiveCamera(75, canvas.parentElement.clientWidth / 400, 0.1, 1000);
  camera.position.set(5, 5, 5);
  camera.lookAt(0, 0, 0);
  
  // Configurar renderer
  renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
  renderer.setSize(canvas.parentElement.clientWidth, 400);
  
  // Agregar luces
  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);
  
  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
  directionalLight.position.set(10, 10, 10);
  scene.add(directionalLight);
  
  // Crear cubo con geometría
  const geometry = new THREE.BoxGeometry(2, 2, 2);
  const material = new THREE.MeshPhongMaterial({ 
    color: 0x6496fa,
    transparent: true,
    opacity: 0.8
  });
  cube = new THREE.Mesh(geometry, material);
  scene.add(cube);
  
  // Agregar wireframe
  const wireframe = new THREE.WireframeGeometry(geometry);
  const line = new THREE.LineSegments(wireframe);
  line.material.color.setHex(0x00d4aa);
  line.material.linewidth = 2;
  cube.add(line);
  
  // Agregar ejes
  axes = new THREE.AxesHelper(4);
  scene.add(axes);
  
  // Agregar grid
  grid = new THREE.GridHelper(10, 10, 0x6496fa, 0x2a3142);
  scene.add(grid);
  
  // Iniciar animación
  animate3D();
}

function animate3D() {
  animationId = requestAnimationFrame(animate3D);
  
  if (cube && !isAnimating) {
    cube.rotation.x += 0.005;
    cube.rotation.y += 0.005;
  }
  
  if (renderer && scene && camera) {
    renderer.render(scene, camera);
  }
}

function animateTransformation(type) {
  if (!cube) return;
  
  isAnimating = true;
  let progress = 0;
  const duration = 2000; // 2 segundos
  const startTime = Date.now();
  
  const originalScale = { x: 1, y: 1, z: 1 };
  const originalRotation = { x: cube.rotation.x, y: cube.rotation.y, z: cube.rotation.z };
  
  function animateStep() {
    const currentTime = Date.now();
    progress = Math.min((currentTime - startTime) / duration, 1);
    
    if (type === 'rotation') {
      cube.rotation.y = originalRotation.y + progress * Math.PI * 2;
    } else if (type === 'scaling') {
      const scale = 1 + Math.sin(progress * Math.PI) * 0.5;
      cube.scale.set(scale, scale, scale);
    } else if (type === 'shear') {
      cube.rotation.x = originalRotation.x + Math.sin(progress * Math.PI * 2) * 0.5;
    }
    
    if (progress < 1) {
      requestAnimationFrame(animateStep);
    } else {
      isAnimating = false;
    }
  }
  
  animateStep();
}

function resetTransformation() {
  if (!cube) return;
  cube.rotation.set(0, 0, 0);
  cube.scale.set(1, 1, 1);
  cube.position.set(0, 0, 0);
}

// Redimensionar canvas cuando cambia el tamaño de la ventana
window.addEventListener('resize', () => {
  const canvas = document.getElementById('threejs-canvas');
  if (canvas && renderer && camera) {
    const width = canvas.parentElement.clientWidth;
    const height = 400;
    renderer.setSize(width, height);
    camera.aspect = width / height;
    camera.updateProjectionMatrix();
  }
});
</script>

</body>
</html>