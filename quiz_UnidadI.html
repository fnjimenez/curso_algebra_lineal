<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Universidad del SABES">
  <meta name="copyright" content="¬© 2025 Universidad del SABES. Material educativo interactivo.">
  <meta name="description" content="Quiz interactivo del curso √Ålgebra Lineal - Unidad I: Matrices y Determinantes. Plan de Estudios de Licenciatura 2025, Universidad del SABES. Uso educativo.">
  <meta name="robots" content="noindex, nofollow">
  <meta name="keywords" content="√°lgebra lineal, matrices, determinantes, quiz, educaci√≥n, SABES">
  <title>üéØ Quiz √Ålgebra Lineal - Matrices y Determinantes</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=JetBrains+Mono:wght@400;700&display=swap');
    
    :root {
      --bg: #1a1f2e;
      --panel: #2a3142ee;
      --ink: #ffffff;
      --muted: #94a3b8;
      --primary: #6496fa;
      --secondary: #00d4aa;
      --accent: #ffd60a;
      --success: #06d6a0;
      --danger: #ef476f;
      --grad-primary: linear-gradient(135deg, #6496fa 0%, #00d4aa 100%);
    }
    
    [data-theme="light"] {
      --bg: #f8fafc;
      --panel: #ffffff;
      --ink: #1e293b;
      --muted: #64748b;
      --primary: #3b82f6;
      --secondary: #10b981;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    *:focus-visible {
      outline: 3px solid var(--primary);
      outline-offset: 2px;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      color: var(--ink);
      background: var(--bg);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }
    
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image: 
        linear-gradient(90deg, rgba(100, 150, 250, 0.05) 1px, transparent 1px),
        linear-gradient(rgba(0, 212, 170, 0.05) 1px, transparent 1px);
      background-size: 50px 50px;
      animation: matrixFlow 20s linear infinite;
      z-index: 0;
    }
    
    @keyframes matrixFlow {
      from { transform: translate(0, 0); }
      to { transform: translate(50px, 50px); }
    }
    
    .quiz-container {
      position: relative;
      z-index: 2;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    .start-screen {
      text-align: center;
      background: linear-gradient(145deg, var(--panel), var(--bg));
      border: 2px solid var(--primary);
      border-radius: 30px;
      padding: 60px 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      animation: slideUp 0.8s ease;
    }
    
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(50px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .quiz-logo {
      font-size: clamp(3rem, 8vw, 5rem);
      margin-bottom: 20px;
      animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .quiz-title {
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 900;
      background: var(--grad-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 15px;
    }
    
    .quiz-subtitle {
      font-size: 1.5rem;
      color: var(--muted);
      margin-bottom: 30px;
      font-weight: 600;
    }
    
    .week-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
    
    .week-card {
      background: linear-gradient(145deg, rgba(100, 150, 250, 0.1), rgba(0, 212, 170, 0.1));
      border: 2px solid transparent;
      border-radius: 20px;
      padding: 30px 20px;
      cursor: pointer;
      transition: all 0.4s ease;
    }
    
    .week-card:hover {
      transform: translateY(-10px) scale(1.05);
      border-color: var(--primary);
      box-shadow: 0 20px 40px rgba(100, 150, 250, 0.4);
    }
    
    .week-number {
      font-size: 3rem;
      font-weight: 900;
      color: var(--primary);
    }
    
    .week-name {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--ink);
      margin-top: 10px;
    }
    
    .question-screen {
      display: none;
    }
    
    .question-screen.active {
      display: block;
      animation: questionEnter 0.6s ease;
    }
    
    @keyframes questionEnter {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }
    
    .question-header {
      background: linear-gradient(145deg, var(--panel), var(--bg));
      border: 2px solid var(--primary);
      border-radius: 25px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.3);
    }
    
    .question-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .question-counter {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--primary);
      background: rgba(100, 150, 250, 0.2);
      padding: 10px 20px;
      border-radius: 20px;
      border: 2px solid var(--primary);
    }
    
    .timer {
      font-family: 'JetBrains Mono', monospace;
      font-size: 2rem;
      font-weight: 900;
      color: var(--accent);
      background: rgba(255, 214, 10, 0.2);
      padding: 15px 30px;
      border-radius: 25px;
      border: 3px solid var(--accent);
      min-width: 120px;
      text-align: center;
    }
    
    .timer.warning {
      color: var(--danger);
      border-color: var(--danger);
      background: rgba(239, 71, 111, 0.2);
      animation: timerWarning 0.5s ease-in-out infinite;
    }
    
    @keyframes timerWarning {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .score-display {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--success);
      background: rgba(6, 214, 160, 0.2);
      padding: 10px 20px;
      border-radius: 20px;
      border: 2px solid var(--success);
    }
    
    .progress-bar {
      width: 100%;
      height: 15px;
      background: rgba(0,0,0,0.3);
      border-radius: 999px;
      overflow: hidden;
      margin-bottom: 20px;
      border: 2px solid rgba(100, 150, 250, 0.3);
    }
    
    .progress-fill {
      height: 100%;
      background: var(--grad-primary);
      width: 0%;
      transition: width 0.5s ease;
    }
    
    .question-card {
      background: linear-gradient(145deg, var(--panel), var(--bg));
      border: 3px solid var(--secondary);
      border-radius: 25px;
      padding: 40px;
      margin-bottom: 30px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    }
    
    .question-text {
      font-size: clamp(1.5rem, 3vw, 2.2rem);
      font-weight: 700;
      color: var(--ink);
      text-align: center;
      line-height: 1.4;
      margin-bottom: 20px;
    }
    
    .question-tip {
      background: rgba(255, 214, 10, 0.1);
      border-left: 4px solid var(--accent);
      border-radius: 12px;
      padding: 15px 20px;
      margin-top: 20px;
      font-size: 1rem;
      color: var(--muted);
    }
    
    .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .option {
      background: linear-gradient(145deg, var(--panel), var(--bg));
      border: 3px solid transparent;
      border-radius: 20px;
      padding: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      min-height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 1.2rem;
      font-weight: 600;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      user-select: none;
    }
    
    .option:nth-child(1) { border-color: #ff6b6b; }
    .option:nth-child(2) { border-color: #4ecdc4; }
    .option:nth-child(3) { border-color: #ffd93d; }
    .option:nth-child(4) { border-color: #95e1d3; }
    
    .option:hover {
      transform: translateY(-10px) scale(1.05);
      box-shadow: 0 20px 50px rgba(100, 150, 250, 0.5);
    }
    
    .option.correct {
      border-color: var(--success);
      background: linear-gradient(145deg, rgba(6, 214, 160, 0.3), rgba(6, 214, 160, 0.1));
      animation: correctBurst 0.8s ease;
    }
    
    @keyframes correctBurst {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    .option.incorrect {
      border-color: var(--danger);
      background: linear-gradient(145deg, rgba(239, 71, 111, 0.3), rgba(239, 71, 111, 0.1));
      animation: incorrectShake 0.6s ease;
    }
    
    @keyframes incorrectShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    
    .feedback {
      background: linear-gradient(145deg, var(--panel), var(--bg));
      border: 3px solid transparent;
      border-radius: 25px;
      padding: 30px;
      margin: 30px 0;
      text-align: center;
      display: none;
      box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    }
    
    .feedback.show {
      display: block;
      animation: feedbackPop 0.6s ease;
    }
    
    @keyframes feedbackPop {
      0% { opacity: 0; transform: scale(0.5); }
      100% { opacity: 1; transform: scale(1); }
    }
    
    .feedback.correct {
      border-color: var(--success);
    }
    
    .feedback.incorrect {
      border-color: var(--danger);
    }
    
    .feedback-emoji {
      font-size: 5rem;
      display: block;
      margin-bottom: 20px;
    }
    
    .feedback-title {
      font-size: 2rem;
      font-weight: 900;
      margin-bottom: 15px;
    }
    
    .feedback-text {
      font-size: 1.2rem;
      color: var(--muted);
      line-height: 1.6;
    }
    
    .feedback-points {
      font-family: 'JetBrains Mono', monospace;
      font-size: 3rem;
      font-weight: 900;
      color: var(--accent);
      margin: 20px 0;
    }
    
    .results-screen {
      display: none;
      text-align: center;
    }
    
    .results-screen.active {
      display: block;
      animation: slideUp 0.8s ease;
    }
    
    .results-container {
      background: linear-gradient(145deg, var(--panel), var(--bg));
      border: 3px solid var(--primary);
      border-radius: 30px;
      padding: 50px 40px;
      box-shadow: 0 25px 60px rgba(0,0,0,0.4);
    }
    
    .trophy {
      font-size: 8rem;
      display: block;
      margin: 0 auto 30px;
    }
    
    .final-score {
      font-family: 'JetBrains Mono', monospace;
      font-size: clamp(4rem, 10vw, 7rem);
      font-weight: 900;
      background: var(--grad-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin: 30px 0;
    }
    
    .results-message {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--ink);
      margin: 20px 0;
    }
    
    .results-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 40px 0;
    }
    
    .stat-card {
      background: linear-gradient(145deg, rgba(100, 150, 250, 0.1), rgba(0, 212, 170, 0.1));
      border: 2px solid var(--primary);
      border-radius: 20px;
      padding: 25px;
    }
    
    .stat-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 3rem;
      font-weight: 900;
      color: var(--primary);
    }
    
    .stat-label {
      font-size: 1rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-top: 10px;
    }
    
    .btn {
      background: var(--grad-primary);
      color: white;
      border: none;
      padding: 18px 40px;
      border-radius: 30px;
      font-size: 1.2rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      box-shadow: 0 15px 40px rgba(100, 150, 250, 0.4);
    }
    
    .btn:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 20px 50px rgba(100, 150, 250, 0.6);
    }
    
    .btn-secondary {
      background: linear-gradient(145deg, #6c7b95, #5a6b85);
    }
    
    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 40px;
      flex-wrap: wrap;
    }
    
    .confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9999;
    }
    
    .confetti-piece {
      position: absolute;
      width: 10px;
      height: 10px;
      background: var(--primary);
      top: -10px;
      animation: confettiFall 3s linear forwards;
    }
    
    @keyframes confettiFall {
      to {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
    
    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--panel);
      border: 2px solid var(--primary);
      border-radius: 50px;
      padding: 12px 20px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      color: var(--ink);
      z-index: 100;
      transition: all 0.3s ease;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    
    .theme-toggle:hover {
      background: var(--primary);
      color: white;
      transform: scale(1.1);
    }
    
    .accessibility-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--panel);
      border: 2px solid var(--secondary);
      border-radius: 50%;
      width: 60px;
      height: 60px;
      cursor: pointer;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      transition: all 0.3s ease;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    
    .accessibility-btn:hover {
      background: var(--secondary);
      transform: scale(1.1);
    }
    
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.9);
      z-index: 10000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .modal.show {
      display: flex;
    }
    
    .modal-content {
      background: var(--panel);
      border: 3px solid var(--primary);
      border-radius: 25px;
      padding: 40px;
      max-width: 800px;
      max-height: 80vh;
      overflow-y: auto;
      color: var(--ink);
      box-shadow: 0 25px 60px rgba(0,0,0,0.5);
    }
    
    .modal-content h2 {
      color: var(--primary);
      margin-bottom: 20px;
      font-size: 2rem;
    }
    
    .modal-content h3 {
      color: var(--secondary);
      margin: 25px 0 15px 0;
      font-size: 1.5rem;
    }
    
    .modal-content p {
      line-height: 1.8;
      margin-bottom: 15px;
      color: var(--muted);
    }
    
    .modal-content ul {
      margin-left: 20px;
      margin-bottom: 15px;
      color: var(--muted);
    }
    
    .modal-content li {
      margin-bottom: 10px;
      line-height: 1.6;
    }
    
    .modal-close {
      background: var(--grad-primary);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 25px;
      cursor: pointer;
      margin-top: 25px;
      font-size: 1.1rem;
      font-weight: 700;
      width: 100%;
    }
    
    .wcag-badge {
      display: inline-block;
      background: var(--success);
      color: white;
      padding: 5px 12px;
      border-radius: 15px;
      font-size: 0.9rem;
      font-weight: 700;
      margin-left: 10px;
    }
    
    .hidden {
      display: none !important;
    }
    
    /* Footer institucional */
    .footer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(26, 31, 46, 0.95);
      backdrop-filter: blur(10px);
      padding: 12px 20px;
      text-align: center;
      border-top: 1px solid rgba(100, 150, 250, 0.2);
      z-index: 50;
      font-size: 0.85rem;
      color: var(--muted);
      line-height: 1.4;
    }
    
    [data-theme="light"] .footer {
      background: rgba(248, 250, 252, 0.95);
      border-top: 1px solid rgba(59, 130, 246, 0.2);
    }
    
    .footer a {
      color: var(--secondary);
      text-decoration: none;
      transition: color 0.3s ease;
    }
    
    .footer a:hover {
      color: var(--primary);
      text-decoration: underline;
    }
    
    .credits-slide {
      background: linear-gradient(145deg, var(--panel), var(--bg));
      border: 2px solid var(--primary);
      border-radius: 30px;
      padding: 50px 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 900px;
      margin: 0 auto;
      text-align: center;
    }
    
    .credits-slide h2 {
      font-size: 2.5rem;
      color: var(--primary);
      margin-bottom: 30px;
      font-weight: 900;
    }
    
    .credits-slide p {
      font-size: 1.1rem;
      line-height: 1.8;
      color: var(--muted);
      margin-bottom: 20px;
    }
    
    .credits-slide .highlight {
      color: var(--accent);
      font-weight: 700;
    }
    
    .cc-license {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin: 30px 0;
      padding: 20px;
      background: rgba(100, 150, 250, 0.1);
      border-radius: 15px;
      border: 2px solid rgba(100, 150, 250, 0.3);
    }
    
    .cc-license img {
      max-width: 88px;
      height: auto;
    }
    
    @media (max-width: 768px) {
      .quiz-container { padding: 10px; padding-bottom: 80px; }
      .start-screen, .question-card, .results-container { padding: 30px 20px; }
      .options-grid { grid-template-columns: 1fr; }
      .week-selector { grid-template-columns: 1fr; }
      .action-buttons { flex-direction: column; }
      .btn { width: 100%; }
      .accessibility-btn { bottom: 140px; }
      .footer { font-size: 0.75rem; padding: 10px 15px; }
      .cc-license { flex-direction: column; }
    }
    
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
      }
    }
  </style>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()">üåì Tema</button>
  
  <button class="accessibility-btn" onclick="openModal()">‚ôø</button>
  
  <div class="confetti" id="confetti"></div>
  
  <main class="quiz-container">
    <div class="start-screen" id="startScreen">
      <div class="quiz-logo">üéØ</div>
      <h1 class="quiz-title">QUIZ √ÅLGEBRA LINEAL</h1>
      <p class="quiz-subtitle">Matrices y Determinantes - Unidad I</p>
      
      <div style="margin: 30px 0;">
        <p style="color: var(--muted); font-size: 1.2rem; margin-bottom: 25px;">
          ¬°Pon a prueba tus conocimientos de √°lgebra lineal! üßÆ
        </p>
        <p style="color: var(--muted); font-size: 1rem;">
          Selecciona la semana para comenzar tu desaf√≠o matem√°tico
        </p>
      </div>
      
      <div class="week-selector">
        <button class="week-card" onclick="startWeek(1)">
          <div class="week-number">üìê 01</div>
          <div class="week-name">Introducci√≥n a Matrices</div>
        </button>
        <button class="week-card" onclick="startWeek(2)">
          <div class="week-number">‚ûï 02</div>
          <div class="week-name">Operaciones Matriciales</div>
        </button>
        <button class="week-card" onclick="startWeek(3)">
          <div class="week-number">üîÑ 03</div>
          <div class="week-name">Transformaciones</div>
        </button>
        <button class="week-card" onclick="startWeek(4)">
          <div class="week-number">üé≤ 04</div>
          <div class="week-name">Determinantes</div>
        </button>
      </div>
      
      <div style="margin-top: 30px; padding: 20px; background: rgba(100, 150, 250, 0.1); border-radius: 20px; border: 2px solid rgba(100, 150, 250, 0.3);">
        <p style="font-size: 0.95rem; color: var(--muted);">
          ‚è±Ô∏è 30 segundos por pregunta ‚Ä¢ üéØ 4 preguntas por semana ‚Ä¢ üíØ 100 puntos por respuesta correcta
        </p>
      </div>
    </div>
    
    <div class="question-screen" id="questionScreen">
      <div class="question-header">
        <div class="question-info">
          <div class="question-counter" id="questionCounter">Pregunta 1/4</div>
          <div class="timer" id="timer">30</div>
          <div class="score-display" id="scoreDisplay">üíé 0 pts</div>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>
      
      <div class="question-card">
        <div class="question-text" id="questionText"></div>
        <div class="question-tip" id="questionTip"></div>
      </div>
      
      <div class="options-grid" id="optionsGrid"></div>
      
      <div class="feedback" id="feedback">
        <span class="feedback-emoji" id="feedbackEmoji"></span>
        <div class="feedback-title" id="feedbackTitle"></div>
        <div class="feedback-text" id="feedbackText"></div>
        <div class="feedback-points" id="feedbackPoints"></div>
      </div>
      
      <div class="action-buttons">
        <button class="btn" id="nextBtn" onclick="nextQuestion()" style="display: none;">
          Siguiente Pregunta ‚ñ∂
        </button>
      </div>
    </div>
    
    <div class="results-screen" id="resultsScreen">
      <div class="results-container">
        <span class="trophy" id="trophyEmoji">üèÜ</span>
        <h2 style="font-size: 2rem; color: var(--primary); margin-bottom: 10px;">
          ¬°Quiz Completado!
        </h2>
        <div class="final-score" id="finalScore">0 pts</div>
        <div class="results-message" id="resultsMessage"></div>
        
        <div class="results-stats">
          <div class="stat-card">
            <div class="stat-value" id="correctCount">0</div>
            <div class="stat-label">‚úÖ Correctas</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="accuracyPercent">0%</div>
            <div class="stat-label">üéØ Precisi√≥n</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="timeAverage">0s</div>
            <div class="stat-label">‚è±Ô∏è Tiempo Promedio</div>
          </div>
        </div>
        
        <div style="margin: 30px 0; padding: 25px; background: rgba(100, 150, 250, 0.1); border-radius: 20px; border: 2px solid rgba(100, 150, 250, 0.3);">
          <div id="personalFeedback"></div>
        </div>
        
        <div class="action-buttons">
          <button class="btn" onclick="restartQuiz()">üîÑ Otra Semana</button>
          <button class="btn btn-secondary" onclick="reviewAnswers()">üìä Revisar</button>
          <button class="btn btn-secondary" onclick="shareResults()">üì§ Compartir</button>
          <button class="btn btn-secondary" onclick="showCredits()">üìò Cr√©ditos</button>
        </div>
      </div>
    </div>
    
    <!-- Pantalla de Cr√©ditos -->
    <div class="results-screen" id="creditsScreen">
      <div class="credits-slide">
        <h2>üìò Cr√©ditos y Derechos de Uso</h2>
        
        <p>
          Este material interactivo fue desarrollado como <strong>recurso did√°ctico</strong> dentro del curso 
          <span class="highlight">√Ålgebra Lineal - Unidad I: Matrices y Determinantes</span> 
          correspondiente al <strong>Plan de Estudios de Licenciatura en Ingenier√≠a 2025</strong> 
          de la <strong>Universidad del SABES</strong>.
        </p>
        
        <p>
          Su objetivo es <strong>fortalecer el aprendizaje aut√≥nomo</strong> mediante la aplicaci√≥n de herramientas digitales 
          interactivas, gamificaci√≥n educativa y evaluaci√≥n formativa continua.
        </p>
        
        <div style="margin: 30px 0; padding: 25px; background: rgba(255, 214, 10, 0.1); border-radius: 20px; border: 2px solid rgba(255, 214, 10, 0.3);">
          <p style="color: var(--accent); font-size: 1.2rem; font-weight: 700; margin-bottom: 15px;">
            ¬© 2025 Universidad del SABES
          </p>
          <p style="font-size: 1rem;">
            <strong>Todos los derechos reservados.</strong><br>
            Uso exclusivo para fines acad√©micos y de formaci√≥n profesional.<br>
            Prohibida su reproducci√≥n o distribuci√≥n con fines de lucro sin autorizaci√≥n expresa.
          </p>
        </div>
        
        <div class="cc-license">
          <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.es" target="_blank">
            <img alt="Licencia Creative Commons" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png">
          </a>
          <p style="font-size: 0.95rem; text-align: left; margin: 0;">
            Este material est√° protegido bajo una<br>
            <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.es" target="_blank" style="color: var(--secondary); font-weight: 600;">
              Licencia Creative Commons Atribuci√≥n-NoComercial-SinDerivadas 4.0 Internacional
            </a>
          </p>
        </div>
        
        <p style="font-size: 1rem; margin-top: 25px;">
          <strong>Desarrollado por:</strong> Equipo Docente de Ingenier√≠a - Universidad del SABES<br>
          <strong>A√±o acad√©mico:</strong> 2025<br>
          <strong>Contacto institucional:</strong> 
          <a href="https://www.sabes.edu.mx" target="_blank" style="color: var(--secondary); font-weight: 600;">
            www.sabes.edu.mx
          </a>
        </p>
        
        <div class="action-buttons" style="margin-top: 40px;">
          <button class="btn" onclick="closeCredits()">‚¨ÖÔ∏è Volver al Inicio</button>
        </div>
      </div>
    </div>
  </main>
  
  <!-- Footer institucional -->
  <div class="footer">
    <p>
      ¬© 2025 <strong>Universidad del SABES</strong> ¬∑ Uso educativo exclusivo ¬∑ 
      Curso: <strong>√Ålgebra Lineal</strong> (Licenciatura en Ingenier√≠a 2025) ¬∑ 
      <a href="https://www.sabes.edu.mx" target="_blank">www.sabes.edu.mx</a>
    </p>
  </div>
  
  <div class="modal" id="privacyModal">
    <div class="modal-content">
      <h2>üîí Privacidad y Accesibilidad</h2>
      
      <h3>üìã Pol√≠tica de Privacidad</h3>
      <p>Este quiz de √Ålgebra Lineal est√° dise√±ado con tu privacidad en mente:</p>
      <ul>
        <li><strong>Sin recopilaci√≥n de datos personales:</strong> No solicitamos ni almacenamos informaci√≥n personal identificable.</li>
        <li><strong>Almacenamiento local:</strong> √önicamente guardamos tu tema preferido (claro/oscuro) en el almacenamiento local de tu navegador.</li>
        <li><strong>Sin cookies de terceros:</strong> No utilizamos cookies de seguimiento ni anal√≠ticas de terceros.</li>
        <li><strong>Sin conexi√≥n a servidores externos:</strong> Toda la funcionalidad del quiz opera completamente en tu navegador.</li>
      </ul>
      
      <h3>‚ôø Declaraci√≥n de Accesibilidad <span class="wcag-badge">WCAG 2.2 AA</span></h3>
      <p>Nos comprometemos a hacer este quiz accesible para todos los usuarios.</p>
      
      <p><strong>Caracter√≠sticas de Accesibilidad:</strong></p>
      <ul>
        <li><strong>Navegaci√≥n por teclado:</strong> N√∫meros 1-4 para opciones, Enter para avanzar.</li>
        <li><strong>Lectores de pantalla:</strong> Compatibilidad completa con NVDA, JAWS y VoiceOver.</li>
        <li><strong>Contraste de color:</strong> Cumple con WCAG 2.2 nivel AA (m√≠nimo 4.5:1).</li>
        <li><strong>Texto redimensionable:</strong> Legible con zoom hasta 200%.</li>
        <li><strong>Animaciones reducidas:</strong> Respeta la preferencia del sistema.</li>
      </ul>
      
      <p style="font-size: 0.9rem; color: var(--muted); margin-top: 20px;">
        <strong>√öltima actualizaci√≥n:</strong> Octubre 2025<br>
        <strong>Est√°ndares cumplidos:</strong> WCAG 2.2 Nivel AA, HTML5, ARIA 1.2
      </p>
      
      <button class="modal-close" onclick="closeModal()">Cerrar</button>
    </div>
  </div>

  <script>
    const questionBank = {
      week1: [
        {
          question: "Una matriz de orden 3√ó5 tiene:",
          options: ["3 filas y 5 columnas üìä", "5 filas y 3 columnas üìà", "8 elementos totales üî¢", "15 posiciones en diagonal ‚ÜóÔ∏è"],
          correct: 0,
          tip: "üí° El orden se escribe como filas √ó columnas. ¬øCu√°l n√∫mero va primero?",
          explanation: "¬°Exacto! En el orden m√ón, 'm' representa las filas y 'n' las columnas.",
          funnyWrong: ["¬°Invertiste el orden! üîÑ", "No se trata de sumar... ü§î", "Las diagonales son otra historia üìê"]
        },
        {
          question: "¬øCu√°l de estas matrices es una matriz identidad?",
          options: ["[[1,0],[0,1]] üéØ", "[[0,0],[0,0]] ‚ö´", "[[1,1],[1,1]] 1Ô∏è‚É£", "[[2,0],[0,2]] 2Ô∏è‚É£"],
          correct: 0,
          tip: "üí° La matriz identidad tiene unos en la diagonal principal y ceros en el resto",
          explanation: "¬°Perfecto! La matriz identidad I tiene 1s en la diagonal y 0s fuera de ella.",
          funnyWrong: ["Esa es la matriz nula üï≥Ô∏è", "Demasiados unos üôÉ", "Casi, pero no es 'I', es '2I' üî¢"]
        },
        {
          question: "Si A es una matriz cuadrada 4√ó4, ¬øcu√°ntos elementos tiene?",
          options: ["16 elementos üé≤", "8 elementos üéØ", "4 elementos üìç", "12 elementos üì¶"],
          correct: 0,
          tip: "üí° Multiplica filas √ó columnas para obtener el total de elementos",
          explanation: "¬°Correcto! 4√ó4 = 16. Cada posici√≥n cuenta como un elemento.",
          funnyWrong: ["Solo contaste una dimensi√≥n üìè", "Eso ser√≠a para 2√ó2 ü§ì", "Te acercaste üî¢"]
        },
        {
          question: "Una matriz diagonal es aquella que:",
          options: ["Tiene ceros fuera de la diagonal principal ‚ÜòÔ∏è", "Tiene todos sus elementos iguales üü∞", "Solo tiene elementos positivos ‚ûï", "Es siempre 2√ó2 üî≤"],
          correct: 0,
          tip: "üí° Piensa en d√≥nde se ubican los valores no nulos",
          explanation: "¬°Excelente! Una matriz diagonal tiene elementos solo en la diagonal principal.",
          funnyWrong: ["Eso ser√≠a matriz escalar üéöÔ∏è", "Los signos no importan ‚ûñ‚ûï", "Puede ser de cualquier orden üìê"]
        }
      ],
      
      week2: [
        {
          question: "Para sumar dos matrices A y B, ¬øqu√© condici√≥n deben cumplir?",
          options: ["Tener el mismo orden üìè", "Ser cuadradas üü¶", "Tener determinante ‚â† 0 üé≤", "Ser sim√©tricas üîÑ"],
          correct: 0,
          tip: "üí° Solo puedes sumar elementos en la misma posici√≥n",
          explanation: "¬°Exacto! Solo se pueden sumar matrices con el mismo n√∫mero de filas y columnas.",
          funnyWrong: ["No necesitan ser cuadradas üìê", "El determinante no importa üéØ", "La simetr√≠a no es requisito ‚ûï"]
        },
        {
          question: "Si multiplicamos 2√ó3 por 3√ó4, el resultado ser√°:",
          options: ["Una matriz 2√ó4 üìä", "Una matriz 3√ó3 ‚¨õ", "Una matriz 2√ó3 üìà", "No se puede ‚ùå"],
          correct: 0,
          tip: "üí° En multiplicaci√≥n: (m√ón) √ó (n√óp) = (m√óp)",
          explanation: "¬°Perfecto! El resultado toma las filas de la primera y columnas de la segunda.",
          funnyWrong: ["Esa ser√≠a otra combinaci√≥n üî¢", "No se promedian üìè", "¬°S√≠ se puede! ‚úÖ"]
        },
        {
          question: "La multiplicaci√≥n de matrices es:",
          options: ["Asociativa pero NO conmutativa üîÄ", "Conmutativa pero NO asociativa üîÑ", "Conmutativa Y asociativa ‚úÖ", "Ni conmutativa ni asociativa ‚ùå"],
          correct: 0,
          tip: "üí° ¬øA√óB siempre es igual a B√óA?",
          explanation: "¬°Correcto! Puedes reagrupar, pero A√óB ‚â† B√óA en general.",
          funnyWrong: ["El orden S√ç importa üî¢", "S√≠ puedes reagrupar üéØ", "Una propiedad s√≠ cumple üìê"]
        },
        {
          question: "Si k=3 y A=[[1,2],[3,4]], entonces 3A es:",
          options: ["[[3,6],[9,12]] ‚úñÔ∏è3Ô∏è‚É£", "[[4,5],[6,7]] ‚ûï3Ô∏è‚É£", "[[3,3],[3,3]] üî¢", "[[1,2,3],[3,4,3]] ‚ûï"],
          correct: 0,
          tip: "üí° Multiplicar por escalar = multiplicar CADA elemento",
          explanation: "¬°Excelente! Cada elemento se multiplica por 3.",
          funnyWrong: ["No es suma üéöÔ∏è", "No llenas con el escalar üö´", "No agregas columnas üìä"]
        }
      ],
      
      week3: [
        {
          question: "¬øCu√°l operaci√≥n NO cambia el determinante?",
          options: ["Sumar a una fila un m√∫ltiplo de otra ‚ûï", "Intercambiar dos filas üîÑ", "Multiplicar fila por escalar ‚úñÔ∏è", "Todas lo cambian üé≤"],
          correct: 0,
          tip: "üí° ¬øCu√°l solo 'reorganiza' sin alterar el valor?",
          explanation: "¬°Exacto! Sumar un m√∫ltiplo preserva el determinante.",
          funnyWrong: ["Intercambiar cambia el signo üîÄ", "Multiplicar multiplica el det üìä", "Una lo preserva ‚úÖ"]
        },
        {
          question: "Una matriz A es invertible si y solo si:",
          options: ["det(A) ‚â† 0 üéØ", "Es diagonal üìê", "Es sim√©trica üîÑ", "Tiene elementos positivos ‚ûï"],
          correct: 0,
          tip: "üí° ¬øQu√© condici√≥n da soluci√≥n √∫nica?",
          explanation: "¬°Perfecto! Solo matrices con determinante no nulo tienen inversa.",
          funnyWrong: ["Diagonales pueden tener ceros 0Ô∏è‚É£", "Simetr√≠a no garantiza üîÑ", "Los signos no afectan ‚ûñ‚ûï"]
        },
        {
          question: "Gauss-Jordan para A‚Åª¬π consiste en:",
          options: ["Reducir [A|I] a [I|A‚Åª¬π] üîÑ", "Calcular det(A) y dividir üé≤", "Transponer y cambiar signos ‚ÜîÔ∏è", "Multiplicar A por s√≠ misma ‚úñÔ∏è"],
          correct: 0,
          tip: "üí° Transforma A en identidad con operaciones elementales",
          explanation: "¬°Correcto! Formamos [A|I] y reducimos a [I|A‚Åª¬π]",
          funnyWrong: ["Eso da un escalar üìâ", "Transpuesta ‚â† inversa üìä", "A√óA da A¬≤, no A‚Åª¬π üî¢"]
        },
        {
          question: "Si una matriz escalonada tiene fila de ceros:",
          options: ["Infinitas soluciones o ninguna üîÑ", "Soluci√≥n √∫nica ‚úÖ", "Es invertible üéØ", "Determinante es 1 1Ô∏è‚É£"],
          correct: 0,
          tip: "üí° Fila de ceros indica menos ecuaciones independientes",
          explanation: "¬°Exacto! Filas de ceros indican dependencia lineal.",
          funnyWrong: ["Filas cero impiden soluci√≥n √∫nica üö´", "Filas cero ‚Üí det=0 ‚ùå", "El det ser√≠a 0 0Ô∏è‚É£"]
        }
      ],
      
      week4: [
        {
          question: "El determinante de [[2,1],[4,2]] es:",
          options: ["0 (matriz singular) üö´", "8 üìä", "-2 ‚ûñ", "4 üî¢"],
          correct: 0,
          tip: "üí° Para 2√ó2: det = ad - bc",
          explanation: "¬°Exacto! 2√ó2 - 1√ó4 = 0. NO es invertible.",
          funnyWrong: ["Solo multiplicaste üéØ", "El signo importa ‚ûñ", "Revisa ad-bc üìê"]
        },
        {
          question: "Si det(A) = 3 y det(B) = 2, entonces det(AB) es:",
          options: ["6 ‚úñÔ∏è", "5 ‚ûï", "1.5 ‚ûó", "8 üé≤"],
          correct: 0,
          tip: "üí° Recuerda: det(AB) = det(A) √ó det(B)",
          explanation: "¬°Perfecto! Los determinantes se multiplican: 3 √ó 2 = 6",
          funnyWrong: ["No se suman ‚ûï", "No se dividen üìâ", "No es potenciaci√≥n üî¢"]
        },
        {
          question: "La Regla de Cramer sirve para:",
          options: ["Resolver sistemas lineales üìù", "Calcular inversas üîÑ", "Multiplicar matrices üìä", "Encontrar autovalores üéØ"],
          correct: 0,
          tip: "üí° Usa determinantes para encontrar x‚ÇÅ, x‚ÇÇ, x‚ÇÉ...",
          explanation: "¬°Correcto! Cramer usa cocientes de determinantes para resolver Ax=b.",
          funnyWrong: ["Para inversas: Gauss-Jordan üîÑ", "No optimiza multiplicaci√≥n ‚úñÔ∏è", "Autovalores: otro m√©todo üìê"]
        },
        {
          question: "Determinante de matriz triangular es:",
          options: ["Producto de diagonales ‚ÜòÔ∏è", "Suma de elementos ‚ûï", "Siempre 1 1Ô∏è‚É£", "Siempre 0 0Ô∏è‚É£"],
          correct: 0,
          tip: "üí° En triangulares, solo la diagonal importa",
          explanation: "¬°Excelente! Multiplicas elementos de la diagonal principal.",
          funnyWrong: ["No sumes, multiplica üî¢", "Puede ser cualquier valor üé≤", "Solo 0 si diagonal es 0 üìä"]
        }
      ]
    };
    
    let currentWeek = 1;
    let currentQuestionIndex = 0;
    let score = 0;
    let selectedAnswer = -1;
    let timeLeft = 30;
    let timer = null;
    let userAnswers = [];
    let questionPool = [];
    let questionStartTime = 0;
    let totalTime = 0;
    
    function startWeek(week) {
      currentWeek = week;
      currentQuestionIndex = 0;
      score = 0;
      userAnswers = [];
      totalTime = 0;
      
      const weekKey = 'week' + week;
      const allQuestions = [...questionBank[weekKey]];
      questionPool = shuffleArray(allQuestions).slice(0, 4);
      
      document.getElementById('startScreen').classList.add('hidden');
      document.getElementById('questionScreen').classList.add('active');
      document.getElementById('resultsScreen').classList.remove('active');
      
      loadQuestion();
      startTimer();
    }
    
    function loadQuestion() {
      if (currentQuestionIndex >= questionPool.length) {
        showResults();
        return;
      }
      
      const question = questionPool[currentQuestionIndex];
      questionStartTime = Date.now();
      
      document.getElementById('questionCounter').textContent = 'Pregunta ' + (currentQuestionIndex + 1) + '/' + questionPool.length;
      document.getElementById('questionText').textContent = question.question;
      document.getElementById('questionTip').textContent = question.tip;
      
      const progress = ((currentQuestionIndex + 1) / questionPool.length) * 100;
      document.getElementById('progressFill').style.width = progress + '%';
      
      const optionsGrid = document.getElementById('optionsGrid');
      optionsGrid.innerHTML = '';
      
      question.options.forEach((option, index) => {
        const optionElement = document.createElement('button');
        optionElement.className = 'option';
        optionElement.innerHTML = option;
        optionElement.onclick = function() { selectOption(index); };
        optionsGrid.appendChild(optionElement);
      });
      
      selectedAnswer = -1;
      document.getElementById('feedback').classList.remove('show', 'correct', 'incorrect');
      document.getElementById('nextBtn').style.display = 'none';
      timeLeft = 30;
      document.getElementById('timer').classList.remove('warning');
    }
    
    function selectOption(index) {
      if (selectedAnswer !== -1) return;
      
      selectedAnswer = index;
      const question = questionPool[currentQuestionIndex];
      const options = document.querySelectorAll('.option');
      
      clearInterval(timer);
      const responseTime = Math.round((Date.now() - questionStartTime) / 1000);
      totalTime += responseTime;
      
      options.forEach(opt => opt.onclick = null);
      
      setTimeout(() => {
        const isCorrect = index === question.correct;
        let pointsEarned = 0;
        
        if (isCorrect) {
          pointsEarned = Math.max(50, 100 - (30 - timeLeft) * 2);
          score += pointsEarned;
          options[index].classList.add('correct');
          showFeedback(true, question.explanation, pointsEarned);
          createConfetti();
        } else {
          options[index].classList.add('incorrect');
          options[question.correct].classList.add('correct');
          const funnyMsg = question.funnyWrong[index] || "¬°No exactamente! ü§î";
          showFeedback(false, funnyMsg + " " + question.explanation, 0);
        }
        
        userAnswers.push({
          question: question.question,
          selectedIndex: index,
          correctIndex: question.correct,
          isCorrect: isCorrect,
          points: pointsEarned,
          time: responseTime
        });
        
        document.getElementById('scoreDisplay').textContent = 'üíé ' + score + ' pts';
        document.getElementById('nextBtn').style.display = 'block';
      }, 800);
    }
    
    function showFeedback(isCorrect, message, points) {
      const feedback = document.getElementById('feedback');
      const emojis = isCorrect ? ['üéâ', 'üöÄ', '‚≠ê', 'üî•', 'üíé', 'üèÜ'] : ['üòÖ', 'ü§î', 'üò¨', 'üí≠', 'üéì'];
      const titles = isCorrect ? ['¬°Correcto!', '¬°Excelente!', '¬°Genial!', '¬°Perfecto!'] : ['¬°Ups!', '¬°Casi!', '¬°No exactamente!'];
      
      document.getElementById('feedbackEmoji').textContent = emojis[Math.floor(Math.random() * emojis.length)];
      document.getElementById('feedbackTitle').textContent = titles[Math.floor(Math.random() * titles.length)];
      document.getElementById('feedbackText').textContent = message;
      document.getElementById('feedbackPoints').textContent = (isCorrect ? '+' : '+0 ') + (isCorrect ? points : '') + ' puntos';
      
      feedback.className = 'feedback show ' + (isCorrect ? 'correct' : 'incorrect');
    }
    
    function nextQuestion() {
      currentQuestionIndex++;
      if (currentQuestionIndex >= questionPool.length) {
        showResults();
      } else {
        document.getElementById('feedback').classList.remove('show');
        loadQuestion();
        startTimer();
      }
    }
    
    function startTimer() {
      const timerDisplay = document.getElementById('timer');
      timerDisplay.textContent = timeLeft;
      
      timer = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = timeLeft;
        
        if (timeLeft <= 10) {
          timerDisplay.classList.add('warning');
        }
        
        if (timeLeft <= 0) {
          clearInterval(timer);
          if (selectedAnswer === -1) {
            timeoutQuestion();
          }
        }
      }, 1000);
    }
    
    function timeoutQuestion() {
      const question = questionPool[currentQuestionIndex];
      const options = document.querySelectorAll('.option');
      
      options.forEach(opt => opt.onclick = null);
      options[question.correct].classList.add('correct');
      
      userAnswers.push({
        question: question.question,
        selectedIndex: -1,
        correctIndex: question.correct,
        isCorrect: false,
        points: 0,
        time: 30
      });
      
      totalTime += 30;
      showFeedback(false, "‚è∞ ¬°Se acab√≥ el tiempo! " + question.explanation, 0);
      document.getElementById('nextBtn').style.display = 'block';
    }
    
    function showResults() {
      document.getElementById('questionScreen').classList.remove('active');
      document.getElementById('resultsScreen').classList.add('active');
      
      const correctCount = userAnswers.filter(a => a.isCorrect).length;
      const accuracy = Math.round((correctCount / questionPool.length) * 100);
      const avgTime = Math.round(totalTime / questionPool.length);
      
      document.getElementById('finalScore').textContent = score + ' pts';
      document.getElementById('correctCount').textContent = correctCount;
      document.getElementById('accuracyPercent').textContent = accuracy + '%';
      document.getElementById('timeAverage').textContent = avgTime + 's';
      
      let message, trophy;
      if (accuracy === 100) {
        trophy = 'üèÜ';
        message = '¬°PERFECTO! Eres un maestro del √°lgebra lineal üéì‚ú®';
      } else if (accuracy >= 75) {
        trophy = '‚≠ê';
        message = '¬°EXCELENTE! Dominas muy bien las matrices üöÄüìä';
      } else if (accuracy >= 50) {
        trophy = 'üéØ';
        message = '¬°BUEN TRABAJO! Un poco m√°s de pr√°ctica üí™üìê';
      } else {
        trophy = 'üìö';
        message = '¬°NO TE RINDAS! Repasa los conceptos üåüüî¢';
      }
      
      document.getElementById('trophyEmoji').textContent = trophy;
      document.getElementById('resultsMessage').textContent = message;
      
      generatePersonalFeedback(correctCount, accuracy, avgTime);
      
      if (accuracy >= 75) {
        createMassiveConfetti();
      }
    }
    
    function generatePersonalFeedback(correct, accuracy, avgTime) {
      const container = document.getElementById('personalFeedback');
      let feedback = '<h4 style="color: var(--primary); margin-bottom: 15px;">üìä An√°lisis Detallado</h4>';
      
      if (avgTime < 15) {
        feedback += '<p>‚ö° <strong>Velocidad impresionante</strong></p>';
      } else if (avgTime < 25) {
        feedback += '<p>‚è±Ô∏è <strong>Ritmo adecuado</strong></p>';
      } else {
        feedback += '<p>üê¢ <strong>T√≥mate tu tiempo</strong></p>';
      }
      
      if (accuracy === 100) {
        feedback += '<p>üéØ <strong>Precisi√≥n perfecta!</strong></p>';
      } else if (accuracy >= 75) {
        feedback += '<p>‚úÖ <strong>Alta precisi√≥n</strong></p>';
      } else if (accuracy >= 50) {
        feedback += '<p>üìà <strong>En progreso</strong></p>';
      } else {
        feedback += '<p>üí° <strong>√Årea de mejora</strong></p>';
      }
      
      const weekTips = {
        1: 'Practica identificar tipos de matrices üìê',
        2: 'Domina multiplicaci√≥n matricial ‚ûï‚úñÔ∏è',
        3: 'Practica Gauss-Jordan üîÑ',
        4: 'Memoriza propiedades de determinantes üé≤'
      };
      
      feedback += '<p>üí≠ <strong>Tip Semana ' + currentWeek + ':</strong> ' + weekTips[currentWeek] + '</p>';
      container.innerHTML = feedback;
    }
    
    function shuffleArray(array) {
      const newArray = [...array];
      for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
      }
      return newArray;
    }
    
    function createConfetti() {
      const container = document.getElementById('confetti');
      const colors = ['#6496fa', '#00d4aa', '#ffd60a', '#06d6a0', '#ef476f'];
      
      for (let i = 0; i < 30; i++) {
        const piece = document.createElement('div');
        piece.className = 'confetti-piece';
        piece.style.left = Math.random() * 100 + '%';
        piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        container.appendChild(piece);
        setTimeout(() => piece.remove(), 3000);
      }
    }
    
    function createMassiveConfetti() {
      const container = document.getElementById('confetti');
      const colors = ['#6496fa', '#00d4aa', '#ffd60a', '#06d6a0', '#ef476f'];
      
      for (let i = 0; i < 100; i++) {
        const piece = document.createElement('div');
        piece.className = 'confetti-piece';
        piece.style.left = Math.random() * 100 + '%';
        piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        piece.style.width = (5 + Math.random() * 10) + 'px';
        piece.style.height = (5 + Math.random() * 10) + 'px';
        container.appendChild(piece);
        setTimeout(() => piece.remove(), 5000);
      }
    }
    
    function toggleTheme() {
      const current = document.documentElement.getAttribute('data-theme');
      const newTheme = current === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme-algebra', newTheme);
    }
    
    function restartQuiz() {
      document.getElementById('resultsScreen').classList.remove('active');
      document.getElementById('startScreen').classList.remove('hidden');
      currentQuestionIndex = 0;
      score = 0;
      userAnswers = [];
      totalTime = 0;
    }
    
    function reviewAnswers() {
      let review = 'üìä REVISI√ìN - Semana ' + currentWeek + '\n\n';
      userAnswers.forEach((answer, index) => {
        const question = questionPool[index];
        const status = answer.isCorrect ? '‚úÖ' : '‚ùå';
        review += status + ' P' + (index + 1) + ': ' + (answer.points > 0 ? '+' + answer.points + ' pts' : '0 pts') + '\n';
        review += '‚ùì ' + question.question + '\n';
        if (answer.selectedIndex === -1) {
          review += '‚è∞ Tiempo agotado\n';
        } else {
          review += 'üìù Tu respuesta: ' + question.options[answer.selectedIndex] + '\n';
        }
        if (!answer.isCorrect) {
          review += '‚úì Correcta: ' + question.options[answer.correctIndex] + '\n';
        }
        review += '\n';
      });
      alert(review);
    }
    
    function shareResults() {
      const correctCount = userAnswers.filter(a => a.isCorrect).length;
      const accuracy = Math.round((correctCount / questionPool.length) * 100);
      const text = 'üéØ ¬°Quiz √Ålgebra Lineal!\nüíé ' + score + ' puntos\n‚úÖ ' + correctCount + '/' + questionPool.length + '\nüéØ ' + accuracy + '%\n\n#√ÅlgebraLineal';
      
      if (navigator.share) {
        navigator.share({ title: 'Quiz √Ålgebra Lineal', text: text });
      } else {
        navigator.clipboard.writeText(text).then(() => alert('‚úÖ ¬°Copiado!'));
      }
    }
    
    function openModal() {
      document.getElementById('privacyModal').classList.add('show');
    }
    
    function closeModal() {
      document.getElementById('privacyModal').classList.remove('show');
    }
    
    function showCredits() {
      document.getElementById('resultsScreen').classList.remove('active');
      document.getElementById('creditsScreen').classList.add('active');
      window.scrollTo(0, 0);
    }
    
    function closeCredits() {
      document.getElementById('creditsScreen').classList.remove('active');
      document.getElementById('startScreen').classList.remove('hidden');
      window.scrollTo(0, 0);
    }
    
    document.addEventListener('keydown', function(event) {
      const questionScreen = document.getElementById('questionScreen');
      const modal = document.getElementById('privacyModal');
      
      if (modal.classList.contains('show') && event.key === 'Escape') {
        closeModal();
      }
      
      if (questionScreen.classList.contains('active')) {
        if (event.key >= '1' && event.key <= '4') {
          const index = parseInt(event.key) - 1;
          if (selectedAnswer === -1) {
            selectOption(index);
          }
        }
        if (event.key === 'Enter') {
          const nextBtn = document.getElementById('nextBtn');
          if (nextBtn.style.display !== 'none') {
            nextQuestion();
          }
        }
      }
    });
    
    document.addEventListener('DOMContentLoaded', function() {
      const savedTheme = localStorage.getItem('theme-algebra') || 'dark';
      document.documentElement.setAttribute('data-theme', savedTheme);
      console.log('üéØ Quiz cargado - ‚ôø WCAG 2.2 AA');
    });
  </script>
</body>
</html>