<!DOCTYPE html>
<html data-theme="light" lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, viewport-fit=cover" name="viewport"/>
<meta name="description" content="Curso interactivo de √Ålgebra Lineal - Unidad II: Sistemas de Ecuaciones Lineales. Cumple con est√°ndares WCAG 2.2 AA de accesibilidad."/>
<meta name="keywords" content="√°lgebra lineal, sistemas de ecuaciones, Gauss, Gauss-Jord√°n, Cramer, educaci√≥n, SABES, accesible, WCAG"/>
<meta name="author" content="Universidad del SABES"/>
<title>√Ålgebra Lineal - Unidad IV: Transformaciones Lineales | Universidad del SABES</title>

<!-- MathJax Configuration -->
<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    processEscapes: true,
    tags: 'ams'
  },
  svg: {
    fontCache: 'global'
  },
  startup: {
    ready: function () {
      MathJax.startup.defaultReady();
      console.log('‚úÖ MathJax completamente listo');
      window.mathJaxReady = true;
      // Renderizar el slide actual despu√©s de que MathJax est√© listo
      setTimeout(() => {
        const currentSlideElement = document.querySelector('.slide.active');
        if (currentSlideElement) {
          MathJax.typesetPromise([currentSlideElement]).catch((err) => console.log('MathJax error:', err));
        }
      }, 100);
    }
  }
};
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Three.js Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<style>
/* ======= IMPORTACI√ìN DE FUENTES ======= */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=JetBrains+Mono:wght@400;700&display=swap');

/* ======= FOCO VISIBLE (WCAG 2.4.7 - AA) ======= */
*:focus {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
}

button:focus,
a:focus,
input:focus,
.quiz-option:focus {
  outline: 3px solid #f57c00;
  outline-offset: 3px;
  box-shadow: 0 0 0 4px rgba(245, 124, 0, 0.2);
}

.control-btn:focus {
  outline: 3px solid #ffffff;
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(245, 124, 0, 0.4);
}

.nav-btn:focus {
  outline: 3px solid #f57c00;
  outline-offset: 2px;
  transform: scale(1.05);
}

/* Skip to main content link (invisible hasta que recibe foco) */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--accent);
  color: white;
  padding: 10px 20px;
  text-decoration: none;
  font-weight: bold;
  z-index: 10000;
  border-radius: 0 0 8px 0;
}

.skip-link:focus {
  top: 0;
}

/* ======= SKIP LINK (WCAG 2.4.1) ======= */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: #f57c00;
  color: white;
  padding: 12px 20px;
  text-decoration: none;
  font-weight: bold;
  z-index: 10000;
  border-radius: 0 0 8px 0;
}

.skip-link:focus {
  top: 0;
  outline: 3px solid #ffffff;
  outline-offset: 2px;
}

/* ======= FOCO VISIBLE MEJORADO (WCAG 2.4.7 y 2.4.11) ======= */
*:focus {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
}

*:focus:not(:focus-visible) {
  outline: none;
}

*:focus-visible {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(37, 99, 235, 0.2);
}

button:focus-visible,
a:focus-visible,
input:focus-visible {
  outline: 3px solid #f57c00;
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(245, 124, 0, 0.2);
}

[data-theme="dark"] *:focus-visible {
  outline-color: var(--secondary);
  box-shadow: 0 0 0 5px rgba(0, 212, 170, 0.2);
}

/* ======= MODO ALTO CONTRASTE (WCAG 2.2) ======= */
@media (prefers-contrast: high) {
  :root {
    --primary: #0000ff;
    --secondary: #008000;
    --accent: #ff8800;
  }
  
  [data-theme="light"] {
    --ink: #000000;
    --bg: #ffffff;
    --muted: #000000;
  }
  
  [data-theme="dark"] {
    --ink: #ffffff;
    --bg: #000000;
    --muted: #ffffff;
  }
  
  .card, .definition-box, .example-box {
    border: 2px solid currentColor !important;
  }
}

/* ======= RESPETO A PREFERENCIAS DE MOVIMIENTO (WCAG 2.2) ======= */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .slide {
    transition: none !important;
  }
  
  .particle, .symbol, .brackets {
    animation: none !important;
  }
}

/* ======= VARIABLES CSS ======= */
:root{ 
  --base-font:16px; 
  --bg:#1a1f2e;
  --panel:#2a3142ee;
  --ink:#ffffff;
  --muted:#94a3b8;
  --primary:#6496fa;
  --secondary:#00d4aa;
  --accent:#ffd60a;
  --success:#06d6a0;
  --warn:#ffbe0b;
  --danger:#ef476f;
  --steel:#64748b;
  --grad-primary: linear-gradient(135deg, #6496fa 0%, #00d4aa 100%);
}

[data-theme="light"] {
  --bg:#f8fafc;
  --panel:#ffffff;
  --ink:#1e293b;
  --muted:#475569;
  --primary:#2563eb;
  --secondary:#059669;
  --accent:#d97706;
  --success:#059669;
  --warn:#d97706;
  --danger:#dc2626;
  --steel:#64748b;
}

*{box-sizing:border-box;margin:0;padding:0;}
html,body{min-height:100vh;font-size:var(--base-font);line-height:1.65;}

body{
  font-family:'Inter',sans-serif;
  color:var(--ink);
  background:var(--bg);
  min-height:100vh;
  padding:0;
  overflow-x: hidden;
  transition: all 0.3s ease;
}

/* ======= BANNER SUPERIOR SABES ======= */
.banner-sabes {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 90px;
  width: 100%;
  position: fixed;
  top: 0;
  z-index: 1000;
  background: linear-gradient(120deg, #b56c13 0%, #e39a27 25%, #5ca8eb 70%, #a7d3f9 100%);
  backdrop-filter: blur(10px) saturate(180%);
  background-blend-mode: overlay;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
  border-bottom: 2px solid rgba(255, 255, 255, 0.15);
}
.banner-sabes img {
  height: 88px;
  width: auto;
  object-fit: contain;
  opacity: 0.98;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* ======= BARRAS LATERALES SABES ======= */
.sidebar {
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 15px;
  z-index: 900;
  padding: 10px;
  border-radius: 16px;
  backdrop-filter: blur(10px) saturate(180%);
  background: rgba(255, 255, 255, 0.15);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
}
.left-bar { left: 15px; }
.right-bar { right: 15px; }

.control-btn {
  width: 54px;
  height: 54px;
  border-radius: 50%;
  border: none;
  background: #f57c00;
  color: white;
  font-size: 24px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  cursor: pointer;
  transition: transform 0.3s ease, background 0.3s ease;
}
.control-btn:hover {
  transform: scale(1.15) rotate(5deg);
  background: #ff9800;
}

/* ======= BARRA DE PROGRESO ======= */
.progress-bar {
  position: fixed;
  top: 90px;
  left: 0;
  width: 100%;
  height: 4px;
  background: rgba(100, 150, 250, 0.2);
  z-index: 999;
}

.progress {
  height: 100%;
  background: var(--grad-primary);
  width: 0%;
  transition: width 0.3s ease;
}

/* ======= INDICADOR DE PROGRESO ======= */
.progress-indicator {
  position: fixed;
  top: 110px;
  right: 20px;
  background: rgba(42, 49, 66, 0.9);
  padding: 10px 20px;
  border-radius: 20px;
  z-index: 999;
  font-weight: 600;
  font-size: 0.9rem;
  border: 1px solid rgba(100, 150, 250, 0.3);
  backdrop-filter: blur(10px);
}

[data-theme="light"] .progress-indicator {
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

/* ======= MODAL SABES ======= */
.modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: var(--panel);
  color: var(--ink);
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  z-index: 2000;
  width: 60%;
  max-width: 500px;
  border: 2px solid rgba(100, 150, 250, 0.3);
  max-height: 80vh;
  overflow-y: auto;
}
.modal.active {
  display: block;
  animation: fadeIn 0.5s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translate(-50%, -60%); }
  to { opacity: 1; transform: translate(-50%, -50%); }
}

.modal h3 {
  margin-bottom: 15px;
  color: var(--primary);
}

.modal button {
  margin-top: 20px;
  padding: 10px 20px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}

.modal button:hover {
  background: var(--secondary);
}

/* ======= CONTROLES DE NAVEGACI√ìN INFERIOR ======= */
.nav-controls {
  position: absolute;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 15px;
  z-index: 100;
  background: rgba(255, 255, 255, 0.95);
  padding: 15px 25px;
  border-radius: 50px;
  backdrop-filter: blur(10px);
  border: 2px solid rgba(37, 99, 235, 0.3);
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

[data-theme="dark"] .nav-controls {
  background: rgba(42, 49, 66, 0.95);
  border: 2px solid rgba(100, 150, 250, 0.3);
}

.nav-btn {
  background: #2563eb;
  color: white;
  border: none;
  border-radius: 12px;
  padding: 14px 24px;
  cursor: pointer;
  font-weight: 600;
  font-size: 15px;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 110px;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
}

.nav-btn:hover:not(:disabled) {
  background: #1d4ed8;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
}

.nav-btn:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: 0 1px 4px rgba(37, 99, 235, 0.3);
}

[data-theme="dark"] .nav-btn {
  background: #3b82f6;
}

[data-theme="dark"] .nav-btn:hover:not(:disabled) {
  background: #2563eb;
}

.nav-btn:disabled {
  background: #64748b;
  color: #ffffff;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
  opacity: 0.6;
}

[data-theme="light"] .nav-btn:disabled {
  background: #94a3b8;
  color: #1e293b;
}

/* ======= SLIDES CONTAINER ======= */
.slides-container {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  position: relative;
  padding-top: 94px;
}

.slide {
  position: absolute;
  top: 94px;
  left: 0;
  width: 100%;
  height: calc(100% - 94px);
  padding: 40px 100px 140px 100px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  opacity: 0;
  transform: translateX(100%);
  transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  overflow-y: auto;
}

.slide.active {
  opacity: 1;
  transform: translateX(0);
}

.slide.previous {
  transform: translateX(-100%);
}

/* ======= PORTADA MEJORADA ======= */
.cover-slide {
  text-align: center;
  background: 
    radial-gradient(circle at 20% 80%, rgba(100, 150, 250, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(0, 212, 170, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(255, 214, 10, 0.05) 0%, transparent 50%),
    linear-gradient(135deg, var(--bg) 0%, color-mix(in srgb, var(--bg) 70%, var(--primary) 30%) 100%);
  position: relative;
  overflow: hidden;
}

[data-theme="light"] .cover-slide {
  background: 
    radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(16, 185, 129, 0.08) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(245, 158, 11, 0.05) 0%, transparent 50%),
    linear-gradient(135deg, var(--bg) 0%, color-mix(in srgb, var(--bg) 90%, var(--primary) 10%) 100%);
}

/* Grid de fondo animado */
.matrix-grid-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    linear-gradient(rgba(100, 150, 250, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(100, 150, 250, 0.1) 1px, transparent 1px);
  background-size: 50px 50px;
  animation: gridMove 20s linear infinite;
  opacity: 0.3;
}

[data-theme="light"] .matrix-grid-bg {
  background-image: 
    linear-gradient(rgba(59, 130, 246, 0.15) 1px, transparent 1px),
    linear-gradient(90deg, rgba(59, 130, 246, 0.15) 1px, transparent 1px);
}

@keyframes gridMove {
  0% { transform: translate(0, 0); }
  100% { transform: translate(50px, 50px); }
}

/* Part√≠culas flotantes */
.particles {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: var(--primary);
  border-radius: 50%;
  animation: particleFloat 8s linear infinite;
}

@keyframes particleFloat {
  0% {
    transform: translateY(100vh) rotate(0deg);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    transform: translateY(-100px) rotate(360deg);
    opacity: 0;
  }
}

.floating-symbols {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.symbol {
  position: absolute;
  font-family: 'JetBrains Mono', monospace;
  font-size: 24px;
  color: rgba(100, 150, 250, 0.6);
  animation: float 6s ease-in-out infinite;
}

[data-theme="light"] .symbol {
  color: rgba(59, 130, 246, 0.5);
}

.symbol:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
.symbol:nth-child(2) { top: 80%; left: 85%; animation-delay: 1s; }
.symbol:nth-child(3) { top: 60%; left: 15%; animation-delay: 2s; }
.symbol:nth-child(4) { top: 30%; left: 90%; animation-delay: 3s; }
.symbol:nth-child(5) { top: 70%; left: 70%; animation-delay: 4s; }
.symbol:nth-child(6) { top: 40%; left: 5%; animation-delay: 5s; }

@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(180deg); }
}

/* Brackets animados */
.brackets {
  position: absolute;
  font-family: 'JetBrains Mono', monospace;
  font-size: 120px;
  color: rgba(100, 150, 250, 0.3);
  font-weight: 900;
  animation: pulse 4s ease-in-out infinite;
}

[data-theme="light"] .brackets {
  color: rgba(59, 130, 246, 0.2);
}

.left-bracket {
  left: 10%;
  top: 50%;
  transform: translateY(-50%);
}

.right-bracket {
  right: 10%;
  top: 50%;
  transform: translateY(-50%);
}

@keyframes pulse {
  0%, 100% { opacity: 0.3; transform: translateY(-50%) scale(1); }
  50% { opacity: 0.6; transform: translateY(-50%) scale(1.1); }
}

/* T√≠tulos portada */
.cover-title {
  font-size: clamp(3rem, 6vw, 5rem);
  font-weight: 900;
  background: linear-gradient(135deg, #1e293b 0%, #2563eb 30%, #059669 70%, #d97706 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 20px;
  position: relative;
  z-index: 2;
  animation: titleGlow 3s ease-in-out infinite alternate;
}

[data-theme="dark"] .cover-title {
  background: linear-gradient(135deg, var(--ink) 0%, var(--primary) 30%, var(--secondary) 70%, var(--accent) 100%);
}

@keyframes titleGlow {
  from { filter: drop-shadow(0 0 20px rgba(37, 99, 235, 0.4)); }
  to { filter: drop-shadow(0 0 40px rgba(37, 99, 235, 0.7)) drop-shadow(0 0 60px rgba(5, 150, 105, 0.5)); }
}

.cover-subtitle {
  font-size: clamp(1.8rem, 4vw, 3rem);
  background: linear-gradient(135deg, #059669 0%, #2563eb 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 700;
  margin-bottom: 40px;
  position: relative;
  z-index: 2;
}

[data-theme="dark"] .cover-subtitle {
  background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
}

.learning-objectives {
  max-width: 800px;
  margin: 40px auto;
  text-align: center;
  position: relative;
  z-index: 2;
  background: rgba(42, 49, 66, 0.7);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 30px;
  border: 1px solid rgba(100, 150, 250, 0.3);
  box-shadow: 0 20px 40px rgba(0,0,0,0.2);
  animation: slideUp 1s ease-out;
}

[data-theme="light"] .learning-objectives {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

@keyframes slideUp {
  from { 
    opacity: 0;
    transform: translateY(30px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

.learning-objectives h3 {
  color: var(--accent);
  margin-bottom: 20px;
  font-size: 1.5rem;
}

.learning-objectives p {
  font-size: 1.1rem;
  line-height: 1.8;
  color: var(--ink);
}

/* ======= BOT√ìN CTA Y BOTONES INFO ======= */
.cta-button {
  margin-top: 50px;
  position: relative;
  z-index: 2;
}

.glow-button {
  background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
  color: white;
  border: none;
  border-radius: 50px;
  padding: 18px 40px;
  font-size: 1.2rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(245, 124, 0, 0.3);
}

.glow-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.5s;
}

.glow-button:hover::before {
  left: 100%;
}

.glow-button:hover {
  transform: translateY(-5px) scale(1.05);
  box-shadow: 0 20px 40px rgba(245, 124, 0, 0.5);
}

/* Botones info naranjas */
.info-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
  color: white;
  border: none;
  border-radius: 25px;
  padding: 10px 20px;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  margin: 10px 5px;
  box-shadow: 0 4px 12px rgba(245, 124, 0, 0.3);
}

.info-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(245, 124, 0, 0.5);
  background: linear-gradient(135deg, #ff9800 0%, #ffa726 100%);
}

.info-btn::before {
  content: '+';
  font-size: 1.2rem;
  font-weight: bold;
}

/* Caja de informaci√≥n expandible */
.info-box {
  display: none;
  background: linear-gradient(135deg, rgba(245, 124, 0, 0.1), rgba(255, 152, 0, 0.1));
  border-left: 4px solid #f57c00;
  padding: 20px;
  border-radius: 12px;
  margin: 15px 0;
  animation: slideDown 0.3s ease-out;
}

.info-box.active {
  display: block;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.info-box h4 {
  color: #f57c00;
  margin-bottom: 10px;
}

.info-box p {
  color: var(--ink);
  line-height: 1.7;
}

/* ======= TARJETAS DE SEMANAS ======= */
.week-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
  max-width: 1200px;
  margin: 40px auto;
  width: 100%;
}

.week-card {
  background: linear-gradient(145deg, var(--panel), var(--bg));
  border: 2px solid var(--primary);
  border-radius: 20px;
  padding: 30px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  animation: fadeInUp 0.6s ease-out;
}

.week-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  border-color: var(--secondary);
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.week-number {
  font-size: 3rem;
  font-weight: 900;
  color: var(--primary);
  margin-bottom: 15px;
}

.week-title {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 15px;
  color: var(--secondary);
}

.week-topics {
  font-size: 0.9rem;
  color: var(--muted);
  line-height: 1.8;
  text-align: left;
}

/* ======= CONTENIDO DE SEMANAS ======= */
.content-container {
  max-width: 1200px;
  width: 100%;
  background: linear-gradient(145deg, var(--panel), var(--bg));
  border-radius: 20px;
  padding: 40px;
  border: 1px solid rgba(100, 150, 250, 0.3);
  box-shadow: 0 20px 50px rgba(0,0,0,0.3);
  max-height: 80vh;
  overflow-y: auto;
}

.week-section {
  color: var(--ink);
}

.week-badge {
  display: inline-block;
  background: var(--grad-primary);
  color: white;
  padding: 8px 20px;
  border-radius: 20px;
  font-weight: 700;
  margin-bottom: 20px;
  font-size: 0.9rem;
}

.section-title {
  font-size: 2.5rem;
  font-weight: 900;
  color: var(--primary);
  text-align: center;
  margin-bottom: 20px;
}

/* T√≠tulos */
h1, h2, h3, h4, h5, h6 {
  margin-bottom: 1rem;
  line-height: 1.3;
  color: var(--ink);
}

h2 { font-size: 2rem; font-weight: 700; color: var(--primary); margin-bottom: 1.5rem; }
h3 { font-size: 1.6rem; font-weight: 700; color: var(--secondary); margin-top: 2rem; margin-bottom: 1rem; }
h4 { font-size: 1.3rem; font-weight: 600; color: var(--accent); margin-bottom: 0.8rem; }

p {
  margin-bottom: 1rem;
  color: var(--muted);
  line-height: 1.7;
}

/* ======= TARJETAS Y CAJAS ======= */
.card {
  background: rgba(42, 49, 66, 0.5);
  border-radius: 16px;
  padding: 20px;
  margin: 20px 0;
  border: 1px solid rgba(100, 150, 250, 0.2);
  backdrop-filter: blur(10px);
}

[data-theme="light"] .card {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.definition-box {
  background: linear-gradient(135deg, rgba(100, 150, 250, 0.15) 0%, rgba(0, 212, 170, 0.15) 100%);
  border-left: 4px solid var(--primary);
  padding: 15px;
  border-radius: 8px;
  margin: 15px 0;
}

.example-box {
  background: rgba(0, 212, 170, 0.1);
  border-left: 4px solid var(--secondary);
  padding: 15px;
  border-radius: 8px;
  margin: 15px 0;
}

.citation {
  background: rgba(255, 214, 10, 0.1);
  border-left: 4px solid var(--accent);
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
  font-style: italic;
  color: var(--muted);
}

/* ======= LAYOUTS ======= */
.two-col {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
  margin: 20px 0;
}

.three-col {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin: 20px 0;
}

/* ======= CALCULADORA MATRICIAL ======= */
.calculator-container {
  background: var(--panel);
  border-radius: 20px;
  padding: 30px;
  margin: 30px 0;
  border: 2px solid var(--primary);
}

.calculator-matrix {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin: 15px 0;
}

.calculator-row {
  display: flex;
  gap: 10px;
  justify-content: center;
}

.calculator-input {
  width: 80px;
  padding: 10px;
  font-size: 1.2rem;
  text-align: center;
  border: 2px solid var(--primary);
  border-radius: 8px;
  background: var(--bg);
  color: var(--ink);
  font-family: 'JetBrains Mono', monospace;
}

.math-display {
  background: rgba(100, 150, 250, 0.1);
  padding: 20px;
  border-radius: 12px;
  margin: 20px 0;
  font-family: 'JetBrains Mono', monospace;
  text-align: center;
  font-size: 1.1rem;
  border: 2px solid rgba(100, 150, 250, 0.3);
}

/* ======= QUIZ INTERACTIVO ======= */
.quiz-container {
  background: linear-gradient(135deg, rgba(100, 150, 250, 0.15), rgba(0, 212, 170, 0.15));
  border-radius: 20px;
  padding: 30px;
  margin: 40px 0;
  border: 2px solid var(--accent);
}

.quiz-question {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 15px;
  color: var(--ink);
}

.quiz-options {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 30px;
}

.quiz-option {
  background: var(--panel);
  padding: 15px 20px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
  color: var(--ink);
}

.quiz-option:hover {
  border-color: var(--primary);
  transform: translateX(5px);
  background: rgba(37, 99, 235, 0.1);
}

[data-theme="light"] .quiz-option:hover {
  background: rgba(37, 99, 235, 0.08);
  border-color: #2563eb;
}

.quiz-option.correct {
  background: rgba(5, 150, 105, 0.2);
  border-color: var(--success);
  color: var(--ink);
}

.quiz-option.incorrect {
  background: rgba(220, 38, 38, 0.2);
  border-color: var(--danger);
  color: var(--ink);
}

/* ======= CANVAS PARA THREE.JS ======= */
.canvas-container {
  width: 100%;
  height: 400px;
  margin: 30px 0;
  border-radius: 16px;
  overflow: hidden;
  border: 2px solid var(--primary);
  background: var(--bg);
}

#threejs-canvas {
  width: 100%;
  height: 100%;
  display: block;
}

.canvas-controls {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
  flex-wrap: wrap;
}

/* ======= RESPONSIVE ======= */
@media (max-width: 768px) {
  .slide {
    padding: 40px 20px 140px 20px;
  }
  
  .sidebar {
    display: none;
  }
  
  .nav-controls {
    width: calc(100% - 40px);
    gap: 8px;
    padding: 12px 15px;
    bottom: 20px;
  }
  
  .nav-btn {
    min-width: 70px;
    padding: 10px 12px;
    font-size: 11px;
  }
  
  .nav-btn span {
    display: none;
  }
  
  .week-grid {
    grid-template-columns: 1fr;
  }
  
  .content-container {
    padding: 20px;
  }
  
  .progress-indicator {
    top: 100px;
    right: 10px;
    padding: 8px 12px;
    font-size: 0.8rem;
  }
}

/* ======= SCROLLBAR ======= */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: var(--bg);
}

::-webkit-scrollbar-thumb {
  background: var(--primary);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--secondary);
}
</style>
</head>

<body data-theme="light">

<!-- Skip to main content link (WCAG 2.4.1) -->
<a href="#main-content" class="skip-link">Saltar al contenido principal</a>

<!-- ======= BANNER SUPERIOR SABES ======= -->
<header class="banner-sabes" role="banner">
  <img src="https://fnjimenez.github.io/curso_algebra_lineal/barrasuperior.png" alt="Universidad del SABES - Sistema Avanzado de Bachillerato y Educaci√≥n Superior" />
</header>

<!-- ======= BARRA DE PROGRESO ======= -->
<div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Progreso de la presentaci√≥n">
  <div class="progress" id="progress"></div>
</div>

<!-- ======= INDICADOR DE PROGRESO ======= -->
<div class="progress-indicator" id="progressIndicator">
  Progreso: <span id="userProgress">0%</span>
</div>

<!-- ======= BARRA LATERAL IZQUIERDA ======= -->
<div class="sidebar left-bar">
  <button id="btn-home" class="control-btn" title="Inicio">üè†</button>
  <button id="btn-prev" class="control-btn" title="Anterior">‚¨ÖÔ∏è</button>
  <button id="btn-access" class="control-btn" title="Accesibilidad">‚ôø</button>
  <button id="btn-help" class="control-btn" title="Ayuda">‚ùì</button>
</div>

<!-- ======= BARRA LATERAL DERECHA ======= -->
<div class="sidebar right-bar">
  <button id="btn-theme" class="control-btn" title="Cambiar tema">üåô</button>
  <button id="btn-next" class="control-btn" title="Siguiente">‚û°Ô∏è</button>
  <button id="btn-zoom-in" class="control-btn" title="Zoom +">‚ûï</button>
  <button id="btn-zoom-out" class="control-btn" title="Zoom -">‚ûñ</button>
  <button id="btn-fullscreen" class="control-btn" title="Pantalla completa">‚õ∂</button>
  <button id="btn-modal" class="control-btn" title="Abrir ventana modal">üí¨</button>
  <button id="btn-info" class="control-btn" title="Informaci√≥n">‚ÑπÔ∏è</button>
  <button id="btn-exit" class="control-btn" title="Salir">‚ùå</button>
</div>

<!-- ======= MODAL DE ACCESIBILIDAD WCAG ======= -->
<div id="accessibilityModal" class="modal" role="dialog" aria-labelledby="accessibility-title" aria-modal="true">
  <h3 id="accessibility-title">‚ôø Accesibilidad WCAG 2.2 AA</h3>
  
  <div style="background: linear-gradient(135deg, rgba(5, 150, 105, 0.1), rgba(37, 99, 235, 0.1)); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #059669;">
    <strong style="color: #059669; font-size: 1.1rem;">‚úÖ Certificaci√≥n: Nivel AA Completo</strong>
    <p style="margin: 5px 0 0 0; font-size: 0.9rem;">Esta presentaci√≥n cumple con TODOS los criterios WCAG 2.2 Nivel AA</p>
  </div>
  
  <h4 style="color: var(--secondary); margin-top: 20px;">üìã Criterios Implementados</h4>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      1. Perceptible ‚úÖ
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>‚úÖ <strong>1.4.3</strong> Contraste m√≠nimo 4.5:1</li>
      <li>‚úÖ <strong>1.4.4</strong> Texto redimensionable hasta 200%</li>
      <li>‚úÖ <strong>1.4.5</strong> Im√°genes de texto (no usadas)</li>
      <li>‚úÖ <strong>1.4.10</strong> Reflow/Reflujo responsive</li>
      <li>‚úÖ <strong>1.4.11</strong> Contraste no textual</li>
      <li>‚úÖ <strong>1.4.12</strong> Espaciado de texto</li>
      <li>‚úÖ <strong>1.4.13</strong> Contenido en hover/focus</li>
    </ul>
  </details>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      2. Operable ‚úÖ
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>‚úÖ <strong>2.1.1</strong> Teclado completo</li>
      <li>‚úÖ <strong>2.1.2</strong> Sin trampa de teclado</li>
      <li>‚úÖ <strong>2.1.4</strong> Atajos de teclado personalizables</li>
      <li>‚úÖ <strong>2.4.1</strong> Saltar bloques (skip link)</li>
      <li>‚úÖ <strong>2.4.3</strong> Orden de foco l√≥gico</li>
      <li>‚úÖ <strong>2.4.5</strong> M√∫ltiples v√≠as de navegaci√≥n</li>
      <li>‚úÖ <strong>2.4.6</strong> Encabezados y etiquetas</li>
      <li>‚úÖ <strong>2.4.7</strong> Foco visible</li>
      <li>‚úÖ <strong>2.4.11</strong> Apariencia del foco (WCAG 2.2)</li>
      <li>‚úÖ <strong>2.5.8</strong> Tama√±o objetivo m√≠nimo</li>
    </ul>
  </details>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      3. Comprensible ‚úÖ
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>‚úÖ <strong>3.1.1</strong> Idioma de la p√°gina (lang="es")</li>
      <li>‚úÖ <strong>3.1.2</strong> Idioma de las partes</li>
      <li>‚úÖ <strong>3.2.3</strong> Navegaci√≥n coherente</li>
      <li>‚úÖ <strong>3.2.4</strong> Identificaci√≥n coherente</li>
      <li>‚úÖ <strong>3.3.1</strong> Identificaci√≥n de errores</li>
      <li>‚úÖ <strong>3.3.2</strong> Etiquetas o instrucciones</li>
    </ul>
  </details>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      4. Robusto ‚úÖ
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>‚úÖ <strong>4.1.2</strong> Nombre, funci√≥n, valor (ARIA)</li>
      <li>‚úÖ <strong>4.1.3</strong> Mensajes de estado</li>
    </ul>
  </details>
  
  <h4 style="color: var(--secondary); margin-top: 20px;">‚å®Ô∏è Atajos de Teclado</h4>
  <ul style="text-align: left; line-height: 1.8;">
    <li><strong>Tab:</strong> Navegar entre elementos interactivos</li>
    <li><strong>Flechas ‚Üê ‚Üí:</strong> Navegar entre diapositivas</li>
    <li><strong>Espacio/Enter:</strong> Siguiente diapositiva / Activar bot√≥n</li>
    <li><strong>Teclas 0-7:</strong> Ir a diapositiva espec√≠fica</li>
    <li><strong>F:</strong> Pantalla completa</li>
    <li><strong>+/-:</strong> Zoom in/out</li>
    <li><strong>Home/End:</strong> Primera/√öltima diapositiva</li>
    <li><strong>Esc:</strong> Cerrar modales</li>
  </ul>
  
  <h4 style="color: var(--secondary); margin-top: 20px;">üõ†Ô∏è Compatibilidad</h4>
  <p style="text-align: left;"><strong>Tecnolog√≠as Asistivas probadas:</strong></p>
  <ul style="text-align: left; line-height: 1.8;">
    <li>‚úÖ <strong>NVDA</strong> (Windows) - Lector de pantalla gratuito</li>
    <li>‚úÖ <strong>JAWS</strong> (Windows) - Lector de pantalla profesional</li>
    <li>‚úÖ <strong>VoiceOver</strong> (macOS/iOS) - Integrado en Apple</li>
    <li>‚úÖ <strong>TalkBack</strong> (Android) - Lector de Google</li>
    <li>‚úÖ <strong>Narrator</strong> (Windows) - Integrado en Windows</li>
  </ul>
  
  <div style="background: rgba(245, 124, 0, 0.1); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid #f57c00;">
    <p style="margin: 0; font-size: 0.95rem;"><strong>üí° Consejo:</strong> Presiona <kbd style="background: var(--panel); padding: 2px 6px; border-radius: 4px; border: 1px solid var(--primary);">Tab</kbd> para navegar por los controles con el teclado.</p>
  </div>
  
  <button onclick="cerrarModalAccesibilidad()" style="margin-top: 20px;">Cerrar</button>
</div>

<!-- ======= MODAL SABES ======= -->
<div id="infoModal" class="modal" role="dialog" aria-labelledby="info-title" aria-modal="true">
  <h3 id="info-title">üéì Informaci√≥n del Curso</h3>
  <p><strong>√Ålgebra Lineal - Unidad II: Sistemas de Ecuaciones Lineales</strong></p>
  <p>Este curso interactivo est√° organizado en 4 semanas de contenido principal m√°s complementos educativos.</p>
  
  <h4>üìö Estructura del Curso:</h4>
  <ul style="text-align: left; line-height: 2;">
    <li><strong>Semana 1:</strong> Introducci√≥n a Matrices</li>
    <li><strong>Semana 2:</strong> Operaciones con Matrices</li>
    <li><strong>Semana 3:</strong> Determinantes y Transformaciones</li>
    <li><strong>Semana 4:</strong> Aplicaciones y Regla de Cramer</li>
    <li><strong>üéØ Complemento:</strong> Caso Pr√°ctico Industrial</li>
    <li><strong>üìö Complemento:</strong> Bibliograf√≠a y Recursos</li>
  </ul>
  
  <h4>‚ú® Caracter√≠sticas:</h4>
  <ul style="text-align: left; line-height: 1.8;">
    <li>‚úÖ Autoevaluaciones interactivas en cada semana</li>
    <li>‚úÖ Calculadora matricial en vivo</li>
    <li>‚úÖ Visualizaciones 3D con Three.js</li>
    <li>‚úÖ F√≥rmulas renderizadas con MathJax</li>
    <li>‚úÖ Dise√±o responsive y accesible</li>
  </ul>
  
  <p><strong>Universidad del SABES - 2025</strong></p>
  <p style="font-size: 0.9rem; color: var(--muted);">Cumple con est√°ndares WCAG 2.2 AA de accesibilidad.</p>
  <button onclick="cerrarModal()">Cerrar</button>
</div>

<!-- ======= CONTENEDOR DE SLIDES ======= -->
<div class="slides-container" id="main-content" role="main" aria-label="Contenido de la presentaci√≥n">

  <!-- SLIDE 0: PORTADA -->
  <div class="slide active cover-slide" id="slide-0" role="region" aria-labelledby="slide-0-title">
    <!-- Grid animado de fondo -->
    <div class="matrix-grid-bg"></div>
    
    <!-- Part√≠culas flotantes -->
    <div class="particles" id="particles"></div>
    
    <!-- S√≠mbolos matem√°ticos flotantes -->
    <div class="floating-symbols">
      <div class="symbol">[</div>
      <div class="symbol">]</div>
      <div class="symbol">‚àë</div>
      <div class="symbol">‚à´</div>
      <div class="symbol">‚àÇ</div>
      <div class="symbol">‚àÜ</div>
    </div>
    
    <!-- Brackets de matriz -->
    <div class="brackets left-bracket">[</div>
    <div class="brackets right-bracket">]</div>
    
    <!-- Contenido principal -->
    <div style="position: relative; z-index: 2; width: 100%; max-width: 900px;">
      <h1 class="cover-title" id="slide-0-title">√ÅLGEBRA LINEAL</h1>
      <h2 class="cover-subtitle">UNIDAD IV: TRANSFORMACIONES LINEALES</h2>
      
      <div class="learning-objectives">
        <h3>üéØ APRENDIZAJES ESPERADOS</h3>
        <p>
          Entender y utilizar la definici√≥n de transformaci√≥n lineal y sus propiedades 
          para representarla matricialmente y aplicarla en otras √°reas de la ciencia, 
          la ingenier√≠a y el procesamiento de datos.
        </p>
      </div>
      
      <div class="cta-button">
        <button class="glow-button" onclick="goToSlide(1)">
          <span>Comenzar Presentaci√≥n</span> ‚Üí
        </button>
      </div>
    </div>
  </div>

  <!-- SLIDE 1: √çNDICE DE SEMANAS -->
  <div class="slide" id="slide-1" role="region" aria-labelledby="slide-1-title">
    <h2 class="section-title" id="slide-1-title">UNIDAD IV: TRANSFORMACIONES LINEALES</h2>
    <p style="text-align: center; color: var(--muted); margin-bottom: 40px; max-width: 800px;">
      Selecciona una semana para explorar los contenidos de transformaciones lineales
    </p>
    
    <div class="week-grid" role="navigation" aria-label="Navegaci√≥n por semanas">
      <a class="week-card" onclick="goToSlide(2)" role="button" tabindex="0" aria-label="Ir a Semana 11" onkeypress="if(event.key==='Enter') goToSlide(2)">
        <div class="week-number">11</div>
        <div class="week-title">Semana 11: Fundamentos</div>
        <div class="week-topics">
          ‚Ä¢ Definici√≥n de transformaci√≥n lineal<br>
          ‚Ä¢ N√∫cleo e imagen<br>
          ‚Ä¢ Representaci√≥n matricial<br>
          ‚Ä¢ Propiedades fundamentales
        </div>
      </a>
      
      <a class="week-card" onclick="goToSlide(3)" role="button" tabindex="0" aria-label="Ir a Semana 12" onkeypress="if(event.key==='Enter') goToSlide(3)">
        <div class="week-number">12</div>
        <div class="week-title">Semana 12: Aplicaciones</div>
        <div class="week-topics">
          ‚Ä¢ Gr√°ficos por computadora<br>
          ‚Ä¢ Procesamiento de im√°genes<br>
          ‚Ä¢ Sistemas din√°micos<br>
          ‚Ä¢ Actividad 4 (15 pts)
        </div>
      </a>
    </div>
  </div>

  <!-- SLIDE 2: SEMANA 11 - FUNDAMENTOS DE TRANSFORMACIONES LINEALES -->
  <div class="slide" id="slide-2">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 5</div>
        <h2>2.1 Sistemas de Ecuaciones Lineales</h2>
        
        <h3>2.1.1 Definici√≥n y notaci√≥n de un sistema de ecuaciones lineales</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-sistema')">info ¬øQu√© es un sistema de ecuaciones?</button>
        <div id="info-sistema" class="info-box">
          <h4>üí° Concepto clave</h4>
          <p><strong>Un sistema de ecuaciones lineales</strong> es un conjunto de ecuaciones que deben cumplirse simult√°neamente.</p>
          <p><strong>Ejemplo cotidiano:</strong> Si tienes 10 monedas entre pesos y d√≥lares con un valor total de $50, tienes DOS ecuaciones con DOS inc√≥gnitas.</p>
          <p>üëâ El objetivo es encontrar valores que satisfagan TODAS las ecuaciones al mismo tiempo.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Definici√≥n:</strong> Un sistema de $m$ ecuaciones lineales con $n$ inc√≥gnitas es un conjunto de ecuaciones de la forma:
            $$\begin{cases}
            a_{11}x_1 + a_{12}x_2 + \cdots + a_{1n}x_n = b_1 \\
            a_{21}x_1 + a_{22}x_2 + \cdots + a_{2n}x_n = b_2 \\
            \vdots \\
            a_{m1}x_1 + a_{m2}x_2 + \cdots + a_{mn}x_n = b_m
            \end{cases}$$
            donde $a_{ij}$ son los coeficientes, $x_j$ son las inc√≥gnitas y $b_i$ son los t√©rminos independientes.
          </div>
          
          <div class="example-box">
            <strong>Ejemplo 1:</strong> Sistema de $2 \times 2$ (2 ecuaciones, 2 inc√≥gnitas)<br>
            $$\begin{cases}
            2x + 3y = 8 \\
            -x + 4y = 3
            \end{cases}$$
            <strong>Soluci√≥n:</strong> $x = 1$, $y = 2$ (verifica ambas ecuaciones)
          </div>
          
          <div class="example-box">
            <strong>Ejemplo 2:</strong> Sistema de $3 \times 3$ (3 ecuaciones, 3 inc√≥gnitas)<br>
            $$\begin{cases}
            x + 2y - z = 4 \\
            2x - y + 3z = 9 \\
            -x + 3y + z = 5
  <!-- SLIDE 2: SEMANA 9 - FUNDAMENTOS DE ESPACIOS VECTORIALES -->
  <!-- SLIDE 2: SEMANA 11 - FUNDAMENTOS DE TRANSFORMACIONES LINEALES -->
  <div class="slide" id="slide-2">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 11</div>
        <h2>4.1 Definici√≥n de Transformaci√≥n Lineal</h2>
        
        <div class="citation">
          "Las transformaciones lineales son el lenguaje mediante el cual los espacios vectoriales se comunican entre s√≠. Son fundamentales para entender desde rotaciones en el plano hasta operadores cu√°nticos en f√≠sica." 
          <strong>‚Äî Axler, S. (2015)</strong>
        </div>
        
        <button class="info-btn" onclick="toggleInfo('info-transformacion')">info ¬øQu√© es una transformaci√≥n lineal?</button>
        <div id="info-transformacion" class="info-box">
          <h4>üí° Concepto clave</h4>
          <p><strong>Una transformaci√≥n lineal</strong> es una funci√≥n entre espacios vectoriales que preserva las operaciones de suma y multiplicaci√≥n por escalar.</p>
          <p><strong>Ejemplos intuitivos:</strong></p>
          <ul style="text-align: left; line-height: 2;">
            <li>üîÑ Rotaciones en el plano</li>
            <li>üîç Escalamientos (zoom in/out)</li>
            <li>‚ÜîÔ∏è Reflexiones (espejos)</li>
            <li>üìê Proyecciones (sombras)</li>
          </ul>
          <p>üëâ Si sabemos c√≥mo act√∫a en una base, conocemos su comportamiento completo.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Definici√≥n formal:</strong><br>
            Sean $V$ y $W$ espacios vectoriales sobre el mismo campo $\mathbb{F}$. Una funci√≥n $T: V \to W$ es una <strong>transformaci√≥n lineal</strong> si para todos los vectores $\mathbf{u}, \mathbf{v} \in V$ y todo escalar $c \in \mathbb{F}$:
            <ol style="text-align: left; line-height: 2.5; margin-top: 15px;">
              <li><strong>Preserva la suma:</strong> $T(\mathbf{u} + \mathbf{v}) = T(\mathbf{u}) + T(\mathbf{v})$</li>
              <li><strong>Preserva el producto por escalar:</strong> $T(c\mathbf{u}) = cT(\mathbf{u})$</li>
            </ol>
            <p style="margin-top: 15px;"><strong>Equivalentemente:</strong> $T(c_1\mathbf{u} + c_2\mathbf{v}) = c_1T(\mathbf{u}) + c_2T(\mathbf{v})$</p>
          </div>
        </div>

        <h3>Propiedades Fundamentales</h3>
        
        <div class="card">
          <h4>üìã Consecuencias de la definici√≥n</h4>
          <ol style="text-align: left; line-height: 2; font-size: 0.95rem;">
            <li><strong>El cero se mapea al cero:</strong> $T(\mathbf{0}) = \mathbf{0}$</li>
            <li><strong>Preserva combinaciones lineales:</strong> $T(c_1\mathbf{v}_1 + \cdots + c_n\mathbf{v}_n) = c_1T(\mathbf{v}_1) + \cdots + c_nT(\mathbf{v}_n)$</li>
            <li><strong>Inverso aditivo:</strong> $T(-\mathbf{v}) = -T(\mathbf{v})$</li>
          </ol>
        </div>

        <div class="two-col">
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 1:</strong> Transformaci√≥n lineal en ‚Ñù¬≤<br><br>
              
              $T: \mathbb{R}^2 \to \mathbb{R}^2$ definida por:<br>
              $T(x, y) = (2x + y, x - y)$<br><br>
              
              <strong>Verificaci√≥n:</strong><br>
              Sean $\mathbf{u} = (x_1, y_1)$ y $\mathbf{v} = (x_2, y_2)$<br><br>
              
              1. $T(\mathbf{u} + \mathbf{v}) = T(x_1+x_2, y_1+y_2)$<br>
              $= (2(x_1+x_2) + (y_1+y_2), (x_1+x_2) - (y_1+y_2))$<br>
              $= (2x_1+y_1, x_1-y_1) + (2x_2+y_2, x_2-y_2)$<br>
              $= T(\mathbf{u}) + T(\mathbf{v})$ ‚úÖ<br><br>
              
              2. $T(c\mathbf{u}) = T(cx_1, cy_1)$<br>
              $= (2cx_1 + cy_1, cx_1 - cy_1)$<br>
              $= c(2x_1+y_1, x_1-y_1) = cT(\mathbf{u})$ ‚úÖ
            </div>
          </div>
          
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 2:</strong> NO es transformaci√≥n lineal<br><br>
              
              $F: \mathbb{R}^2 \to \mathbb{R}^2$ definida por:<br>
              $F(x, y) = (x + 1, y)$<br><br>
              
              <strong>Falla en:</strong><br>
              $F(\mathbf{0}) = F(0, 0) = (1, 0) \neq (0, 0)$<br><br>
              
              Como no mapea el cero al cero, NO es lineal ‚ùå<br><br>
              
              <strong>Nota:</strong> Esta es una traslaci√≥n, que NO preserva el origen.
            </div>
          </div>
        </div>

        <h3>Ejemplos Geom√©tricos en ‚Ñù¬≤</h3>
        
        <div class="three-col">
          <div class="card">
            <h4>üîÑ Rotaci√≥n</h4>
            <p style="font-size: 0.9rem;">√Ångulo Œ∏ en sentido antihorario:</p>
            $$T(x, y) = (x\cos\theta - y\sin\theta, x\sin\theta + y\cos\theta)$$
          </div>
          
          <div class="card">
            <h4>üîç Escalamiento</h4>
            <p style="font-size: 0.9rem;">Factor k en ambas direcciones:</p>
            $$T(x, y) = (kx, ky)$$
          </div>
          
          <div class="card">
            <h4>‚ÜîÔ∏è Reflexi√≥n</h4>
            <p style="font-size: 0.9rem;">Respecto al eje X:</p>
            $$T(x, y) = (x, -y)$$
          </div>
        </div>

        <h3>4.2 N√∫cleo e Imagen de una Transformaci√≥n Lineal</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-nucleo-imagen')">info ¬øPara qu√© sirven?</button>
        <div id="info-nucleo-imagen" class="info-box">
          <h4>üí° Importancia pr√°ctica</h4>
          <p><strong>N√∫cleo (Kernel):</strong> Mide qu√© tan "colapsada" es la transformaci√≥n. Vectores que se van a cero.</p>
          <p><strong>Imagen (Range):</strong> Muestra qu√© vectores son "alcanzables" despu√©s de la transformaci√≥n.</p>
          <p><strong>Teorema clave:</strong> dim(V) = dim(Ker(T)) + dim(Im(T))</p>
          <p>üëâ Son subespacios que caracterizan completamente la transformaci√≥n.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>N√∫cleo (Kernel):</strong><br>
            $$\text{Ker}(T) = \{\mathbf{v} \in V : T(\mathbf{v}) = \mathbf{0}\}$$
            <p style="margin-top: 10px;">El conjunto de todos los vectores que se mapean al vector cero.</p>
            <p><strong>Propiedad:</strong> Ker(T) es un subespacio de $V$</p>
          </div>
          
          <div class="definition-box">
            <strong>Imagen (Range):</strong><br>
            $$\text{Im}(T) = \{T(\mathbf{v}) : \mathbf{v} \in V\} = \{\mathbf{w} \in W : \exists \mathbf{v} \in V, T(\mathbf{v}) = \mathbf{w}\}$$
            <p style="margin-top: 10px;">El conjunto de todos los vectores "alcanzados" por la transformaci√≥n.</p>
            <p><strong>Propiedad:</strong> Im(T) es un subespacio de $W$</p>
          </div>
        </div>

        <div class="card">
          <div class="example-box">
            <strong>Ejemplo 3:</strong> Proyecci√≥n sobre el eje X<br><br>
            
            $T: \mathbb{R}^2 \to \mathbb{R}^2$ definida por $T(x, y) = (x, 0)$<br><br>
            
            <strong>N√∫cleo:</strong><br>
            $T(x, y) = (0, 0) \Rightarrow (x, 0) = (0, 0) \Rightarrow x = 0$<br>
            Por lo tanto: $\text{Ker}(T) = \{(0, y) : y \in \mathbb{R}\}$ (el eje Y)<br>
            dim(Ker(T)) = 1<br><br>
            
            <strong>Imagen:</strong><br>
            Im(T) = $\{(x, 0) : x \in \mathbb{R}\}$ (el eje X)<br>
            dim(Im(T)) = 1<br><br>
            
            <strong>Verificaci√≥n:</strong> dim(‚Ñù¬≤) = 2 = 1 + 1 = dim(Ker(T)) + dim(Im(T)) ‚úÖ
          </div>
        </div>

        <div class="two-col">
          <div class="card">
            <h4>üéØ Inyectividad</h4>
            <p style="font-size: 0.95rem; line-height: 1.8;">
              $T$ es <strong>inyectiva</strong> (uno a uno) si:<br>
              $T(\mathbf{u}) = T(\mathbf{v}) \Rightarrow \mathbf{u} = \mathbf{v}$
            </p>
            <p style="margin-top: 10px; font-size: 0.95rem;">
              <strong>Equivalente:</strong> Ker(T) = {0}
            </p>
          </div>
          
          <div class="card">
            <h4>üéØ Sobreyectividad</h4>
            <p style="font-size: 0.95rem; line-height: 1.8;">
              $T$ es <strong>sobreyectiva</strong> (onto) si:<br>
              Im(T) = W
            </p>
            <p style="margin-top: 10px; font-size: 0.95rem;">
              <strong>Equivalente:</strong> Todo vector en W es imagen de alg√∫n vector en V
            </p>
          </div>
        </div>

        <h3>4.3 Representaci√≥n Matricial de una Transformaci√≥n Lineal</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-matriz')">info ¬øPor qu√© matrices?</button>
        <div id="info-matriz" class="info-box">
          <h4>üí° Conexi√≥n fundamental</h4>
          <p><strong>Toda transformaci√≥n lineal</strong> entre espacios de dimensi√≥n finita se puede representar mediante una matriz.</p>
          <p><strong>Ventaja:</strong> Convierte problemas abstractos en c√°lculos concretos con matrices.</p>
          <p><strong>Aplicaci√≥n:</strong> Computadoras trabajan con matrices, no con transformaciones abstractas.</p>
          <p>üëâ Una vez elegida una base, la transformaci√≥n = matriz.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Teorema de Representaci√≥n Matricial:</strong><br>
            Sea $T: V \to W$ una transformaci√≥n lineal, donde dim(V) = n y dim(W) = m.<br>
            Sean $\mathcal{B} = \{\mathbf{v}_1, \ldots, \mathbf{v}_n\}$ base de V y $\mathcal{C} = \{\mathbf{w}_1, \ldots, \mathbf{w}_m\}$ base de W.<br><br>
            
            Entonces existe una √∫nica matriz $A$ de tama√±o $m \times n$ tal que:
            $$[T(\mathbf{v})]_{\mathcal{C}} = A[\mathbf{v}]_{\mathcal{B}}$$
            
            <p style="margin-top: 15px;"><strong>Construcci√≥n de A:</strong> Las columnas de A son las coordenadas de $T(\mathbf{v}_i)$ respecto a la base $\mathcal{C}$:</p>
            $$A = [T(\mathbf{v}_1)]_{\mathcal{C}} \quad [T(\mathbf{v}_2)]_{\mathcal{C}} \quad \cdots \quad [T(\mathbf{v}_n)]_{\mathcal{C}}$$
          </div>
        </div>

        <div class="card">
          <div class="example-box">
            <strong>Ejemplo 4:</strong> Matriz de transformaci√≥n en ‚Ñù¬≤<br><br>
            
            $T: \mathbb{R}^2 \to \mathbb{R}^2$ definida por $T(x, y) = (2x + y, x - y)$<br><br>
            
            <strong>Usando la base est√°ndar:</strong> $\mathcal{B} = \{(1,0), (0,1)\}$<br><br>
            
            $T(1, 0) = (2, 1)$<br>
            $T(0, 1) = (1, -1)$<br><br>
            
            <strong>Matriz:</strong><br>
            $$A = \begin{pmatrix} 2 & 1 \\ 1 & -1 \end{pmatrix}$$<br>
            
            <strong>Verificaci√≥n:</strong><br>
            $$\begin{pmatrix} 2 & 1 \\ 1 & -1 \end{pmatrix} \begin{pmatrix} x \\ y \end{pmatrix} = \begin{pmatrix} 2x + y \\ x - y \end{pmatrix} = T(x, y)$$ ‚úÖ
          </div>
        </div>

        <h3>Propiedades de la Representaci√≥n Matricial</h3>
        
        <div class="card">
          <h4>üîó Operaciones con transformaciones</h4>
          <ol style="text-align: left; line-height: 2.2; font-size: 0.95rem;">
            <li><strong>Composici√≥n:</strong> Si $T: U \to V$ y $S: V \to W$, entonces $[S \circ T] = [S][T]$</li>
            <li><strong>Suma:</strong> $[T_1 + T_2] = [T_1] + [T_2]$</li>
            <li><strong>M√∫ltiplo escalar:</strong> $[cT] = c[T]$</li>
            <li><strong>Identidad:</strong> La transformaci√≥n identidad se representa por la matriz identidad</li>
            <li><strong>Inversa:</strong> Si T es invertible, entonces $[T^{-1}] = [T]^{-1}$</li>
          </ol>
        </div>

        <div class="two-col">
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 5:</strong> Rotaci√≥n 90¬∞<br><br>
              
              Rotaci√≥n antihoraria de 90¬∞ en ‚Ñù¬≤:<br><br>
              
              $T(1, 0) = (0, 1)$<br>
              $T(0, 1) = (-1, 0)$<br><br>
              
              <strong>Matriz:</strong><br>
              $$A = \begin{pmatrix} 0 & -1 \\ 1 & 0 \end{pmatrix}$$<br>
              
              <strong>Prueba:</strong> $T(1, 1) = (0, 1) + (-1, 0) = (-1, 1)$ ‚úÖ
            </div>
          </div>
          
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 6:</strong> Reflexi√≥n sobre eje X<br><br>
              
              Reflexi√≥n respecto al eje X:<br><br>
              
              $T(1, 0) = (1, 0)$<br>
              $T(0, 1) = (0, -1)$<br><br>
              
              <strong>Matriz:</strong><br>
              $$A = \begin{pmatrix} 1 & 0 \\ 0 & -1 \end{pmatrix}$$<br>
              
              <strong>Prueba:</strong> $T(3, 4) = (3, -4)$ ‚úÖ
            </div>
          </div>
        </div>

        <h3>Relaci√≥n entre N√∫cleo/Imagen y Matriz</h3>
        
        <div class="card">
          <div class="definition-box">
            <strong>Para la matriz A de una transformaci√≥n T:</strong>
            <ul style="text-align: left; line-height: 2; margin-top: 10px;">
              <li><strong>N√∫cleo:</strong> Ker(T) = espacio nulo de A = {x : Ax = 0}</li>
              <li><strong>Imagen:</strong> Im(T) = espacio columna de A</li>
              <li><strong>Rango:</strong> dim(Im(T)) = rango(A)</li>
              <li><strong>Nulidad:</strong> dim(Ker(T)) = nulidad(A) = n - rango(A)</li>
            </ul>
            
            <p style="margin-top: 15px; padding: 15px; background: rgba(255, 214, 10, 0.1); border-radius: 8px;">
              <strong>Teorema del rango-nulidad:</strong><br>
              dim(V) = dim(Ker(T)) + dim(Im(T)) = nulidad(A) + rango(A)
            </p>
          </div>
        </div>

        <!-- Quiz interactivo Semana 11 -->
        <div class="quiz-container">
          <h3>üß† Autoevaluaci√≥n - Semana 11</h3>
          
          <div class="quiz-question">
            1. Una transformaci√≥n T es lineal si preserva:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Solo la suma de vectores</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">La suma y el producto por escalar</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Solo el producto por escalar</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El producto punto de vectores</div>
          </div>
          
          <div class="quiz-question">
            2. El n√∫cleo de una transformaci√≥n lineal T es:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El conjunto de todos los vectores en el dominio</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">El conjunto de vectores que se mapean al vector cero</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El conjunto de todos los vectores en el codominio</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El conjunto de vectores ortogonales</div>
          </div>
          
          <div class="quiz-question">
            3. Si T: ‚Ñù¬≥ ‚Üí ‚Ñù¬≤, la matriz que representa a T tiene tama√±o:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">3√ó3</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">2√ó3</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">3√ó2</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">2√ó2</div>
          </div>
          
          <div class="quiz-question">
            4. Una transformaci√≥n es inyectiva si y solo si:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Su imagen es todo el codominio</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Su n√∫cleo contiene solo el vector cero</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Su matriz es diagonal</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Preserva productos internos</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- SLIDE 3: SEMANA 12 - APLICACIONES DE TRANSFORMACIONES LINEALES -->
  <div class="slide" id="slide-3">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 12</div>
        <h2>4.4 Aplicaciones de las Transformaciones Lineales</h2>
        
        <div class="citation">
          "Las transformaciones lineales son la base de pr√°cticamente todas las aplicaciones modernas del √°lgebra lineal: desde la renderizaci√≥n 3D en videojuegos hasta el an√°lisis de componentes principales en ciencia de datos." 
          <strong>‚Äî Strang, G. (2019)</strong>
        </div>

        <h3>4.4.1 Gr√°ficos por Computadora y Videojuegos</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-graficos')">info ¬øC√≥mo funcionan los gr√°ficos 3D?</button>
        <div id="info-graficos" class="info-box">
          <h4>üí° Transformaciones en videojuegos</h4>
          <p><strong>Cada objeto 3D</strong> se representa como un conjunto de vectores (v√©rtices).</p>
          <p><strong>Para mover/rotar/escalar objetos:</strong> Se aplican transformaciones lineales mediante multiplicaci√≥n de matrices.</p>
          <p><strong>Pipeline gr√°fico:</strong> Modelo ‚Üí Vista ‚Üí Proyecci√≥n (todas son transformaciones lineales)</p>
          <p>üëâ Los motores gr√°ficos modernos (Unity, Unreal) usan estas matem√°ticas constantemente.</p>
        </div>
        
        <div class="card">
          <h4>üéÆ Transformaciones Fundamentales en 3D</h4>
          
          <div class="two-col">
            <div>
              <strong>1. Traslaci√≥n (af√≠n, no lineal):</strong><br>
              Se usa matriz homog√©nea 4√ó4:<br>
              $$\begin{pmatrix} 1 & 0 & 0 & t_x \\ 0 & 1 & 0 & t_y \\ 0 & 0 & 1 & t_z \\ 0 & 0 & 0 & 1 \end{pmatrix}$$
            </div>
            
            <div>
              <strong>2. Escalamiento:</strong><br>
              $$\begin{pmatrix} s_x & 0 & 0 \\ 0 & s_y & 0 \\ 0 & 0 & s_z \end{pmatrix}$$
            </div>
          </div>
          
          <div class="two-col">
            <div>
              <strong>3. Rotaci√≥n alrededor del eje Z:</strong><br>
              $$\begin{pmatrix} \cos\theta & -\sin\theta & 0 \\ \sin\theta & \cos\theta & 0 \\ 0 & 0 & 1 \end{pmatrix}$$
            </div>
            
            <div>
              <strong>4. Proyecci√≥n perspectiva:</strong><br>
              Convierte 3D ‚Üí 2D para mostrar en pantalla<br>
              (matriz compleja 4√ó4)
            </div>
          </div>
        </div>

        <div class="card">
          <div class="example-box">
            <strong>Ejemplo pr√°ctico:</strong> Rotar un tri√°ngulo 45¬∞ en el plano<br><br>
            
            <strong>V√©rtices originales:</strong><br>
            A = (1, 0), B = (0, 1), C = (1, 1)<br><br>
            
            <strong>Matriz de rotaci√≥n 45¬∞:</strong><br>
            $$R = \begin{pmatrix} \frac{\sqrt{2}}{2} & -\frac{\sqrt{2}}{2} \\ \frac{\sqrt{2}}{2} & \frac{\sqrt{2}}{2} \end{pmatrix}$$<br>
            
            <strong>Nuevas posiciones:</strong><br>
            $A' = R \cdot A = (\frac{\sqrt{2}}{2}, \frac{\sqrt{2}}{2}) \approx (0.71, 0.71)$<br>
            $B' = R \cdot B = (-\frac{\sqrt{2}}{2}, \frac{\sqrt{2}}{2}) \approx (-0.71, 0.71)$<br>
            $C' = R \cdot C = (0, \sqrt{2}) \approx (0, 1.41)$
          </div>
        </div>

        <h3>4.4.2 Procesamiento de Im√°genes Digitales</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-imagenes')">info ¬øLas im√°genes son matrices?</button>
        <div id="info-imagenes" class="info-box">
          <h4>üí° Im√°genes como matrices</h4>
          <p><strong>Una imagen digital</strong> es una matriz donde cada elemento es la intensidad de un p√≠xel.</p>
          <p><strong>Operaciones comunes:</strong></p>
          <ul style="text-align: left; line-height: 1.8;">
            <li>Filtros (blur, sharpen) = convoluci√≥n (transformaci√≥n lineal)</li>
            <li>Rotaci√≥n de imagen = transformaci√≥n de coordenadas</li>
            <li>Compresi√≥n (JPEG) = transformadas (DCT, wavelets)</li>
          </ul>
          <p>üëâ Instagram, Photoshop, c√°maras: TODO usa √°lgebra lineal.</p>
        </div>
        
        <div class="three-col">
          <div class="card">
            <h4>üì∏ Filtro de Desenfoque</h4>
            <p style="font-size: 0.9rem;">Matriz de convoluci√≥n 3√ó3:</p>
            $$\frac{1}{9}\begin{pmatrix} 1 & 1 & 1 \\ 1 & 1 & 1 \\ 1 & 1 & 1 \end{pmatrix}$$
            <p style="font-size: 0.85rem; margin-top: 10px;">Promedia cada p√≠xel con sus vecinos</p>
          </div>
          
          <div class="card">
            <h4>üîç Detecci√≥n de Bordes</h4>
            <p style="font-size: 0.9rem;">Operador Sobel:</p>
            $$\begin{pmatrix} -1 & 0 & 1 \\ -2 & 0 & 2 \\ -1 & 0 & 1 \end{pmatrix}$$
            <p style="font-size: 0.85rem; margin-top: 10px;">Detecta cambios bruscos de intensidad</p>
          </div>
          
          <div class="card">
            <h4>‚ú® Afilado (Sharpen)</h4>
            <p style="font-size: 0.9rem;">Matriz de afilado:</p>
            $$\begin{pmatrix} 0 & -1 & 0 \\ -1 & 5 & -1 \\ 0 & -1 & 0 \end{pmatrix}$$
            <p style="font-size: 0.85rem; margin-top: 10px;">Resalta detalles finos</p>
          </div>
        </div>

        <h3>4.4.3 Compresi√≥n de Im√°genes: SVD</h3>
        
        <div class="card">
          <div class="definition-box">
            <strong>Descomposici√≥n en Valores Singulares (SVD):</strong><br>
            Toda matriz $A$ de tama√±o $m \times n$ se puede descomponer como:
            $$A = U\Sigma V^T$$
            donde:
            <ul style="text-align: left; line-height: 2; margin-top: 10px;">
              <li>$U$ es $m \times m$ ortogonal</li>
              <li>$\Sigma$ es $m \times n$ diagonal (valores singulares)</li>
              <li>$V$ es $n \times n$ ortogonal</li>
            </ul>
            
            <p style="margin-top: 15px;"><strong>Aplicaci√≥n en compresi√≥n:</strong> Usar solo los $k$ mayores valores singulares para aproximar A:<br>
            $A_k = U_k\Sigma_kV_k^T$ (mucho m√°s compacto si k << min(m,n))</p>
          </div>
        </div>

        <h3>4.4.4 An√°lisis de Componentes Principales (PCA)</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-pca')">info ¬øQu√© es PCA?</button>
        <div id="info-pca" class="info-box">
          <h4>üí° Reducci√≥n de dimensionalidad</h4>
          <p><strong>Problema:</strong> Tienes datos con muchas variables (alta dimensi√≥n) y quieres visualizarlos o procesarlos m√°s f√°cilmente.</p>
          <p><strong>Soluci√≥n PCA:</strong> Encontrar las direcciones de m√°xima varianza y proyectar los datos ah√≠.</p>
          <p><strong>Aplicaciones:</strong></p>
          <ul style="text-align: left; line-height: 1.8;">
            <li>Reconocimiento facial (eigenfaces)</li>
            <li>An√°lisis de datos gen√≥micos</li>
            <li>Compresi√≥n de datos</li>
            <li>Machine learning (preprocesamiento)</li>
          </ul>
          <p>üëâ Es una transformaci√≥n lineal √≥ptima para reducir dimensi√≥n preservando informaci√≥n.</p>
        </div>
        
        <div class="card">
          <h4>üî¨ Algoritmo PCA (simplificado)</h4>
          <ol style="text-align: left; line-height: 2.2; font-size: 0.95rem;">
            <li><strong>Centrar los datos:</strong> Restar la media a cada variable</li>
            <li><strong>Matriz de covarianza:</strong> $C = \frac{1}{n}X^TX$</li>
            <li><strong>Calcular eigenvectores:</strong> Resolver $C\mathbf{v} = \lambda\mathbf{v}$</li>
            <li><strong>Ordenar por eigenvalor:</strong> Los mayores representan m√°s varianza</li>
            <li><strong>Proyectar:</strong> $Y = XP$ donde $P$ contiene los $k$ principales eigenvectores</li>
          </ol>
        </div>

        <div class="card">
          <div class="example-box">
            <strong>Ejemplo:</strong> Datos 3D ‚Üí 2D con PCA<br><br>
            
            Supongamos que tienes puntos en ‚Ñù¬≥ distribuidos principalmente en un plano.<br><br>
            
            <strong>PCA encuentra:</strong><br>
            ‚Ä¢ Componente principal 1: Direcci√≥n de mayor varianza en el plano<br>
            ‚Ä¢ Componente principal 2: Segunda direcci√≥n (perpendicular a la primera)<br>
            ‚Ä¢ Componente principal 3: Perpendicular al plano (varianza casi cero)<br><br>
            
            <strong>Reducci√≥n:</strong> Proyectar sobre los 2 primeros componentes pierde poca informaci√≥n.<br>
            Resultado: Visualizaci√≥n 2D que captura la esencia de los datos 3D.
          </div>
        </div>

        <h3>4.4.5 Sistemas Din√°micos Discretos</h3>
        
        <div class="card">
          <div class="definition-box">
            <strong>Modelo:</strong> $\mathbf{x}_{n+1} = A\mathbf{x}_n$<br><br>
            
            Donde $\mathbf{x}_n$ es el estado del sistema en el tiempo $n$.<br><br>
            
            <strong>Soluci√≥n general:</strong> $\mathbf{x}_n = A^n\mathbf{x}_0$<br><br>
            
            <strong>Comportamiento a largo plazo:</strong> Determinado por los eigenvalores de $A$:
            <ul style="text-align: left; line-height: 2; margin-top: 10px;">
              <li>Si $|\lambda_{\max}| < 1$: El sistema tiende a cero (estable)</li>
              <li>Si $|\lambda_{\max}| = 1$: Estado estacionario o peri√≥dico</li>
              <li>Si $|\lambda_{\max}| > 1$: El sistema crece sin l√≠mite (inestable)</li>
            </ul>
          </div>
        </div>

        <div class="two-col">
          <div class="card">
            <div class="example-box">
              <strong>Aplicaci√≥n:</strong> Modelo depredador-presa<br><br>
              
              $x_n$ = poblaci√≥n de conejos<br>
              $y_n$ = poblaci√≥n de zorros<br><br>
              
              $$\begin{pmatrix} x_{n+1} \\ y_{n+1} \end{pmatrix} = \begin{pmatrix} 1.1 & -0.2 \\ 0.1 & 0.9 \end{pmatrix} \begin{pmatrix} x_n \\ y_n \end{pmatrix}$$<br>
              
              El an√°lisis de eigenvalores predice oscilaciones peri√≥dicas.
            </div>
          </div>
          
          <div class="card">
            <div class="example-box">
              <strong>Aplicaci√≥n:</strong> Cadenas de Markov<br><br>
              
              Modela sistemas con estados discretos y transiciones probabil√≠sticas.<br><br>
              
              <strong>Ejemplo:</strong> Clima (soleado/nublado)<br>
              Matriz de transici√≥n describe probabilidades de cambio.<br><br>
              
              Estado estacionario = eigenvector con eigenvalor 1.
            </div>
          </div>
        </div>

        <h3>4.4.6 Redes Neuronales y Deep Learning</h3>
        
        <div class="card">
          <h4>ü§ñ Transformaciones en cada capa</h4>
          <p style="font-size: 0.95rem; line-height: 1.8;">
            Cada capa de una red neuronal aplica una transformaci√≥n <strong>casi lineal</strong>:
          </p>
          $$\mathbf{y} = \sigma(W\mathbf{x} + \mathbf{b})$$
          <p style="margin-top: 15px; font-size: 0.95rem;">
            Donde:<br>
            ‚Ä¢ $W$ es la matriz de pesos (transformaci√≥n lineal)<br>
            ‚Ä¢ $\mathbf{b}$ es el sesgo (traslaci√≥n)<br>
            ‚Ä¢ $\sigma$ es la funci√≥n de activaci√≥n no lineal (ReLU, sigmoid, etc.)
          </p>
          
          <p style="margin-top: 20px; padding: 15px; background: rgba(100, 150, 250, 0.1); border-radius: 8px; font-size: 0.95rem;">
            <strong>Clave:</strong> El "aprendizaje profundo" consiste en optimizar las matrices $W$ de m√∫ltiples capas para aproximar funciones complejas mediante composici√≥n de transformaciones lineales y no lineales.
          </p>
        </div>

        <h3>üìä Otras Aplicaciones Importantes</h3>
        
        <div class="three-col">
          <div class="card">
            <h4>üì° Procesamiento de Se√±ales</h4>
            <p style="font-size: 0.9rem;">Transformada de Fourier (lineal) para an√°lisis de frecuencias</p>
          </div>
          
          <div class="card">
            <h4>üèóÔ∏è Ingenier√≠a Estructural</h4>
            <p style="font-size: 0.9rem;">An√°lisis de esfuerzos y deformaciones mediante matrices de rigidez</p>
          </div>
          
          <div class="card">
            <h4>üí∞ Econom√≠a</h4>
            <p style="font-size: 0.9rem;">Modelos input-output de Leontief para analizar econom√≠as</p>
          </div>
        </div>

        <div class="three-col">
          <div class="card">
            <h4>üî¨ Qu√≠mica Cu√°ntica</h4>
            <p style="font-size: 0.9rem;">Operadores cu√°nticos son transformaciones lineales en espacios de Hilbert</p>
          </div>
          
          <div class="card">
            <h4>üåê PageRank de Google</h4>
            <p style="font-size: 0.9rem;">Ranking de p√°ginas web basado en eigenvectores de matriz de enlaces</p>
          </div>
          
          <div class="card">
            <h4>üéµ Compresi√≥n de Audio</h4>
            <p style="font-size: 0.9rem;">MP3 usa transformadas (lineales) para comprimir sin p√©rdida perceptible</p>
          </div>
        </div>

        <div style="background: linear-gradient(135deg, rgba(255, 214, 10, 0.1), rgba(100, 150, 250, 0.1)); padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary); margin: 30px 0;">
          <h3 style="color: var(--primary); margin-bottom: 15px;">üéØ Actividad 4 - Transformaciones Lineales (15 puntos)</h3>
          <p><strong>Tipo:</strong> Proyecto aplicado individual</p>
          
          <p><strong>Objetivo:</strong> Implementar y aplicar transformaciones lineales en un contexto pr√°ctico.</p>
          
          <p><strong>Opciones de proyecto (elige UNA):</strong></p>
          <ol style="text-align: left; line-height: 2;">
            <li><strong>Opci√≥n A - Gr√°ficos:</strong> Crear un programa que aplique rotaciones, escalamientos y reflexiones a figuras 2D
              <ul style="margin-top: 8px;">
                <li>Visualizaci√≥n gr√°fica de las transformaciones</li>
                <li>Implementaci√≥n de composici√≥n de transformaciones</li>
                <li>Al menos 5 transformaciones diferentes</li>
              </ul>
            </li>
            <li><strong>Opci√≥n B - Procesamiento de im√°genes:</strong> Aplicar filtros lineales a im√°genes digitales
              <ul style="margin-top: 8px;">
                <li>Implementar al menos 3 filtros (blur, sharpen, edge detection)</li>
                <li>Comparaci√≥n visual antes/despu√©s</li>
                <li>An√°lisis del efecto de cada filtro</li>
              </ul>
            </li>
            <li><strong>Opci√≥n C - PCA:</strong> An√°lisis de componentes principales en un dataset real
              <ul style="margin-top: 8px;">
                <li>Dataset con al menos 5 variables</li>
                <li>Reducci√≥n de dimensionalidad</li>
                <li>Visualizaci√≥n 2D de los resultados</li>
                <li>Interpretaci√≥n de componentes principales</li>
              </ul>
            </li>
          </ol>
          
          <p style="margin-top: 15px;"><strong>Entregables:</strong></p>
          <ul style="text-align: left; line-height: 1.8;">
            <li>C√≥digo fuente (Python, MATLAB o similar)</li>
            <li>Reporte t√©cnico (m√°x. 8 p√°ginas) incluyendo:
              <ul>
                <li>Marco te√≥rico de las transformaciones usadas</li>
                <li>Descripci√≥n de la implementaci√≥n</li>
                <li>Resultados y visualizaciones</li>
                <li>An√°lisis y conclusiones</li>
              </ul>
            </li>
            <li>README con instrucciones de ejecuci√≥n</li>
          </ul>
          
          <p style="margin-top: 15px;"><strong>Criterios de evaluaci√≥n:</strong></p>
          <ul style="text-align: left; line-height: 1.8;">
            <li>Correctitud matem√°tica de las transformaciones (5 pts)</li>
            <li>Calidad del c√≥digo y documentaci√≥n (4 pts)</li>
            <li>An√°lisis y conclusiones en el reporte (4 pts)</li>
            <li>Claridad de visualizaciones (2 pts)</li>
          </ul>
          
          <p style="margin-top: 15px; font-weight: bold;">üìÖ Consulta el aula virtual para la fecha l√≠mite de entrega</p>
        </div>

        <!-- Quiz interactivo Semana 12 -->
        <div class="quiz-container">
          <h3>üß† Autoevaluaci√≥n - Semana 12</h3>
          
          <div class="quiz-question">
            1. En gr√°ficos por computadora, las transformaciones geom√©tricas se implementan mediante:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Funciones trigonom√©tricas complejas</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Multiplicaci√≥n de matrices</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Operaciones con vectores solamente</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Algoritmos de b√∫squeda</div>
          </div>
          
          <div class="quiz-question">
            2. PCA (An√°lisis de Componentes Principales) se basa en:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Regresi√≥n lineal m√∫ltiple</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Eigenvalores y eigenvectores de la matriz de covarianza</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Determinantes de matrices</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Sistemas de ecuaciones lineales</div>
          </div>
          
          <div class="quiz-question">
            3. Los filtros de procesamiento de im√°genes (blur, sharpen) son ejemplos de:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Transformaciones no lineales</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Convoluciones (transformaciones lineales)</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Operaciones l√≥gicas</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Algoritmos de compresi√≥n</div>
          </div>
          
          <div class="quiz-question">
            4. En redes neuronales, la multiplicaci√≥n Wx + b representa:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Una funci√≥n de p√©rdida</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Un algoritmo de backpropagation</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Una transformaci√≥n af√≠n (lineal + traslaci√≥n)</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Una funci√≥n de activaci√≥n</div>
          </div>
        </div>

        <div class="card" style="background: var(--grad-primary); text-align: center; padding: 40px; margin-top: 40px;">
          <h2 style="color: white; font-size: 2rem; margin-bottom: 20px;">üéì ¬°Felicidades!</h2>
          <p style="color: white; font-size: 1.2rem; line-height: 1.8;">
            Has completado la Unidad IV: Transformaciones Lineales.<br>
            Ahora comprendes c√≥mo el √°lgebra lineal impulsa la tecnolog√≠a moderna:<br>
            desde videojuegos hasta inteligencia artificial.
          </p>
          <p style="color: white; font-weight: bold; margin-top: 30px; font-size: 1.1rem;">
            Universidad del SABES - 2025
          </p>
          <p style="color: white; margin-top: 20px; font-size: 1rem;">
            üéâ ¬°Has completado el curso completo de √Ålgebra Lineal! üéâ
          </p>
        </div>
      </div>
    </div>
  </div>

</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Eliminaci√≥n gaussiana (Gauss)</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">M√©todo gr√°fico</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Sustituci√≥n manual</div>
          </div>
          
          <div class="quiz-question">
            4. ¬øQu√© aplicaci√≥n NO utiliza sistemas de ecuaciones lineales?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">An√°lisis de circuitos el√©ctricos</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Redes neuronales artificiales</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Filosof√≠a moral</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Balanceo de reacciones qu√≠micas</div>
          </div>
        </div>

        <div class="card" style="background: var(--grad-primary); text-align: center; padding: 40px; margin-top: 40px;">
          <h2 style="color: white; font-size: 2rem; margin-bottom: 20px;">üéì ¬°Felicidades!</h2>
          <p style="color: white; font-size: 1.2rem; line-height: 1.8;">
            Has completado la Unidad II: Sistemas de Ecuaciones Lineales.<br>
            Ahora dominas los m√©todos fundamentales para resolver sistemas<br>
            y sus aplicaciones en ingenier√≠a, ciencia e inteligencia artificial.
          </p>
          <p style="color: white; font-weight: bold; margin-top: 30px; font-size: 1.1rem;">
            Universidad del SABES - 2025
          </p>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- ======= CONTROLES DE NAVEGACI√ìN INFERIOR ======= -->
<div class="nav-controls" role="navigation" aria-label="Navegaci√≥n de diapositivas">
  <button class="nav-btn" onclick="goToStart()" id="startBtn" aria-label="Ir al inicio">
    <span aria-hidden="true">‚èÆ</span> Inicio
  </button>
  <button class="nav-btn" onclick="previousSlide()" id="prevBtn" aria-label="Diapositiva anterior">
    <span aria-hidden="true">‚óÄ</span> Atr√°s
  </button>
  <button class="nav-btn" onclick="nextSlide()" id="nextBtn" aria-label="Siguiente diapositiva">
    Adelante <span aria-hidden="true">‚ñ∂</span>
  </button>
  <button class="nav-btn" onclick="goToEnd()" id="endBtn" aria-label="Ir al final">
    Fin <span aria-hidden="true">‚è≠</span>
  </button>
</div>

<!-- ======= JAVASCRIPT ======= -->
<script>
// ========== VARIABLES GLOBALES ==========
let currentSlide = 0;
let zoom = 1;
const totalSlides = document.querySelectorAll('.slide').length;

// Variable para verificar si MathJax est√° listo
window.mathJaxReady = false;

// Variables para Three.js
let scene, camera, renderer, cube, axes, grid;
let animationId = null;
let isAnimating = false;

// ========== INICIALIZACI√ìN ==========
document.addEventListener('DOMContentLoaded', () => {
  showSlide(0);
  initializeParticles();
  initializeThreeJS();
  updateProgress();
  console.log('‚úÖ Curso de √Ålgebra Lineal - Universidad del SABES');
  console.log('üìä Total de slides:', totalSlides);
});

// ========== NAVEGACI√ìN ==========
function showSlide(index) {
  if (index < 0) index = 0;
  if (index >= totalSlides) index = totalSlides - 1;
  
  currentSlide = index;
  
  const slides = document.querySelectorAll('.slide');
  slides.forEach((slide, i) => {
    slide.classList.remove('active', 'previous');
    if (i < currentSlide) {
      slide.classList.add('previous');
    }
  });
  
  slides[currentSlide].classList.add('active');
  
  updateNavigationButtons();
  updateProgress();
  
  // Renderizar MathJax solo si est√° listo
  if (window.mathJaxReady && typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
    MathJax.typesetPromise([slides[currentSlide]]).catch((err) => console.log('MathJax error:', err));
  }
}

function goToSlide(index) {
  showSlide(index);
}

function nextSlide() {
  if (currentSlide < totalSlides - 1) {
    showSlide(currentSlide + 1);
  }
}

function previousSlide() {
  if (currentSlide > 0) {
    showSlide(currentSlide - 1);
  }
}

function goToStart() {
  showSlide(0);
}

function goToEnd() {
  showSlide(totalSlides - 1);
}

function updateNavigationButtons() {
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const startBtn = document.getElementById('startBtn');
  const endBtn = document.getElementById('endBtn');
  
  prevBtn.disabled = currentSlide === 0;
  startBtn.disabled = currentSlide === 0;
  nextBtn.disabled = currentSlide === totalSlides - 1;
  endBtn.disabled = currentSlide === totalSlides - 1;
}

function updateProgress() {
  const progressBar = document.getElementById('progress');
  const progressText = document.getElementById('userProgress');
  const progressContainer = document.querySelector('.progress-bar');
  const progress = ((currentSlide + 1) / totalSlides) * 100;
  
  progressBar.style.width = progress + '%';
  progressText.textContent = Math.round(progress) + '%';
  
  // Actualizar atributos ARIA
  if (progressContainer) {
    progressContainer.setAttribute('aria-valuenow', Math.round(progress));
    progressContainer.setAttribute('aria-valuetext', `Diapositiva ${currentSlide + 1} de ${totalSlides}`);
  }
}

// ========== BARRAS LATERALES ==========
document.getElementById('btn-home').onclick = () => goToStart();
document.getElementById('btn-prev').onclick = () => previousSlide();
document.getElementById('btn-next').onclick = () => nextSlide();

document.getElementById('btn-access').onclick = () => {
  document.getElementById('accessibilityModal').classList.add('active');
};

document.getElementById('btn-help').onclick = () => {
  alert('‚ùì Ayuda de Navegaci√≥n:\n\nüñ±Ô∏è Usa los botones laterales o inferiores\n‚å®Ô∏è Teclas: ‚Üê Atr√°s | ‚Üí Adelante\nüîç Botones + y - para Zoom\n‚õ∂ Pantalla completa disponible\nüí¨ Modal para m√°s informaci√≥n');
};

// Tema
const themeBtn = document.getElementById('btn-theme');
const toggleTheme = () => {
  const html = document.documentElement;
  const currentTheme = html.getAttribute('data-theme');
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', newTheme);
  document.body.setAttribute('data-theme', newTheme);
  themeBtn.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
};
themeBtn.onclick = toggleTheme;

// Zoom
document.getElementById('btn-zoom-in').onclick = () => {
  zoom = Math.min(2, zoom + 0.1);
  document.body.style.transform = `scale(${zoom})`;
  document.body.style.transformOrigin = 'center top';
};

document.getElementById('btn-zoom-out').onclick = () => {
  zoom = Math.max(0.8, zoom - 0.1);
  document.body.style.transform = `scale(${zoom})`;
  document.body.style.transformOrigin = 'center top';
};

// Pantalla completa
document.getElementById('btn-fullscreen').onclick = () => {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
  } else {
    document.exitFullscreen();
  }
};

// Modal
document.getElementById('btn-modal').onclick = () => {
  document.getElementById('infoModal').classList.add('active');
};

function cerrarModal() {
  document.getElementById('infoModal').classList.remove('active');
}

function cerrarModalAccesibilidad() {
  document.getElementById('accessibilityModal').classList.remove('active');
}

document.getElementById('btn-info').onclick = () => {
  alert('‚ÑπÔ∏è Informaci√≥n del Curso:\n\nüìö √Ålgebra Lineal - Unidad I\nüéì Universidad del SABES\nüìÖ 2025\n\n‚ú® Proyecto educativo interactivo\n‚úÖ Cumple WCAG 2.2 AA\nüåê Dise√±o responsive');
};

document.getElementById('btn-exit').onclick = () => {
  if (confirm('‚ùå ¬øDeseas salir de la presentaci√≥n?')) {
    window.close();
  }
};

// ========== NAVEGACI√ìN POR TECLADO ==========
document.addEventListener('keydown', (e) => {
  // Evitar navegaci√≥n si hay un modal abierto (excepto Escape)
  const modalActive = document.querySelector('.modal.active');
  if (modalActive && e.key !== 'Escape') {
    return;
  }
  
  if (e.key === 'ArrowRight' || e.key === 'PageDown' || e.key === ' ' || e.key === 'Enter') {
    e.preventDefault();
    nextSlide();
  } else if (e.key === 'ArrowLeft' || e.key === 'PageUp') {
    e.preventDefault();
    previousSlide();
  } else if (e.key === 'Home') {
    e.preventDefault();
    goToStart();
  } else if (e.key === 'End') {
    e.preventDefault();
    goToEnd();
  } else if (e.key === 'Escape') {
    cerrarModal();
    cerrarModalAccesibilidad();
  } else if (e.key === 'f' || e.key === 'F') {
    e.preventDefault();
    if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen();
    } else {
      document.exitFullscreen();
    }
  } else if (e.key === '+' || e.key === '=') {
    e.preventDefault();
    zoom = Math.min(2, zoom + 0.1);
    document.body.style.transform = `scale(${zoom})`;
    document.body.style.transformOrigin = 'center top';
  } else if (e.key === '-' || e.key === '_') {
    e.preventDefault();
    zoom = Math.max(0.8, zoom - 0.1);
    document.body.style.transform = `scale(${zoom})`;
    document.body.style.transformOrigin = 'center top';
  } else if (e.key === '0') {
    e.preventDefault();
    zoom = 1;
    document.body.style.transform = `scale(${zoom})`;
    document.body.style.transformOrigin = 'center top';
  } else if (e.key >= '0' && e.key <= '7') {
    // Navegaci√≥n directa a slides con teclas num√©ricas
    e.preventDefault();
    const slideNumber = parseInt(e.key);
    if (slideNumber < totalSlides) {
      goToSlide(slideNumber);
    }
  }
});

// ========== PART√çCULAS ANIMADAS ==========
function initializeParticles() {
  const particlesContainer = document.getElementById('particles');
  if (!particlesContainer) return;
  
  for (let i = 0; i < 20; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = Math.random() * 100 + '%';
    particle.style.animationDelay = Math.random() * 8 + 's';
    particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
    particlesContainer.appendChild(particle);
  }
}

// ========== CALCULADORA MATRICIAL ==========
function calculateMatrixOperation(operation) {
  const a11 = parseFloat(document.getElementById('a11').value) || 0;
  const a12 = parseFloat(document.getElementById('a12').value) || 0;
  const a21 = parseFloat(document.getElementById('a21').value) || 0;
  const a22 = parseFloat(document.getElementById('a22').value) || 0;
  
  const b11 = parseFloat(document.getElementById('b11').value) || 0;
  const b12 = parseFloat(document.getElementById('b12').value) || 0;
  const b21 = parseFloat(document.getElementById('b21').value) || 0;
  const b22 = parseFloat(document.getElementById('b22').value) || 0;
  
  const resultDiv = document.getElementById('calculatorResult');
  
  let result = '';
  
  if (operation === 'add') {
    const r11 = a11 + b11;
    const r12 = a12 + b12;
    const r21 = a21 + b21;
    const r22 = a22 + b22;
    result = `$$A + B = \\begin{pmatrix}${r11} & ${r12} \\\\ ${r21} & ${r22}\\end{pmatrix}$$`;
  } else if (operation === 'multiply') {
    const r11 = a11 * b11 + a12 * b21;
    const r12 = a11 * b12 + a12 * b22;
    const r21 = a21 * b11 + a22 * b21;
    const r22 = a21 * b12 + a22 * b22;
    result = `$$A \\times B = \\begin{pmatrix}${r11} & ${r12} \\\\ ${r21} & ${r22}\\end{pmatrix}$$`;
  } else if (operation === 'determinant') {
    const det = a11 * a22 - a12 * a21;
    result = `$$\\det(A) = ${a11} \\cdot ${a22} - ${a12} \\cdot ${a21} = ${det}$$`;
  }
  
  resultDiv.innerHTML = result;
  
  // Renderizar MathJax solo si est√° listo
  if (window.mathJaxReady && typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
    MathJax.typesetPromise([resultDiv]).catch((err) => console.log('MathJax error:', err));
  }
}

function updateCalculator() {
  // Actualizaci√≥n autom√°tica se puede implementar aqu√≠ si se desea
}

// ========== QUIZ INTERACTIVO ==========
function checkAnswer(element, type) {
  // Remover clases previas de todas las opciones del mismo quiz
  const options = element.parentElement.querySelectorAll('.quiz-option');
  options.forEach(opt => {
    opt.classList.remove('correct', 'incorrect');
    opt.style.pointerEvents = 'auto';
  });
  
  // Agregar clase seg√∫n respuesta
  if (type === 'correct') {
    element.classList.add('correct');
    // Desactivar todas las opciones despu√©s de responder correctamente
    options.forEach(opt => {
      opt.style.pointerEvents = 'none';
    });
    setTimeout(() => {
      alert('‚úÖ ¬°Correcto! Excelente.\n\nüí° Has demostrado comprensi√≥n del tema.');
    }, 100);
  } else {
    element.classList.add('incorrect');
    setTimeout(() => {
      alert('‚ùå Incorrecto. \n\nüìö Te recomendamos revisar el contenido de esta semana.\n\nüí™ ¬°Int√©ntalo de nuevo!');
      // Remover la marca incorrecta para permitir otro intento
      setTimeout(() => {
        element.classList.remove('incorrect');
      }, 500);
    }, 100);
  }
}

// ========== BOTONES INFO ==========
function toggleInfo(infoId) {
  const infoBox = document.getElementById(infoId);
  if (infoBox) {
    infoBox.classList.toggle('active');
  }
}

// ========== THREE.JS - VISUALIZACI√ìN 3D ==========
function initializeThreeJS() {
  const canvas = document.getElementById('threejs-canvas');
  if (!canvas) return;
  
  // Configurar escena
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0x1a1f2e);
  
  // Configurar c√°mara
  camera = new THREE.PerspectiveCamera(75, canvas.parentElement.clientWidth / 400, 0.1, 1000);
  camera.position.set(5, 5, 5);
  camera.lookAt(0, 0, 0);
  
  // Configurar renderer
  renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
  renderer.setSize(canvas.parentElement.clientWidth, 400);
  
  // Agregar luces
  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);
  
  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
  directionalLight.position.set(10, 10, 10);
  scene.add(directionalLight);
  
  // Crear cubo con geometr√≠a
  const geometry = new THREE.BoxGeometry(2, 2, 2);
  const material = new THREE.MeshPhongMaterial({ 
    color: 0x6496fa,
    transparent: true,
    opacity: 0.8
  });
  cube = new THREE.Mesh(geometry, material);
  scene.add(cube);
  
  // Agregar wireframe
  const wireframe = new THREE.WireframeGeometry(geometry);
  const line = new THREE.LineSegments(wireframe);
  line.material.color.setHex(0x00d4aa);
  line.material.linewidth = 2;
  cube.add(line);
  
  // Agregar ejes
  axes = new THREE.AxesHelper(4);
  scene.add(axes);
  
  // Agregar grid
  grid = new THREE.GridHelper(10, 10, 0x6496fa, 0x2a3142);
  scene.add(grid);
  
  // Iniciar animaci√≥n
  animate3D();
}

function animate3D() {
  animationId = requestAnimationFrame(animate3D);
  
  if (cube && !isAnimating) {
    cube.rotation.x += 0.005;
    cube.rotation.y += 0.005;
  }
  
  if (renderer && scene && camera) {
    renderer.render(scene, camera);
  }
}

function animateTransformation(type) {
  if (!cube) return;
  
  isAnimating = true;
  let progress = 0;
  const duration = 2000; // 2 segundos
  const startTime = Date.now();
  
  const originalScale = { x: 1, y: 1, z: 1 };
  const originalRotation = { x: cube.rotation.x, y: cube.rotation.y, z: cube.rotation.z };
  
  function animateStep() {
    const currentTime = Date.now();
    progress = Math.min((currentTime - startTime) / duration, 1);
    
    if (type === 'rotation') {
      cube.rotation.y = originalRotation.y + progress * Math.PI * 2;
    } else if (type === 'scaling') {
      const scale = 1 + Math.sin(progress * Math.PI) * 0.5;
      cube.scale.set(scale, scale, scale);
    } else if (type === 'shear') {
      cube.rotation.x = originalRotation.x + Math.sin(progress * Math.PI * 2) * 0.5;
    }
    
    if (progress < 1) {
      requestAnimationFrame(animateStep);
    } else {
      isAnimating = false;
    }
  }
  
  animateStep();
}

function resetTransformation() {
  if (!cube) return;
  cube.rotation.set(0, 0, 0);
  cube.scale.set(1, 1, 1);
  cube.position.set(0, 0, 0);
}

// Redimensionar canvas cuando cambia el tama√±o de la ventana
window.addEventListener('resize', () => {
  const canvas = document.getElementById('threejs-canvas');
  if (canvas && renderer && camera) {
    const width = canvas.parentElement.clientWidth;
    const height = 400;
    renderer.setSize(width, height);
    camera.aspect = width / height;
    camera.updateProjectionMatrix();
  }
});
</script>

</body>
</html>