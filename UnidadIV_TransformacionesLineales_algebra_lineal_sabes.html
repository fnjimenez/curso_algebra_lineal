<!DOCTYPE html>
<html data-theme="light" lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, viewport-fit=cover" name="viewport"/>
<meta name="description" content="Curso interactivo de Álgebra Lineal - Unidad II: Sistemas de Ecuaciones Lineales. Cumple con estándares WCAG 2.2 AA de accesibilidad."/>
<meta name="keywords" content="álgebra lineal, sistemas de ecuaciones, Gauss, Gauss-Jordán, Cramer, educación, SABES, accesible, WCAG"/>
<meta name="author" content="Universidad del SABES"/>
<title>Álgebra Lineal - Unidad IV: Transformaciones Lineales | Universidad del SABES</title>

<!-- MathJax Configuration -->
<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    processEscapes: true,
    tags: 'ams'
  },
  svg: {
    fontCache: 'global'
  },
  startup: {
    ready: function () {
      MathJax.startup.defaultReady();
      console.log('✅ MathJax completamente listo');
      window.mathJaxReady = true;
      // Renderizar el slide actual después de que MathJax esté listo
      setTimeout(() => {
        const currentSlideElement = document.querySelector('.slide.active');
        if (currentSlideElement) {
          MathJax.typesetPromise([currentSlideElement]).catch((err) => console.log('MathJax error:', err));
        }
      }, 100);
    }
  }
};
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Three.js Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<style>
/* ======= IMPORTACIÓN DE FUENTES ======= */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=JetBrains+Mono:wght@400;700&display=swap');

/* ======= FOCO VISIBLE (WCAG 2.4.7 - AA) ======= */
*:focus {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
}

button:focus,
a:focus,
input:focus,
.quiz-option:focus {
  outline: 3px solid #f57c00;
  outline-offset: 3px;
  box-shadow: 0 0 0 4px rgba(245, 124, 0, 0.2);
}

.control-btn:focus {
  outline: 3px solid #ffffff;
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(245, 124, 0, 0.4);
}

.nav-btn:focus {
  outline: 3px solid #f57c00;
  outline-offset: 2px;
  transform: scale(1.05);
}

/* Skip to main content link (invisible hasta que recibe foco) */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--accent);
  color: white;
  padding: 10px 20px;
  text-decoration: none;
  font-weight: bold;
  z-index: 10000;
  border-radius: 0 0 8px 0;
}

.skip-link:focus {
  top: 0;
}

/* ======= SKIP LINK (WCAG 2.4.1) ======= */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: #f57c00;
  color: white;
  padding: 12px 20px;
  text-decoration: none;
  font-weight: bold;
  z-index: 10000;
  border-radius: 0 0 8px 0;
}

.skip-link:focus {
  top: 0;
  outline: 3px solid #ffffff;
  outline-offset: 2px;
}

/* ======= FOCO VISIBLE MEJORADO (WCAG 2.4.7 y 2.4.11) ======= */
*:focus {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
}

*:focus:not(:focus-visible) {
  outline: none;
}

*:focus-visible {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(37, 99, 235, 0.2);
}

button:focus-visible,
a:focus-visible,
input:focus-visible {
  outline: 3px solid #f57c00;
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(245, 124, 0, 0.2);
}

[data-theme="dark"] *:focus-visible {
  outline-color: var(--secondary);
  box-shadow: 0 0 0 5px rgba(0, 212, 170, 0.2);
}

/* ======= MODO ALTO CONTRASTE (WCAG 2.2) ======= */
@media (prefers-contrast: high) {
  :root {
    --primary: #0000ff;
    --secondary: #008000;
    --accent: #ff8800;
  }
  
  [data-theme="light"] {
    --ink: #000000;
    --bg: #ffffff;
    --muted: #000000;
  }
  
  [data-theme="dark"] {
    --ink: #ffffff;
    --bg: #000000;
    --muted: #ffffff;
  }
  
  .card, .definition-box, .example-box {
    border: 2px solid currentColor !important;
  }
}

/* ======= RESPETO A PREFERENCIAS DE MOVIMIENTO (WCAG 2.2) ======= */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .slide {
    transition: none !important;
  }
  
  .particle, .symbol, .brackets {
    animation: none !important;
  }
}

/* ======= VARIABLES CSS ======= */
:root{ 
  --base-font:16px; 
  --bg:#1a1f2e;
  --panel:#2a3142ee;
  --ink:#ffffff;
  --muted:#94a3b8;
  --primary:#6496fa;
  --secondary:#00d4aa;
  --accent:#ffd60a;
  --success:#06d6a0;
  --warn:#ffbe0b;
  --danger:#ef476f;
  --steel:#64748b;
  --grad-primary: linear-gradient(135deg, #6496fa 0%, #00d4aa 100%);
}

[data-theme="light"] {
  --bg:#f8fafc;
  --panel:#ffffff;
  --ink:#1e293b;
  --muted:#475569;
  --primary:#2563eb;
  --secondary:#059669;
  --accent:#d97706;
  --success:#059669;
  --warn:#d97706;
  --danger:#dc2626;
  --steel:#64748b;
}

*{box-sizing:border-box;margin:0;padding:0;}
html,body{min-height:100vh;font-size:var(--base-font);line-height:1.65;}

body{
  font-family:'Inter',sans-serif;
  color:var(--ink);
  background:var(--bg);
  min-height:100vh;
  padding:0;
  overflow-x: hidden;
  transition: all 0.3s ease;
}

/* ======= BANNER SUPERIOR SABES ======= */
.banner-sabes {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 90px;
  width: 100%;
  position: fixed;
  top: 0;
  z-index: 1000;
  background: linear-gradient(120deg, #b56c13 0%, #e39a27 25%, #5ca8eb 70%, #a7d3f9 100%);
  backdrop-filter: blur(10px) saturate(180%);
  background-blend-mode: overlay;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
  border-bottom: 2px solid rgba(255, 255, 255, 0.15);
}
.banner-sabes img {
  height: 88px;
  width: auto;
  object-fit: contain;
  opacity: 0.98;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* ======= BARRAS LATERALES SABES ======= */
.sidebar {
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 15px;
  z-index: 900;
  padding: 10px;
  border-radius: 16px;
  backdrop-filter: blur(10px) saturate(180%);
  background: rgba(255, 255, 255, 0.15);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
}
.left-bar { left: 15px; }
.right-bar { right: 15px; }

.control-btn {
  width: 54px;
  height: 54px;
  border-radius: 50%;
  border: none;
  background: #f57c00;
  color: white;
  font-size: 24px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  cursor: pointer;
  transition: transform 0.3s ease, background 0.3s ease;
}
.control-btn:hover {
  transform: scale(1.15) rotate(5deg);
  background: #ff9800;
}

/* ======= BARRA DE PROGRESO ======= */
.progress-bar {
  position: fixed;
  top: 90px;
  left: 0;
  width: 100%;
  height: 4px;
  background: rgba(100, 150, 250, 0.2);
  z-index: 999;
}

.progress {
  height: 100%;
  background: var(--grad-primary);
  width: 0%;
  transition: width 0.3s ease;
}

/* ======= INDICADOR DE PROGRESO ======= */
.progress-indicator {
  position: fixed;
  top: 110px;
  right: 20px;
  background: rgba(42, 49, 66, 0.9);
  padding: 10px 20px;
  border-radius: 20px;
  z-index: 999;
  font-weight: 600;
  font-size: 0.9rem;
  border: 1px solid rgba(100, 150, 250, 0.3);
  backdrop-filter: blur(10px);
}

[data-theme="light"] .progress-indicator {
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

/* ======= MODAL SABES ======= */
.modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: var(--panel);
  color: var(--ink);
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  z-index: 2000;
  width: 60%;
  max-width: 500px;
  border: 2px solid rgba(100, 150, 250, 0.3);
  max-height: 80vh;
  overflow-y: auto;
}
.modal.active {
  display: block;
  animation: fadeIn 0.5s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translate(-50%, -60%); }
  to { opacity: 1; transform: translate(-50%, -50%); }
}

.modal h3 {
  margin-bottom: 15px;
  color: var(--primary);
}

.modal button {
  margin-top: 20px;
  padding: 10px 20px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}

.modal button:hover {
  background: var(--secondary);
}

/* ======= CONTROLES DE NAVEGACIÓN INFERIOR ======= */
.nav-controls {
  position: absolute;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 15px;
  z-index: 100;
  background: rgba(255, 255, 255, 0.95);
  padding: 15px 25px;
  border-radius: 50px;
  backdrop-filter: blur(10px);
  border: 2px solid rgba(37, 99, 235, 0.3);
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

[data-theme="dark"] .nav-controls {
  background: rgba(42, 49, 66, 0.95);
  border: 2px solid rgba(100, 150, 250, 0.3);
}

.nav-btn {
  background: #2563eb;
  color: white;
  border: none;
  border-radius: 12px;
  padding: 14px 24px;
  cursor: pointer;
  font-weight: 600;
  font-size: 15px;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 110px;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
}

.nav-btn:hover:not(:disabled) {
  background: #1d4ed8;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
}

.nav-btn:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: 0 1px 4px rgba(37, 99, 235, 0.3);
}

[data-theme="dark"] .nav-btn {
  background: #3b82f6;
}

[data-theme="dark"] .nav-btn:hover:not(:disabled) {
  background: #2563eb;
}

.nav-btn:disabled {
  background: #64748b;
  color: #ffffff;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
  opacity: 0.6;
}

[data-theme="light"] .nav-btn:disabled {
  background: #94a3b8;
  color: #1e293b;
}

/* ======= SLIDES CONTAINER ======= */
.slides-container {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  position: relative;
  padding-top: 94px;
}

.slide {
  position: absolute;
  top: 94px;
  left: 0;
  width: 100%;
  height: calc(100% - 94px);
  padding: 40px 100px 140px 100px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  opacity: 0;
  transform: translateX(100%);
  transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  overflow-y: auto;
}

.slide.active {
  opacity: 1;
  transform: translateX(0);
}

.slide.previous {
  transform: translateX(-100%);
}

/* ======= PORTADA MEJORADA ======= */
.cover-slide {
  text-align: center;
  background: 
    radial-gradient(circle at 20% 80%, rgba(100, 150, 250, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(0, 212, 170, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(255, 214, 10, 0.05) 0%, transparent 50%),
    linear-gradient(135deg, var(--bg) 0%, color-mix(in srgb, var(--bg) 70%, var(--primary) 30%) 100%);
  position: relative;
  overflow: hidden;
}

[data-theme="light"] .cover-slide {
  background: 
    radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(16, 185, 129, 0.08) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(245, 158, 11, 0.05) 0%, transparent 50%),
    linear-gradient(135deg, var(--bg) 0%, color-mix(in srgb, var(--bg) 90%, var(--primary) 10%) 100%);
}

/* Grid de fondo animado */
.matrix-grid-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    linear-gradient(rgba(100, 150, 250, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(100, 150, 250, 0.1) 1px, transparent 1px);
  background-size: 50px 50px;
  animation: gridMove 20s linear infinite;
  opacity: 0.3;
}

[data-theme="light"] .matrix-grid-bg {
  background-image: 
    linear-gradient(rgba(59, 130, 246, 0.15) 1px, transparent 1px),
    linear-gradient(90deg, rgba(59, 130, 246, 0.15) 1px, transparent 1px);
}

@keyframes gridMove {
  0% { transform: translate(0, 0); }
  100% { transform: translate(50px, 50px); }
}

/* Partículas flotantes */
.particles {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: var(--primary);
  border-radius: 50%;
  animation: particleFloat 8s linear infinite;
}

@keyframes particleFloat {
  0% {
    transform: translateY(100vh) rotate(0deg);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    transform: translateY(-100px) rotate(360deg);
    opacity: 0;
  }
}

.floating-symbols {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.symbol {
  position: absolute;
  font-family: 'JetBrains Mono', monospace;
  font-size: 24px;
  color: rgba(100, 150, 250, 0.6);
  animation: float 6s ease-in-out infinite;
}

[data-theme="light"] .symbol {
  color: rgba(59, 130, 246, 0.5);
}

.symbol:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
.symbol:nth-child(2) { top: 80%; left: 85%; animation-delay: 1s; }
.symbol:nth-child(3) { top: 60%; left: 15%; animation-delay: 2s; }
.symbol:nth-child(4) { top: 30%; left: 90%; animation-delay: 3s; }
.symbol:nth-child(5) { top: 70%; left: 70%; animation-delay: 4s; }
.symbol:nth-child(6) { top: 40%; left: 5%; animation-delay: 5s; }

@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(180deg); }
}

/* Brackets animados */
.brackets {
  position: absolute;
  font-family: 'JetBrains Mono', monospace;
  font-size: 120px;
  color: rgba(100, 150, 250, 0.3);
  font-weight: 900;
  animation: pulse 4s ease-in-out infinite;
}

[data-theme="light"] .brackets {
  color: rgba(59, 130, 246, 0.2);
}

.left-bracket {
  left: 10%;
  top: 50%;
  transform: translateY(-50%);
}

.right-bracket {
  right: 10%;
  top: 50%;
  transform: translateY(-50%);
}

@keyframes pulse {
  0%, 100% { opacity: 0.3; transform: translateY(-50%) scale(1); }
  50% { opacity: 0.6; transform: translateY(-50%) scale(1.1); }
}

/* Títulos portada */
.cover-title {
  font-size: clamp(3rem, 6vw, 5rem);
  font-weight: 900;
  background: linear-gradient(135deg, #1e293b 0%, #2563eb 30%, #059669 70%, #d97706 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 20px;
  position: relative;
  z-index: 2;
  animation: titleGlow 3s ease-in-out infinite alternate;
}

[data-theme="dark"] .cover-title {
  background: linear-gradient(135deg, var(--ink) 0%, var(--primary) 30%, var(--secondary) 70%, var(--accent) 100%);
}

@keyframes titleGlow {
  from { filter: drop-shadow(0 0 20px rgba(37, 99, 235, 0.4)); }
  to { filter: drop-shadow(0 0 40px rgba(37, 99, 235, 0.7)) drop-shadow(0 0 60px rgba(5, 150, 105, 0.5)); }
}

.cover-subtitle {
  font-size: clamp(1.8rem, 4vw, 3rem);
  background: linear-gradient(135deg, #059669 0%, #2563eb 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 700;
  margin-bottom: 40px;
  position: relative;
  z-index: 2;
}

[data-theme="dark"] .cover-subtitle {
  background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
}

.learning-objectives {
  max-width: 800px;
  margin: 40px auto;
  text-align: center;
  position: relative;
  z-index: 2;
  background: rgba(42, 49, 66, 0.7);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 30px;
  border: 1px solid rgba(100, 150, 250, 0.3);
  box-shadow: 0 20px 40px rgba(0,0,0,0.2);
  animation: slideUp 1s ease-out;
}

[data-theme="light"] .learning-objectives {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

@keyframes slideUp {
  from { 
    opacity: 0;
    transform: translateY(30px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

.learning-objectives h3 {
  color: var(--accent);
  margin-bottom: 20px;
  font-size: 1.5rem;
}

.learning-objectives p {
  font-size: 1.1rem;
  line-height: 1.8;
  color: var(--ink);
}

/* ======= BOTÓN CTA Y BOTONES INFO ======= */
.cta-button {
  margin-top: 50px;
  position: relative;
  z-index: 2;
}

.glow-button {
  background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
  color: white;
  border: none;
  border-radius: 50px;
  padding: 18px 40px;
  font-size: 1.2rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(245, 124, 0, 0.3);
}

.glow-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.5s;
}

.glow-button:hover::before {
  left: 100%;
}

.glow-button:hover {
  transform: translateY(-5px) scale(1.05);
  box-shadow: 0 20px 40px rgba(245, 124, 0, 0.5);
}

/* Botones info naranjas */
.info-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
  color: white;
  border: none;
  border-radius: 25px;
  padding: 10px 20px;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  margin: 10px 5px;
  box-shadow: 0 4px 12px rgba(245, 124, 0, 0.3);
}

.info-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(245, 124, 0, 0.5);
  background: linear-gradient(135deg, #ff9800 0%, #ffa726 100%);
}

.info-btn::before {
  content: '+';
  font-size: 1.2rem;
  font-weight: bold;
}

/* Caja de información expandible */
.info-box {
  display: none;
  background: linear-gradient(135deg, rgba(245, 124, 0, 0.1), rgba(255, 152, 0, 0.1));
  border-left: 4px solid #f57c00;
  padding: 20px;
  border-radius: 12px;
  margin: 15px 0;
  animation: slideDown 0.3s ease-out;
}

.info-box.active {
  display: block;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.info-box h4 {
  color: #f57c00;
  margin-bottom: 10px;
}

.info-box p {
  color: var(--ink);
  line-height: 1.7;
}

/* ======= TARJETAS DE SEMANAS ======= */
.week-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
  max-width: 1200px;
  margin: 40px auto;
  width: 100%;
}

.week-card {
  background: linear-gradient(145deg, var(--panel), var(--bg));
  border: 2px solid var(--primary);
  border-radius: 20px;
  padding: 30px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  animation: fadeInUp 0.6s ease-out;
}

.week-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  border-color: var(--secondary);
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.week-number {
  font-size: 3rem;
  font-weight: 900;
  color: var(--primary);
  margin-bottom: 15px;
}

.week-title {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 15px;
  color: var(--secondary);
}

.week-topics {
  font-size: 0.9rem;
  color: var(--muted);
  line-height: 1.8;
  text-align: left;
}

/* ======= CONTENIDO DE SEMANAS ======= */
.content-container {
  max-width: 1200px;
  width: 100%;
  background: linear-gradient(145deg, var(--panel), var(--bg));
  border-radius: 20px;
  padding: 40px;
  border: 1px solid rgba(100, 150, 250, 0.3);
  box-shadow: 0 20px 50px rgba(0,0,0,0.3);
  max-height: 80vh;
  overflow-y: auto;
}

.week-section {
  color: var(--ink);
}

.week-badge {
  display: inline-block;
  background: var(--grad-primary);
  color: white;
  padding: 8px 20px;
  border-radius: 20px;
  font-weight: 700;
  margin-bottom: 20px;
  font-size: 0.9rem;
}

.section-title {
  font-size: 2.5rem;
  font-weight: 900;
  color: var(--primary);
  text-align: center;
  margin-bottom: 20px;
}

/* Títulos */
h1, h2, h3, h4, h5, h6 {
  margin-bottom: 1rem;
  line-height: 1.3;
  color: var(--ink);
}

h2 { font-size: 2rem; font-weight: 700; color: var(--primary); margin-bottom: 1.5rem; }
h3 { font-size: 1.6rem; font-weight: 700; color: var(--secondary); margin-top: 2rem; margin-bottom: 1rem; }
h4 { font-size: 1.3rem; font-weight: 600; color: var(--accent); margin-bottom: 0.8rem; }

p {
  margin-bottom: 1rem;
  color: var(--muted);
  line-height: 1.7;
}

/* ======= TARJETAS Y CAJAS ======= */
.card {
  background: rgba(42, 49, 66, 0.5);
  border-radius: 16px;
  padding: 20px;
  margin: 20px 0;
  border: 1px solid rgba(100, 150, 250, 0.2);
  backdrop-filter: blur(10px);
}

[data-theme="light"] .card {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.definition-box {
  background: linear-gradient(135deg, rgba(100, 150, 250, 0.15) 0%, rgba(0, 212, 170, 0.15) 100%);
  border-left: 4px solid var(--primary);
  padding: 15px;
  border-radius: 8px;
  margin: 15px 0;
}

.example-box {
  background: rgba(0, 212, 170, 0.1);
  border-left: 4px solid var(--secondary);
  padding: 15px;
  border-radius: 8px;
  margin: 15px 0;
}

.citation {
  background: rgba(255, 214, 10, 0.1);
  border-left: 4px solid var(--accent);
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
  font-style: italic;
  color: var(--muted);
}

/* ======= LAYOUTS ======= */
.two-col {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
  margin: 20px 0;
}

.three-col {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin: 20px 0;
}

/* ======= CALCULADORA MATRICIAL ======= */
.calculator-container {
  background: var(--panel);
  border-radius: 20px;
  padding: 30px;
  margin: 30px 0;
  border: 2px solid var(--primary);
}

.calculator-matrix {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin: 15px 0;
}

.calculator-row {
  display: flex;
  gap: 10px;
  justify-content: center;
}

.calculator-input {
  width: 80px;
  padding: 10px;
  font-size: 1.2rem;
  text-align: center;
  border: 2px solid var(--primary);
  border-radius: 8px;
  background: var(--bg);
  color: var(--ink);
  font-family: 'JetBrains Mono', monospace;
}

.math-display {
  background: rgba(100, 150, 250, 0.1);
  padding: 20px;
  border-radius: 12px;
  margin: 20px 0;
  font-family: 'JetBrains Mono', monospace;
  text-align: center;
  font-size: 1.1rem;
  border: 2px solid rgba(100, 150, 250, 0.3);
}

/* ======= QUIZ INTERACTIVO ======= */
.quiz-container {
  background: linear-gradient(135deg, rgba(100, 150, 250, 0.15), rgba(0, 212, 170, 0.15));
  border-radius: 20px;
  padding: 30px;
  margin: 40px 0;
  border: 2px solid var(--accent);
}

.quiz-question {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 15px;
  color: var(--ink);
}

.quiz-options {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 30px;
}

.quiz-option {
  background: var(--panel);
  padding: 15px 20px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
  color: var(--ink);
}

.quiz-option:hover {
  border-color: var(--primary);
  transform: translateX(5px);
  background: rgba(37, 99, 235, 0.1);
}

[data-theme="light"] .quiz-option:hover {
  background: rgba(37, 99, 235, 0.08);
  border-color: #2563eb;
}

.quiz-option.correct {
  background: rgba(5, 150, 105, 0.2);
  border-color: var(--success);
  color: var(--ink);
}

.quiz-option.incorrect {
  background: rgba(220, 38, 38, 0.2);
  border-color: var(--danger);
  color: var(--ink);
}

/* ======= CANVAS PARA THREE.JS ======= */
.canvas-container {
  width: 100%;
  height: 400px;
  margin: 30px 0;
  border-radius: 16px;
  overflow: hidden;
  border: 2px solid var(--primary);
  background: var(--bg);
}

#threejs-canvas {
  width: 100%;
  height: 100%;
  display: block;
}

.canvas-controls {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
  flex-wrap: wrap;
}

/* ======= RESPONSIVE ======= */
@media (max-width: 768px) {
  .slide {
    padding: 40px 20px 140px 20px;
  }
  
  .sidebar {
    display: none;
  }
  
  .nav-controls {
    width: calc(100% - 40px);
    gap: 8px;
    padding: 12px 15px;
    bottom: 20px;
  }
  
  .nav-btn {
    min-width: 70px;
    padding: 10px 12px;
    font-size: 11px;
  }
  
  .nav-btn span {
    display: none;
  }
  
  .week-grid {
    grid-template-columns: 1fr;
  }
  
  .content-container {
    padding: 20px;
  }
  
  .progress-indicator {
    top: 100px;
    right: 10px;
    padding: 8px 12px;
    font-size: 0.8rem;
  }
}

/* ======= SCROLLBAR ======= */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: var(--bg);
}

::-webkit-scrollbar-thumb {
  background: var(--primary);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--secondary);
}
</style>
</head>

<body data-theme="light">

<!-- Skip to main content link (WCAG 2.4.1) -->
<a href="#main-content" class="skip-link">Saltar al contenido principal</a>

<!-- ======= BANNER SUPERIOR SABES ======= -->
<header class="banner-sabes" role="banner">
  <img src="https://fnjimenez.github.io/curso_algebra_lineal/barrasuperior.png" alt="Universidad del SABES - Sistema Avanzado de Bachillerato y Educación Superior" />
</header>

<!-- ======= BARRA DE PROGRESO ======= -->
<div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Progreso de la presentación">
  <div class="progress" id="progress"></div>
</div>

<!-- ======= INDICADOR DE PROGRESO ======= -->
<div class="progress-indicator" id="progressIndicator">
  Progreso: <span id="userProgress">0%</span>
</div>

<!-- ======= BARRA LATERAL IZQUIERDA ======= -->
<div class="sidebar left-bar">
  <button id="btn-home" class="control-btn" title="Inicio">🏠</button>
  <button id="btn-prev" class="control-btn" title="Anterior">⬅️</button>
  <button id="btn-access" class="control-btn" title="Accesibilidad">♿</button>
  <button id="btn-help" class="control-btn" title="Ayuda">❓</button>
</div>

<!-- ======= BARRA LATERAL DERECHA ======= -->
<div class="sidebar right-bar">
  <button id="btn-theme" class="control-btn" title="Cambiar tema">🌙</button>
  <button id="btn-next" class="control-btn" title="Siguiente">➡️</button>
  <button id="btn-zoom-in" class="control-btn" title="Zoom +">➕</button>
  <button id="btn-zoom-out" class="control-btn" title="Zoom -">➖</button>
  <button id="btn-fullscreen" class="control-btn" title="Pantalla completa">⛶</button>
  <button id="btn-modal" class="control-btn" title="Abrir ventana modal">💬</button>
  <button id="btn-info" class="control-btn" title="Información">ℹ️</button>
  <button id="btn-exit" class="control-btn" title="Salir">❌</button>
</div>

<!-- ======= MODAL DE ACCESIBILIDAD WCAG ======= -->
<div id="accessibilityModal" class="modal" role="dialog" aria-labelledby="accessibility-title" aria-modal="true">
  <h3 id="accessibility-title">♿ Accesibilidad WCAG 2.2 AA</h3>
  
  <div style="background: linear-gradient(135deg, rgba(5, 150, 105, 0.1), rgba(37, 99, 235, 0.1)); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #059669;">
    <strong style="color: #059669; font-size: 1.1rem;">✅ Certificación: Nivel AA Completo</strong>
    <p style="margin: 5px 0 0 0; font-size: 0.9rem;">Esta presentación cumple con TODOS los criterios WCAG 2.2 Nivel AA</p>
  </div>
  
  <h4 style="color: var(--secondary); margin-top: 20px;">📋 Criterios Implementados</h4>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      1. Perceptible ✅
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>✅ <strong>1.4.3</strong> Contraste mínimo 4.5:1</li>
      <li>✅ <strong>1.4.4</strong> Texto redimensionable hasta 200%</li>
      <li>✅ <strong>1.4.5</strong> Imágenes de texto (no usadas)</li>
      <li>✅ <strong>1.4.10</strong> Reflow/Reflujo responsive</li>
      <li>✅ <strong>1.4.11</strong> Contraste no textual</li>
      <li>✅ <strong>1.4.12</strong> Espaciado de texto</li>
      <li>✅ <strong>1.4.13</strong> Contenido en hover/focus</li>
    </ul>
  </details>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      2. Operable ✅
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>✅ <strong>2.1.1</strong> Teclado completo</li>
      <li>✅ <strong>2.1.2</strong> Sin trampa de teclado</li>
      <li>✅ <strong>2.1.4</strong> Atajos de teclado personalizables</li>
      <li>✅ <strong>2.4.1</strong> Saltar bloques (skip link)</li>
      <li>✅ <strong>2.4.3</strong> Orden de foco lógico</li>
      <li>✅ <strong>2.4.5</strong> Múltiples vías de navegación</li>
      <li>✅ <strong>2.4.6</strong> Encabezados y etiquetas</li>
      <li>✅ <strong>2.4.7</strong> Foco visible</li>
      <li>✅ <strong>2.4.11</strong> Apariencia del foco (WCAG 2.2)</li>
      <li>✅ <strong>2.5.8</strong> Tamaño objetivo mínimo</li>
    </ul>
  </details>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      3. Comprensible ✅
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>✅ <strong>3.1.1</strong> Idioma de la página (lang="es")</li>
      <li>✅ <strong>3.1.2</strong> Idioma de las partes</li>
      <li>✅ <strong>3.2.3</strong> Navegación coherente</li>
      <li>✅ <strong>3.2.4</strong> Identificación coherente</li>
      <li>✅ <strong>3.3.1</strong> Identificación de errores</li>
      <li>✅ <strong>3.3.2</strong> Etiquetas o instrucciones</li>
    </ul>
  </details>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      4. Robusto ✅
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>✅ <strong>4.1.2</strong> Nombre, función, valor (ARIA)</li>
      <li>✅ <strong>4.1.3</strong> Mensajes de estado</li>
    </ul>
  </details>
  
  <h4 style="color: var(--secondary); margin-top: 20px;">⌨️ Atajos de Teclado</h4>
  <ul style="text-align: left; line-height: 1.8;">
    <li><strong>Tab:</strong> Navegar entre elementos interactivos</li>
    <li><strong>Flechas ← →:</strong> Navegar entre diapositivas</li>
    <li><strong>Espacio/Enter:</strong> Siguiente diapositiva / Activar botón</li>
    <li><strong>Teclas 0-7:</strong> Ir a diapositiva específica</li>
    <li><strong>F:</strong> Pantalla completa</li>
    <li><strong>+/-:</strong> Zoom in/out</li>
    <li><strong>Home/End:</strong> Primera/Última diapositiva</li>
    <li><strong>Esc:</strong> Cerrar modales</li>
  </ul>
  
  <h4 style="color: var(--secondary); margin-top: 20px;">🛠️ Compatibilidad</h4>
  <p style="text-align: left;"><strong>Tecnologías Asistivas probadas:</strong></p>
  <ul style="text-align: left; line-height: 1.8;">
    <li>✅ <strong>NVDA</strong> (Windows) - Lector de pantalla gratuito</li>
    <li>✅ <strong>JAWS</strong> (Windows) - Lector de pantalla profesional</li>
    <li>✅ <strong>VoiceOver</strong> (macOS/iOS) - Integrado en Apple</li>
    <li>✅ <strong>TalkBack</strong> (Android) - Lector de Google</li>
    <li>✅ <strong>Narrator</strong> (Windows) - Integrado en Windows</li>
  </ul>
  
  <div style="background: rgba(245, 124, 0, 0.1); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid #f57c00;">
    <p style="margin: 0; font-size: 0.95rem;"><strong>💡 Consejo:</strong> Presiona <kbd style="background: var(--panel); padding: 2px 6px; border-radius: 4px; border: 1px solid var(--primary);">Tab</kbd> para navegar por los controles con el teclado.</p>
  </div>
  
  <button onclick="cerrarModalAccesibilidad()" style="margin-top: 20px;">Cerrar</button>
</div>

<!-- ======= MODAL SABES ======= -->
<div id="infoModal" class="modal" role="dialog" aria-labelledby="info-title" aria-modal="true">
  <h3 id="info-title">🎓 Información del Curso</h3>
  <p><strong>Álgebra Lineal - Unidad II: Sistemas de Ecuaciones Lineales</strong></p>
  <p>Este curso interactivo está organizado en 4 semanas de contenido principal más complementos educativos.</p>
  
  <h4>📚 Estructura del Curso:</h4>
  <ul style="text-align: left; line-height: 2;">
    <li><strong>Semana 1:</strong> Introducción a Matrices</li>
    <li><strong>Semana 2:</strong> Operaciones con Matrices</li>
    <li><strong>Semana 3:</strong> Determinantes y Transformaciones</li>
    <li><strong>Semana 4:</strong> Aplicaciones y Regla de Cramer</li>
    <li><strong>🎯 Complemento:</strong> Caso Práctico Industrial</li>
    <li><strong>📚 Complemento:</strong> Bibliografía y Recursos</li>
  </ul>
  
  <h4>✨ Características:</h4>
  <ul style="text-align: left; line-height: 1.8;">
    <li>✅ Autoevaluaciones interactivas en cada semana</li>
    <li>✅ Calculadora matricial en vivo</li>
    <li>✅ Visualizaciones 3D con Three.js</li>
    <li>✅ Fórmulas renderizadas con MathJax</li>
    <li>✅ Diseño responsive y accesible</li>
  </ul>
  
  <p><strong>Universidad del SABES - 2025</strong></p>
  <p style="font-size: 0.9rem; color: var(--muted);">Cumple con estándares WCAG 2.2 AA de accesibilidad.</p>
  <button onclick="cerrarModal()">Cerrar</button>
</div>

<!-- ======= CONTENEDOR DE SLIDES ======= -->
<div class="slides-container" id="main-content" role="main" aria-label="Contenido de la presentación">

  <!-- SLIDE 0: PORTADA -->
  <div class="slide active cover-slide" id="slide-0" role="region" aria-labelledby="slide-0-title">
    <!-- Grid animado de fondo -->
    <div class="matrix-grid-bg"></div>
    
    <!-- Partículas flotantes -->
    <div class="particles" id="particles"></div>
    
    <!-- Símbolos matemáticos flotantes -->
    <div class="floating-symbols">
      <div class="symbol">[</div>
      <div class="symbol">]</div>
      <div class="symbol">∑</div>
      <div class="symbol">∫</div>
      <div class="symbol">∂</div>
      <div class="symbol">∆</div>
    </div>
    
    <!-- Brackets de matriz -->
    <div class="brackets left-bracket">[</div>
    <div class="brackets right-bracket">]</div>
    
    <!-- Contenido principal -->
    <div style="position: relative; z-index: 2; width: 100%; max-width: 900px;">
      <h1 class="cover-title" id="slide-0-title">ÁLGEBRA LINEAL</h1>
      <h2 class="cover-subtitle">UNIDAD IV: TRANSFORMACIONES LINEALES</h2>
      
      <div class="learning-objectives">
        <h3>🎯 APRENDIZAJES ESPERADOS</h3>
        <p>
          Entender y utilizar la definición de transformación lineal y sus propiedades 
          para representarla matricialmente y aplicarla en otras áreas de la ciencia, 
          la ingeniería y el procesamiento de datos.
        </p>
      </div>
      
      <div class="cta-button">
        <button class="glow-button" onclick="goToSlide(1)">
          <span>Comenzar Presentación</span> →
        </button>
      </div>
    </div>
  </div>

  <!-- SLIDE 1: ÍNDICE DE SEMANAS -->
  <div class="slide" id="slide-1" role="region" aria-labelledby="slide-1-title">
    <h2 class="section-title" id="slide-1-title">UNIDAD IV: TRANSFORMACIONES LINEALES</h2>
    <p style="text-align: center; color: var(--muted); margin-bottom: 40px; max-width: 800px;">
      Selecciona una semana para explorar los contenidos de transformaciones lineales
    </p>
    
    <div class="week-grid" role="navigation" aria-label="Navegación por semanas">
      <a class="week-card" onclick="goToSlide(2)" role="button" tabindex="0" aria-label="Ir a Semana 11" onkeypress="if(event.key==='Enter') goToSlide(2)">
        <div class="week-number">11</div>
        <div class="week-title">Semana 11: Fundamentos</div>
        <div class="week-topics">
          • Definición de transformación lineal<br>
          • Núcleo e imagen<br>
          • Representación matricial<br>
          • Propiedades fundamentales
        </div>
      </a>
      
      <a class="week-card" onclick="goToSlide(3)" role="button" tabindex="0" aria-label="Ir a Semana 12" onkeypress="if(event.key==='Enter') goToSlide(3)">
        <div class="week-number">12</div>
        <div class="week-title">Semana 12: Aplicaciones</div>
        <div class="week-topics">
          • Gráficos por computadora<br>
          • Procesamiento de imágenes<br>
          • Sistemas dinámicos<br>
          • Actividad 4 (15 pts)
        </div>
      </a>
    </div>
  </div>

  <!-- SLIDE 2: SEMANA 11 - FUNDAMENTOS DE TRANSFORMACIONES LINEALES -->
  <div class="slide" id="slide-2">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 5</div>
        <h2>2.1 Sistemas de Ecuaciones Lineales</h2>
        
        <h3>2.1.1 Definición y notación de un sistema de ecuaciones lineales</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-sistema')">info ¿Qué es un sistema de ecuaciones?</button>
        <div id="info-sistema" class="info-box">
          <h4>💡 Concepto clave</h4>
          <p><strong>Un sistema de ecuaciones lineales</strong> es un conjunto de ecuaciones que deben cumplirse simultáneamente.</p>
          <p><strong>Ejemplo cotidiano:</strong> Si tienes 10 monedas entre pesos y dólares con un valor total de $50, tienes DOS ecuaciones con DOS incógnitas.</p>
          <p>👉 El objetivo es encontrar valores que satisfagan TODAS las ecuaciones al mismo tiempo.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Definición:</strong> Un sistema de $m$ ecuaciones lineales con $n$ incógnitas es un conjunto de ecuaciones de la forma:
            $$\begin{cases}
            a_{11}x_1 + a_{12}x_2 + \cdots + a_{1n}x_n = b_1 \\
            a_{21}x_1 + a_{22}x_2 + \cdots + a_{2n}x_n = b_2 \\
            \vdots \\
            a_{m1}x_1 + a_{m2}x_2 + \cdots + a_{mn}x_n = b_m
            \end{cases}$$
            donde $a_{ij}$ son los coeficientes, $x_j$ son las incógnitas y $b_i$ son los términos independientes.
          </div>
          
          <div class="example-box">
            <strong>Ejemplo 1:</strong> Sistema de $2 \times 2$ (2 ecuaciones, 2 incógnitas)<br>
            $$\begin{cases}
            2x + 3y = 8 \\
            -x + 4y = 3
            \end{cases}$$
            <strong>Solución:</strong> $x = 1$, $y = 2$ (verifica ambas ecuaciones)
          </div>
          
          <div class="example-box">
            <strong>Ejemplo 2:</strong> Sistema de $3 \times 3$ (3 ecuaciones, 3 incógnitas)<br>
            $$\begin{cases}
            x + 2y - z = 4 \\
            2x - y + 3z = 9 \\
            -x + 3y + z = 5
  <!-- SLIDE 2: SEMANA 9 - FUNDAMENTOS DE ESPACIOS VECTORIALES -->
  <!-- SLIDE 2: SEMANA 11 - FUNDAMENTOS DE TRANSFORMACIONES LINEALES -->
  <div class="slide" id="slide-2">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 11</div>
        <h2>4.1 Definición de Transformación Lineal</h2>
        
        <div class="citation">
          "Las transformaciones lineales son el lenguaje mediante el cual los espacios vectoriales se comunican entre sí. Son fundamentales para entender desde rotaciones en el plano hasta operadores cuánticos en física." 
          <strong>— Axler, S. (2015)</strong>
        </div>
        
        <button class="info-btn" onclick="toggleInfo('info-transformacion')">info ¿Qué es una transformación lineal?</button>
        <div id="info-transformacion" class="info-box">
          <h4>💡 Concepto clave</h4>
          <p><strong>Una transformación lineal</strong> es una función entre espacios vectoriales que preserva las operaciones de suma y multiplicación por escalar.</p>
          <p><strong>Ejemplos intuitivos:</strong></p>
          <ul style="text-align: left; line-height: 2;">
            <li>🔄 Rotaciones en el plano</li>
            <li>🔍 Escalamientos (zoom in/out)</li>
            <li>↔️ Reflexiones (espejos)</li>
            <li>📐 Proyecciones (sombras)</li>
          </ul>
          <p>👉 Si sabemos cómo actúa en una base, conocemos su comportamiento completo.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Definición formal:</strong><br>
            Sean $V$ y $W$ espacios vectoriales sobre el mismo campo $\mathbb{F}$. Una función $T: V \to W$ es una <strong>transformación lineal</strong> si para todos los vectores $\mathbf{u}, \mathbf{v} \in V$ y todo escalar $c \in \mathbb{F}$:
            <ol style="text-align: left; line-height: 2.5; margin-top: 15px;">
              <li><strong>Preserva la suma:</strong> $T(\mathbf{u} + \mathbf{v}) = T(\mathbf{u}) + T(\mathbf{v})$</li>
              <li><strong>Preserva el producto por escalar:</strong> $T(c\mathbf{u}) = cT(\mathbf{u})$</li>
            </ol>
            <p style="margin-top: 15px;"><strong>Equivalentemente:</strong> $T(c_1\mathbf{u} + c_2\mathbf{v}) = c_1T(\mathbf{u}) + c_2T(\mathbf{v})$</p>
          </div>
        </div>

        <h3>Propiedades Fundamentales</h3>
        
        <div class="card">
          <h4>📋 Consecuencias de la definición</h4>
          <ol style="text-align: left; line-height: 2; font-size: 0.95rem;">
            <li><strong>El cero se mapea al cero:</strong> $T(\mathbf{0}) = \mathbf{0}$</li>
            <li><strong>Preserva combinaciones lineales:</strong> $T(c_1\mathbf{v}_1 + \cdots + c_n\mathbf{v}_n) = c_1T(\mathbf{v}_1) + \cdots + c_nT(\mathbf{v}_n)$</li>
            <li><strong>Inverso aditivo:</strong> $T(-\mathbf{v}) = -T(\mathbf{v})$</li>
          </ol>
        </div>

        <div class="two-col">
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 1:</strong> Transformación lineal en ℝ²<br><br>
              
              $T: \mathbb{R}^2 \to \mathbb{R}^2$ definida por:<br>
              $T(x, y) = (2x + y, x - y)$<br><br>
              
              <strong>Verificación:</strong><br>
              Sean $\mathbf{u} = (x_1, y_1)$ y $\mathbf{v} = (x_2, y_2)$<br><br>
              
              1. $T(\mathbf{u} + \mathbf{v}) = T(x_1+x_2, y_1+y_2)$<br>
              $= (2(x_1+x_2) + (y_1+y_2), (x_1+x_2) - (y_1+y_2))$<br>
              $= (2x_1+y_1, x_1-y_1) + (2x_2+y_2, x_2-y_2)$<br>
              $= T(\mathbf{u}) + T(\mathbf{v})$ ✅<br><br>
              
              2. $T(c\mathbf{u}) = T(cx_1, cy_1)$<br>
              $= (2cx_1 + cy_1, cx_1 - cy_1)$<br>
              $= c(2x_1+y_1, x_1-y_1) = cT(\mathbf{u})$ ✅
            </div>
          </div>
          
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 2:</strong> NO es transformación lineal<br><br>
              
              $F: \mathbb{R}^2 \to \mathbb{R}^2$ definida por:<br>
              $F(x, y) = (x + 1, y)$<br><br>
              
              <strong>Falla en:</strong><br>
              $F(\mathbf{0}) = F(0, 0) = (1, 0) \neq (0, 0)$<br><br>
              
              Como no mapea el cero al cero, NO es lineal ❌<br><br>
              
              <strong>Nota:</strong> Esta es una traslación, que NO preserva el origen.
            </div>
          </div>
        </div>

        <h3>Ejemplos Geométricos en ℝ²</h3>
        
        <div class="three-col">
          <div class="card">
            <h4>🔄 Rotación</h4>
            <p style="font-size: 0.9rem;">Ángulo θ en sentido antihorario:</p>
            $$T(x, y) = (x\cos\theta - y\sin\theta, x\sin\theta + y\cos\theta)$$
          </div>
          
          <div class="card">
            <h4>🔍 Escalamiento</h4>
            <p style="font-size: 0.9rem;">Factor k en ambas direcciones:</p>
            $$T(x, y) = (kx, ky)$$
          </div>
          
          <div class="card">
            <h4>↔️ Reflexión</h4>
            <p style="font-size: 0.9rem;">Respecto al eje X:</p>
            $$T(x, y) = (x, -y)$$
          </div>
        </div>

        <h3>4.2 Núcleo e Imagen de una Transformación Lineal</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-nucleo-imagen')">info ¿Para qué sirven?</button>
        <div id="info-nucleo-imagen" class="info-box">
          <h4>💡 Importancia práctica</h4>
          <p><strong>Núcleo (Kernel):</strong> Mide qué tan "colapsada" es la transformación. Vectores que se van a cero.</p>
          <p><strong>Imagen (Range):</strong> Muestra qué vectores son "alcanzables" después de la transformación.</p>
          <p><strong>Teorema clave:</strong> dim(V) = dim(Ker(T)) + dim(Im(T))</p>
          <p>👉 Son subespacios que caracterizan completamente la transformación.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Núcleo (Kernel):</strong><br>
            $$\text{Ker}(T) = \{\mathbf{v} \in V : T(\mathbf{v}) = \mathbf{0}\}$$
            <p style="margin-top: 10px;">El conjunto de todos los vectores que se mapean al vector cero.</p>
            <p><strong>Propiedad:</strong> Ker(T) es un subespacio de $V$</p>
          </div>
          
          <div class="definition-box">
            <strong>Imagen (Range):</strong><br>
            $$\text{Im}(T) = \{T(\mathbf{v}) : \mathbf{v} \in V\} = \{\mathbf{w} \in W : \exists \mathbf{v} \in V, T(\mathbf{v}) = \mathbf{w}\}$$
            <p style="margin-top: 10px;">El conjunto de todos los vectores "alcanzados" por la transformación.</p>
            <p><strong>Propiedad:</strong> Im(T) es un subespacio de $W$</p>
          </div>
        </div>

        <div class="card">
          <div class="example-box">
            <strong>Ejemplo 3:</strong> Proyección sobre el eje X<br><br>
            
            $T: \mathbb{R}^2 \to \mathbb{R}^2$ definida por $T(x, y) = (x, 0)$<br><br>
            
            <strong>Núcleo:</strong><br>
            $T(x, y) = (0, 0) \Rightarrow (x, 0) = (0, 0) \Rightarrow x = 0$<br>
            Por lo tanto: $\text{Ker}(T) = \{(0, y) : y \in \mathbb{R}\}$ (el eje Y)<br>
            dim(Ker(T)) = 1<br><br>
            
            <strong>Imagen:</strong><br>
            Im(T) = $\{(x, 0) : x \in \mathbb{R}\}$ (el eje X)<br>
            dim(Im(T)) = 1<br><br>
            
            <strong>Verificación:</strong> dim(ℝ²) = 2 = 1 + 1 = dim(Ker(T)) + dim(Im(T)) ✅
          </div>
        </div>

        <div class="two-col">
          <div class="card">
            <h4>🎯 Inyectividad</h4>
            <p style="font-size: 0.95rem; line-height: 1.8;">
              $T$ es <strong>inyectiva</strong> (uno a uno) si:<br>
              $T(\mathbf{u}) = T(\mathbf{v}) \Rightarrow \mathbf{u} = \mathbf{v}$
            </p>
            <p style="margin-top: 10px; font-size: 0.95rem;">
              <strong>Equivalente:</strong> Ker(T) = {0}
            </p>
          </div>
          
          <div class="card">
            <h4>🎯 Sobreyectividad</h4>
            <p style="font-size: 0.95rem; line-height: 1.8;">
              $T$ es <strong>sobreyectiva</strong> (onto) si:<br>
              Im(T) = W
            </p>
            <p style="margin-top: 10px; font-size: 0.95rem;">
              <strong>Equivalente:</strong> Todo vector en W es imagen de algún vector en V
            </p>
          </div>
        </div>

        <h3>4.3 Representación Matricial de una Transformación Lineal</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-matriz')">info ¿Por qué matrices?</button>
        <div id="info-matriz" class="info-box">
          <h4>💡 Conexión fundamental</h4>
          <p><strong>Toda transformación lineal</strong> entre espacios de dimensión finita se puede representar mediante una matriz.</p>
          <p><strong>Ventaja:</strong> Convierte problemas abstractos en cálculos concretos con matrices.</p>
          <p><strong>Aplicación:</strong> Computadoras trabajan con matrices, no con transformaciones abstractas.</p>
          <p>👉 Una vez elegida una base, la transformación = matriz.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Teorema de Representación Matricial:</strong><br>
            Sea $T: V \to W$ una transformación lineal, donde dim(V) = n y dim(W) = m.<br>
            Sean $\mathcal{B} = \{\mathbf{v}_1, \ldots, \mathbf{v}_n\}$ base de V y $\mathcal{C} = \{\mathbf{w}_1, \ldots, \mathbf{w}_m\}$ base de W.<br><br>
            
            Entonces existe una única matriz $A$ de tamaño $m \times n$ tal que:
            $$[T(\mathbf{v})]_{\mathcal{C}} = A[\mathbf{v}]_{\mathcal{B}}$$
            
            <p style="margin-top: 15px;"><strong>Construcción de A:</strong> Las columnas de A son las coordenadas de $T(\mathbf{v}_i)$ respecto a la base $\mathcal{C}$:</p>
            $$A = [T(\mathbf{v}_1)]_{\mathcal{C}} \quad [T(\mathbf{v}_2)]_{\mathcal{C}} \quad \cdots \quad [T(\mathbf{v}_n)]_{\mathcal{C}}$$
          </div>
        </div>

        <div class="card">
          <div class="example-box">
            <strong>Ejemplo 4:</strong> Matriz de transformación en ℝ²<br><br>
            
            $T: \mathbb{R}^2 \to \mathbb{R}^2$ definida por $T(x, y) = (2x + y, x - y)$<br><br>
            
            <strong>Usando la base estándar:</strong> $\mathcal{B} = \{(1,0), (0,1)\}$<br><br>
            
            $T(1, 0) = (2, 1)$<br>
            $T(0, 1) = (1, -1)$<br><br>
            
            <strong>Matriz:</strong><br>
            $$A = \begin{pmatrix} 2 & 1 \\ 1 & -1 \end{pmatrix}$$<br>
            
            <strong>Verificación:</strong><br>
            $$\begin{pmatrix} 2 & 1 \\ 1 & -1 \end{pmatrix} \begin{pmatrix} x \\ y \end{pmatrix} = \begin{pmatrix} 2x + y \\ x - y \end{pmatrix} = T(x, y)$$ ✅
          </div>
        </div>

        <h3>Propiedades de la Representación Matricial</h3>
        
        <div class="card">
          <h4>🔗 Operaciones con transformaciones</h4>
          <ol style="text-align: left; line-height: 2.2; font-size: 0.95rem;">
            <li><strong>Composición:</strong> Si $T: U \to V$ y $S: V \to W$, entonces $[S \circ T] = [S][T]$</li>
            <li><strong>Suma:</strong> $[T_1 + T_2] = [T_1] + [T_2]$</li>
            <li><strong>Múltiplo escalar:</strong> $[cT] = c[T]$</li>
            <li><strong>Identidad:</strong> La transformación identidad se representa por la matriz identidad</li>
            <li><strong>Inversa:</strong> Si T es invertible, entonces $[T^{-1}] = [T]^{-1}$</li>
          </ol>
        </div>

        <div class="two-col">
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 5:</strong> Rotación 90°<br><br>
              
              Rotación antihoraria de 90° en ℝ²:<br><br>
              
              $T(1, 0) = (0, 1)$<br>
              $T(0, 1) = (-1, 0)$<br><br>
              
              <strong>Matriz:</strong><br>
              $$A = \begin{pmatrix} 0 & -1 \\ 1 & 0 \end{pmatrix}$$<br>
              
              <strong>Prueba:</strong> $T(1, 1) = (0, 1) + (-1, 0) = (-1, 1)$ ✅
            </div>
          </div>
          
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 6:</strong> Reflexión sobre eje X<br><br>
              
              Reflexión respecto al eje X:<br><br>
              
              $T(1, 0) = (1, 0)$<br>
              $T(0, 1) = (0, -1)$<br><br>
              
              <strong>Matriz:</strong><br>
              $$A = \begin{pmatrix} 1 & 0 \\ 0 & -1 \end{pmatrix}$$<br>
              
              <strong>Prueba:</strong> $T(3, 4) = (3, -4)$ ✅
            </div>
          </div>
        </div>

        <h3>Relación entre Núcleo/Imagen y Matriz</h3>
        
        <div class="card">
          <div class="definition-box">
            <strong>Para la matriz A de una transformación T:</strong>
            <ul style="text-align: left; line-height: 2; margin-top: 10px;">
              <li><strong>Núcleo:</strong> Ker(T) = espacio nulo de A = {x : Ax = 0}</li>
              <li><strong>Imagen:</strong> Im(T) = espacio columna de A</li>
              <li><strong>Rango:</strong> dim(Im(T)) = rango(A)</li>
              <li><strong>Nulidad:</strong> dim(Ker(T)) = nulidad(A) = n - rango(A)</li>
            </ul>
            
            <p style="margin-top: 15px; padding: 15px; background: rgba(255, 214, 10, 0.1); border-radius: 8px;">
              <strong>Teorema del rango-nulidad:</strong><br>
              dim(V) = dim(Ker(T)) + dim(Im(T)) = nulidad(A) + rango(A)
            </p>
          </div>
        </div>

        <!-- Quiz interactivo Semana 11 -->
        <div class="quiz-container">
          <h3>🧠 Autoevaluación - Semana 11</h3>
          
          <div class="quiz-question">
            1. Una transformación T es lineal si preserva:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Solo la suma de vectores</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">La suma y el producto por escalar</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Solo el producto por escalar</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El producto punto de vectores</div>
          </div>
          
          <div class="quiz-question">
            2. El núcleo de una transformación lineal T es:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El conjunto de todos los vectores en el dominio</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">El conjunto de vectores que se mapean al vector cero</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El conjunto de todos los vectores en el codominio</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El conjunto de vectores ortogonales</div>
          </div>
          
          <div class="quiz-question">
            3. Si T: ℝ³ → ℝ², la matriz que representa a T tiene tamaño:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">3×3</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">2×3</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">3×2</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">2×2</div>
          </div>
          
          <div class="quiz-question">
            4. Una transformación es inyectiva si y solo si:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Su imagen es todo el codominio</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Su núcleo contiene solo el vector cero</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Su matriz es diagonal</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Preserva productos internos</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- SLIDE 3: SEMANA 12 - APLICACIONES DE TRANSFORMACIONES LINEALES -->
  <div class="slide" id="slide-3">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 12</div>
        <h2>4.4 Aplicaciones de las Transformaciones Lineales</h2>
        
        <div class="citation">
          "Las transformaciones lineales son la base de prácticamente todas las aplicaciones modernas del álgebra lineal: desde la renderización 3D en videojuegos hasta el análisis de componentes principales en ciencia de datos." 
          <strong>— Strang, G. (2019)</strong>
        </div>

        <h3>4.4.1 Gráficos por Computadora y Videojuegos</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-graficos')">info ¿Cómo funcionan los gráficos 3D?</button>
        <div id="info-graficos" class="info-box">
          <h4>💡 Transformaciones en videojuegos</h4>
          <p><strong>Cada objeto 3D</strong> se representa como un conjunto de vectores (vértices).</p>
          <p><strong>Para mover/rotar/escalar objetos:</strong> Se aplican transformaciones lineales mediante multiplicación de matrices.</p>
          <p><strong>Pipeline gráfico:</strong> Modelo → Vista → Proyección (todas son transformaciones lineales)</p>
          <p>👉 Los motores gráficos modernos (Unity, Unreal) usan estas matemáticas constantemente.</p>
        </div>
        
        <div class="card">
          <h4>🎮 Transformaciones Fundamentales en 3D</h4>
          
          <div class="two-col">
            <div>
              <strong>1. Traslación (afín, no lineal):</strong><br>
              Se usa matriz homogénea 4×4:<br>
              $$\begin{pmatrix} 1 & 0 & 0 & t_x \\ 0 & 1 & 0 & t_y \\ 0 & 0 & 1 & t_z \\ 0 & 0 & 0 & 1 \end{pmatrix}$$
            </div>
            
            <div>
              <strong>2. Escalamiento:</strong><br>
              $$\begin{pmatrix} s_x & 0 & 0 \\ 0 & s_y & 0 \\ 0 & 0 & s_z \end{pmatrix}$$
            </div>
          </div>
          
          <div class="two-col">
            <div>
              <strong>3. Rotación alrededor del eje Z:</strong><br>
              $$\begin{pmatrix} \cos\theta & -\sin\theta & 0 \\ \sin\theta & \cos\theta & 0 \\ 0 & 0 & 1 \end{pmatrix}$$
            </div>
            
            <div>
              <strong>4. Proyección perspectiva:</strong><br>
              Convierte 3D → 2D para mostrar en pantalla<br>
              (matriz compleja 4×4)
            </div>
          </div>
        </div>

        <div class="card">
          <div class="example-box">
            <strong>Ejemplo práctico:</strong> Rotar un triángulo 45° en el plano<br><br>
            
            <strong>Vértices originales:</strong><br>
            A = (1, 0), B = (0, 1), C = (1, 1)<br><br>
            
            <strong>Matriz de rotación 45°:</strong><br>
            $$R = \begin{pmatrix} \frac{\sqrt{2}}{2} & -\frac{\sqrt{2}}{2} \\ \frac{\sqrt{2}}{2} & \frac{\sqrt{2}}{2} \end{pmatrix}$$<br>
            
            <strong>Nuevas posiciones:</strong><br>
            $A' = R \cdot A = (\frac{\sqrt{2}}{2}, \frac{\sqrt{2}}{2}) \approx (0.71, 0.71)$<br>
            $B' = R \cdot B = (-\frac{\sqrt{2}}{2}, \frac{\sqrt{2}}{2}) \approx (-0.71, 0.71)$<br>
            $C' = R \cdot C = (0, \sqrt{2}) \approx (0, 1.41)$
          </div>
        </div>

        <h3>4.4.2 Procesamiento de Imágenes Digitales</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-imagenes')">info ¿Las imágenes son matrices?</button>
        <div id="info-imagenes" class="info-box">
          <h4>💡 Imágenes como matrices</h4>
          <p><strong>Una imagen digital</strong> es una matriz donde cada elemento es la intensidad de un píxel.</p>
          <p><strong>Operaciones comunes:</strong></p>
          <ul style="text-align: left; line-height: 1.8;">
            <li>Filtros (blur, sharpen) = convolución (transformación lineal)</li>
            <li>Rotación de imagen = transformación de coordenadas</li>
            <li>Compresión (JPEG) = transformadas (DCT, wavelets)</li>
          </ul>
          <p>👉 Instagram, Photoshop, cámaras: TODO usa álgebra lineal.</p>
        </div>
        
        <div class="three-col">
          <div class="card">
            <h4>📸 Filtro de Desenfoque</h4>
            <p style="font-size: 0.9rem;">Matriz de convolución 3×3:</p>
            $$\frac{1}{9}\begin{pmatrix} 1 & 1 & 1 \\ 1 & 1 & 1 \\ 1 & 1 & 1 \end{pmatrix}$$
            <p style="font-size: 0.85rem; margin-top: 10px;">Promedia cada píxel con sus vecinos</p>
          </div>
          
          <div class="card">
            <h4>🔍 Detección de Bordes</h4>
            <p style="font-size: 0.9rem;">Operador Sobel:</p>
            $$\begin{pmatrix} -1 & 0 & 1 \\ -2 & 0 & 2 \\ -1 & 0 & 1 \end{pmatrix}$$
            <p style="font-size: 0.85rem; margin-top: 10px;">Detecta cambios bruscos de intensidad</p>
          </div>
          
          <div class="card">
            <h4>✨ Afilado (Sharpen)</h4>
            <p style="font-size: 0.9rem;">Matriz de afilado:</p>
            $$\begin{pmatrix} 0 & -1 & 0 \\ -1 & 5 & -1 \\ 0 & -1 & 0 \end{pmatrix}$$
            <p style="font-size: 0.85rem; margin-top: 10px;">Resalta detalles finos</p>
          </div>
        </div>

        <h3>4.4.3 Compresión de Imágenes: SVD</h3>
        
        <div class="card">
          <div class="definition-box">
            <strong>Descomposición en Valores Singulares (SVD):</strong><br>
            Toda matriz $A$ de tamaño $m \times n$ se puede descomponer como:
            $$A = U\Sigma V^T$$
            donde:
            <ul style="text-align: left; line-height: 2; margin-top: 10px;">
              <li>$U$ es $m \times m$ ortogonal</li>
              <li>$\Sigma$ es $m \times n$ diagonal (valores singulares)</li>
              <li>$V$ es $n \times n$ ortogonal</li>
            </ul>
            
            <p style="margin-top: 15px;"><strong>Aplicación en compresión:</strong> Usar solo los $k$ mayores valores singulares para aproximar A:<br>
            $A_k = U_k\Sigma_kV_k^T$ (mucho más compacto si k << min(m,n))</p>
          </div>
        </div>

        <h3>4.4.4 Análisis de Componentes Principales (PCA)</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-pca')">info ¿Qué es PCA?</button>
        <div id="info-pca" class="info-box">
          <h4>💡 Reducción de dimensionalidad</h4>
          <p><strong>Problema:</strong> Tienes datos con muchas variables (alta dimensión) y quieres visualizarlos o procesarlos más fácilmente.</p>
          <p><strong>Solución PCA:</strong> Encontrar las direcciones de máxima varianza y proyectar los datos ahí.</p>
          <p><strong>Aplicaciones:</strong></p>
          <ul style="text-align: left; line-height: 1.8;">
            <li>Reconocimiento facial (eigenfaces)</li>
            <li>Análisis de datos genómicos</li>
            <li>Compresión de datos</li>
            <li>Machine learning (preprocesamiento)</li>
          </ul>
          <p>👉 Es una transformación lineal óptima para reducir dimensión preservando información.</p>
        </div>
        
        <div class="card">
          <h4>🔬 Algoritmo PCA (simplificado)</h4>
          <ol style="text-align: left; line-height: 2.2; font-size: 0.95rem;">
            <li><strong>Centrar los datos:</strong> Restar la media a cada variable</li>
            <li><strong>Matriz de covarianza:</strong> $C = \frac{1}{n}X^TX$</li>
            <li><strong>Calcular eigenvectores:</strong> Resolver $C\mathbf{v} = \lambda\mathbf{v}$</li>
            <li><strong>Ordenar por eigenvalor:</strong> Los mayores representan más varianza</li>
            <li><strong>Proyectar:</strong> $Y = XP$ donde $P$ contiene los $k$ principales eigenvectores</li>
          </ol>
        </div>

        <div class="card">
          <div class="example-box">
            <strong>Ejemplo:</strong> Datos 3D → 2D con PCA<br><br>
            
            Supongamos que tienes puntos en ℝ³ distribuidos principalmente en un plano.<br><br>
            
            <strong>PCA encuentra:</strong><br>
            • Componente principal 1: Dirección de mayor varianza en el plano<br>
            • Componente principal 2: Segunda dirección (perpendicular a la primera)<br>
            • Componente principal 3: Perpendicular al plano (varianza casi cero)<br><br>
            
            <strong>Reducción:</strong> Proyectar sobre los 2 primeros componentes pierde poca información.<br>
            Resultado: Visualización 2D que captura la esencia de los datos 3D.
          </div>
        </div>

        <h3>4.4.5 Sistemas Dinámicos Discretos</h3>
        
        <div class="card">
          <div class="definition-box">
            <strong>Modelo:</strong> $\mathbf{x}_{n+1} = A\mathbf{x}_n$<br><br>
            
            Donde $\mathbf{x}_n$ es el estado del sistema en el tiempo $n$.<br><br>
            
            <strong>Solución general:</strong> $\mathbf{x}_n = A^n\mathbf{x}_0$<br><br>
            
            <strong>Comportamiento a largo plazo:</strong> Determinado por los eigenvalores de $A$:
            <ul style="text-align: left; line-height: 2; margin-top: 10px;">
              <li>Si $|\lambda_{\max}| < 1$: El sistema tiende a cero (estable)</li>
              <li>Si $|\lambda_{\max}| = 1$: Estado estacionario o periódico</li>
              <li>Si $|\lambda_{\max}| > 1$: El sistema crece sin límite (inestable)</li>
            </ul>
          </div>
        </div>

        <div class="two-col">
          <div class="card">
            <div class="example-box">
              <strong>Aplicación:</strong> Modelo depredador-presa<br><br>
              
              $x_n$ = población de conejos<br>
              $y_n$ = población de zorros<br><br>
              
              $$\begin{pmatrix} x_{n+1} \\ y_{n+1} \end{pmatrix} = \begin{pmatrix} 1.1 & -0.2 \\ 0.1 & 0.9 \end{pmatrix} \begin{pmatrix} x_n \\ y_n \end{pmatrix}$$<br>
              
              El análisis de eigenvalores predice oscilaciones periódicas.
            </div>
          </div>
          
          <div class="card">
            <div class="example-box">
              <strong>Aplicación:</strong> Cadenas de Markov<br><br>
              
              Modela sistemas con estados discretos y transiciones probabilísticas.<br><br>
              
              <strong>Ejemplo:</strong> Clima (soleado/nublado)<br>
              Matriz de transición describe probabilidades de cambio.<br><br>
              
              Estado estacionario = eigenvector con eigenvalor 1.
            </div>
          </div>
        </div>

        <h3>4.4.6 Redes Neuronales y Deep Learning</h3>
        
        <div class="card">
          <h4>🤖 Transformaciones en cada capa</h4>
          <p style="font-size: 0.95rem; line-height: 1.8;">
            Cada capa de una red neuronal aplica una transformación <strong>casi lineal</strong>:
          </p>
          $$\mathbf{y} = \sigma(W\mathbf{x} + \mathbf{b})$$
          <p style="margin-top: 15px; font-size: 0.95rem;">
            Donde:<br>
            • $W$ es la matriz de pesos (transformación lineal)<br>
            • $\mathbf{b}$ es el sesgo (traslación)<br>
            • $\sigma$ es la función de activación no lineal (ReLU, sigmoid, etc.)
          </p>
          
          <p style="margin-top: 20px; padding: 15px; background: rgba(100, 150, 250, 0.1); border-radius: 8px; font-size: 0.95rem;">
            <strong>Clave:</strong> El "aprendizaje profundo" consiste en optimizar las matrices $W$ de múltiples capas para aproximar funciones complejas mediante composición de transformaciones lineales y no lineales.
          </p>
        </div>

        <h3>📊 Otras Aplicaciones Importantes</h3>
        
        <div class="three-col">
          <div class="card">
            <h4>📡 Procesamiento de Señales</h4>
            <p style="font-size: 0.9rem;">Transformada de Fourier (lineal) para análisis de frecuencias</p>
          </div>
          
          <div class="card">
            <h4>🏗️ Ingeniería Estructural</h4>
            <p style="font-size: 0.9rem;">Análisis de esfuerzos y deformaciones mediante matrices de rigidez</p>
          </div>
          
          <div class="card">
            <h4>💰 Economía</h4>
            <p style="font-size: 0.9rem;">Modelos input-output de Leontief para analizar economías</p>
          </div>
        </div>

        <div class="three-col">
          <div class="card">
            <h4>🔬 Química Cuántica</h4>
            <p style="font-size: 0.9rem;">Operadores cuánticos son transformaciones lineales en espacios de Hilbert</p>
          </div>
          
          <div class="card">
            <h4>🌐 PageRank de Google</h4>
            <p style="font-size: 0.9rem;">Ranking de páginas web basado en eigenvectores de matriz de enlaces</p>
          </div>
          
          <div class="card">
            <h4>🎵 Compresión de Audio</h4>
            <p style="font-size: 0.9rem;">MP3 usa transformadas (lineales) para comprimir sin pérdida perceptible</p>
          </div>
        </div>

        <div style="background: linear-gradient(135deg, rgba(255, 214, 10, 0.1), rgba(100, 150, 250, 0.1)); padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary); margin: 30px 0;">
          <h3 style="color: var(--primary); margin-bottom: 15px;">🎯 Actividad 4 - Transformaciones Lineales (15 puntos)</h3>
          <p><strong>Tipo:</strong> Proyecto aplicado individual</p>
          
          <p><strong>Objetivo:</strong> Implementar y aplicar transformaciones lineales en un contexto práctico.</p>
          
          <p><strong>Opciones de proyecto (elige UNA):</strong></p>
          <ol style="text-align: left; line-height: 2;">
            <li><strong>Opción A - Gráficos:</strong> Crear un programa que aplique rotaciones, escalamientos y reflexiones a figuras 2D
              <ul style="margin-top: 8px;">
                <li>Visualización gráfica de las transformaciones</li>
                <li>Implementación de composición de transformaciones</li>
                <li>Al menos 5 transformaciones diferentes</li>
              </ul>
            </li>
            <li><strong>Opción B - Procesamiento de imágenes:</strong> Aplicar filtros lineales a imágenes digitales
              <ul style="margin-top: 8px;">
                <li>Implementar al menos 3 filtros (blur, sharpen, edge detection)</li>
                <li>Comparación visual antes/después</li>
                <li>Análisis del efecto de cada filtro</li>
              </ul>
            </li>
            <li><strong>Opción C - PCA:</strong> Análisis de componentes principales en un dataset real
              <ul style="margin-top: 8px;">
                <li>Dataset con al menos 5 variables</li>
                <li>Reducción de dimensionalidad</li>
                <li>Visualización 2D de los resultados</li>
                <li>Interpretación de componentes principales</li>
              </ul>
            </li>
          </ol>
          
          <p style="margin-top: 15px;"><strong>Entregables:</strong></p>
          <ul style="text-align: left; line-height: 1.8;">
            <li>Código fuente (Python, MATLAB o similar)</li>
            <li>Reporte técnico (máx. 8 páginas) incluyendo:
              <ul>
                <li>Marco teórico de las transformaciones usadas</li>
                <li>Descripción de la implementación</li>
                <li>Resultados y visualizaciones</li>
                <li>Análisis y conclusiones</li>
              </ul>
            </li>
            <li>README con instrucciones de ejecución</li>
          </ul>
          
          <p style="margin-top: 15px;"><strong>Criterios de evaluación:</strong></p>
          <ul style="text-align: left; line-height: 1.8;">
            <li>Correctitud matemática de las transformaciones (5 pts)</li>
            <li>Calidad del código y documentación (4 pts)</li>
            <li>Análisis y conclusiones en el reporte (4 pts)</li>
            <li>Claridad de visualizaciones (2 pts)</li>
          </ul>
          
          <p style="margin-top: 15px; font-weight: bold;">📅 Consulta el aula virtual para la fecha límite de entrega</p>
        </div>

        <!-- Quiz interactivo Semana 12 -->
        <div class="quiz-container">
          <h3>🧠 Autoevaluación - Semana 12</h3>
          
          <div class="quiz-question">
            1. En gráficos por computadora, las transformaciones geométricas se implementan mediante:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Funciones trigonométricas complejas</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Multiplicación de matrices</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Operaciones con vectores solamente</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Algoritmos de búsqueda</div>
          </div>
          
          <div class="quiz-question">
            2. PCA (Análisis de Componentes Principales) se basa en:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Regresión lineal múltiple</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Eigenvalores y eigenvectores de la matriz de covarianza</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Determinantes de matrices</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Sistemas de ecuaciones lineales</div>
          </div>
          
          <div class="quiz-question">
            3. Los filtros de procesamiento de imágenes (blur, sharpen) son ejemplos de:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Transformaciones no lineales</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Convoluciones (transformaciones lineales)</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Operaciones lógicas</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Algoritmos de compresión</div>
          </div>
          
          <div class="quiz-question">
            4. En redes neuronales, la multiplicación Wx + b representa:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Una función de pérdida</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Un algoritmo de backpropagation</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Una transformación afín (lineal + traslación)</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Una función de activación</div>
          </div>
        </div>

        <div class="card" style="background: var(--grad-primary); text-align: center; padding: 40px; margin-top: 40px;">
          <h2 style="color: white; font-size: 2rem; margin-bottom: 20px;">🎓 ¡Felicidades!</h2>
          <p style="color: white; font-size: 1.2rem; line-height: 1.8;">
            Has completado la Unidad IV: Transformaciones Lineales.<br>
            Ahora comprendes cómo el álgebra lineal impulsa la tecnología moderna:<br>
            desde videojuegos hasta inteligencia artificial.
          </p>
          <p style="color: white; font-weight: bold; margin-top: 30px; font-size: 1.1rem;">
            Universidad del SABES - 2025
          </p>
          <p style="color: white; margin-top: 20px; font-size: 1rem;">
            🎉 ¡Has completado el curso completo de Álgebra Lineal! 🎉
          </p>
        </div>
      </div>
    </div>
  </div>

</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Eliminación gaussiana (Gauss)</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Método gráfico</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Sustitución manual</div>
          </div>
          
          <div class="quiz-question">
            4. ¿Qué aplicación NO utiliza sistemas de ecuaciones lineales?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Análisis de circuitos eléctricos</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Redes neuronales artificiales</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Filosofía moral</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Balanceo de reacciones químicas</div>
          </div>
        </div>

        <div class="card" style="background: var(--grad-primary); text-align: center; padding: 40px; margin-top: 40px;">
          <h2 style="color: white; font-size: 2rem; margin-bottom: 20px;">🎓 ¡Felicidades!</h2>
          <p style="color: white; font-size: 1.2rem; line-height: 1.8;">
            Has completado la Unidad II: Sistemas de Ecuaciones Lineales.<br>
            Ahora dominas los métodos fundamentales para resolver sistemas<br>
            y sus aplicaciones en ingeniería, ciencia e inteligencia artificial.
          </p>
          <p style="color: white; font-weight: bold; margin-top: 30px; font-size: 1.1rem;">
            Universidad del SABES - 2025
          </p>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- ======= CONTROLES DE NAVEGACIÓN INFERIOR ======= -->
<div class="nav-controls" role="navigation" aria-label="Navegación de diapositivas">
  <button class="nav-btn" onclick="goToStart()" id="startBtn" aria-label="Ir al inicio">
    <span aria-hidden="true">⏮</span> Inicio
  </button>
  <button class="nav-btn" onclick="previousSlide()" id="prevBtn" aria-label="Diapositiva anterior">
    <span aria-hidden="true">◀</span> Atrás
  </button>
  <button class="nav-btn" onclick="nextSlide()" id="nextBtn" aria-label="Siguiente diapositiva">
    Adelante <span aria-hidden="true">▶</span>
  </button>
  <button class="nav-btn" onclick="goToEnd()" id="endBtn" aria-label="Ir al final">
    Fin <span aria-hidden="true">⏭</span>
  </button>
</div>

<!-- ======= JAVASCRIPT ======= -->
<script>
// ========== VARIABLES GLOBALES ==========
let currentSlide = 0;
let zoom = 1;
const totalSlides = document.querySelectorAll('.slide').length;

// Variable para verificar si MathJax está listo
window.mathJaxReady = false;

// Variables para Three.js
let scene, camera, renderer, cube, axes, grid;
let animationId = null;
let isAnimating = false;

// ========== INICIALIZACIÓN ==========
document.addEventListener('DOMContentLoaded', () => {
  showSlide(0);
  initializeParticles();
  initializeThreeJS();
  updateProgress();
  console.log('✅ Curso de Álgebra Lineal - Universidad del SABES');
  console.log('📊 Total de slides:', totalSlides);
});

// ========== NAVEGACIÓN ==========
function showSlide(index) {
  if (index < 0) index = 0;
  if (index >= totalSlides) index = totalSlides - 1;
  
  currentSlide = index;
  
  const slides = document.querySelectorAll('.slide');
  slides.forEach((slide, i) => {
    slide.classList.remove('active', 'previous');
    if (i < currentSlide) {
      slide.classList.add('previous');
    }
  });
  
  slides[currentSlide].classList.add('active');
  
  updateNavigationButtons();
  updateProgress();
  
  // Renderizar MathJax solo si está listo
  if (window.mathJaxReady && typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
    MathJax.typesetPromise([slides[currentSlide]]).catch((err) => console.log('MathJax error:', err));
  }
}

function goToSlide(index) {
  showSlide(index);
}

function nextSlide() {
  if (currentSlide < totalSlides - 1) {
    showSlide(currentSlide + 1);
  }
}

function previousSlide() {
  if (currentSlide > 0) {
    showSlide(currentSlide - 1);
  }
}

function goToStart() {
  showSlide(0);
}

function goToEnd() {
  showSlide(totalSlides - 1);
}

function updateNavigationButtons() {
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const startBtn = document.getElementById('startBtn');
  const endBtn = document.getElementById('endBtn');
  
  prevBtn.disabled = currentSlide === 0;
  startBtn.disabled = currentSlide === 0;
  nextBtn.disabled = currentSlide === totalSlides - 1;
  endBtn.disabled = currentSlide === totalSlides - 1;
}

function updateProgress() {
  const progressBar = document.getElementById('progress');
  const progressText = document.getElementById('userProgress');
  const progressContainer = document.querySelector('.progress-bar');
  const progress = ((currentSlide + 1) / totalSlides) * 100;
  
  progressBar.style.width = progress + '%';
  progressText.textContent = Math.round(progress) + '%';
  
  // Actualizar atributos ARIA
  if (progressContainer) {
    progressContainer.setAttribute('aria-valuenow', Math.round(progress));
    progressContainer.setAttribute('aria-valuetext', `Diapositiva ${currentSlide + 1} de ${totalSlides}`);
  }
}

// ========== BARRAS LATERALES ==========
document.getElementById('btn-home').onclick = () => goToStart();
document.getElementById('btn-prev').onclick = () => previousSlide();
document.getElementById('btn-next').onclick = () => nextSlide();

document.getElementById('btn-access').onclick = () => {
  document.getElementById('accessibilityModal').classList.add('active');
};

document.getElementById('btn-help').onclick = () => {
  alert('❓ Ayuda de Navegación:\n\n🖱️ Usa los botones laterales o inferiores\n⌨️ Teclas: ← Atrás | → Adelante\n🔍 Botones + y - para Zoom\n⛶ Pantalla completa disponible\n💬 Modal para más información');
};

// Tema
const themeBtn = document.getElementById('btn-theme');
const toggleTheme = () => {
  const html = document.documentElement;
  const currentTheme = html.getAttribute('data-theme');
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', newTheme);
  document.body.setAttribute('data-theme', newTheme);
  themeBtn.textContent = newTheme === 'dark' ? '☀️' : '🌙';
};
themeBtn.onclick = toggleTheme;

// Zoom
document.getElementById('btn-zoom-in').onclick = () => {
  zoom = Math.min(2, zoom + 0.1);
  document.body.style.transform = `scale(${zoom})`;
  document.body.style.transformOrigin = 'center top';
};

document.getElementById('btn-zoom-out').onclick = () => {
  zoom = Math.max(0.8, zoom - 0.1);
  document.body.style.transform = `scale(${zoom})`;
  document.body.style.transformOrigin = 'center top';
};

// Pantalla completa
document.getElementById('btn-fullscreen').onclick = () => {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
  } else {
    document.exitFullscreen();
  }
};

// Modal
document.getElementById('btn-modal').onclick = () => {
  document.getElementById('infoModal').classList.add('active');
};

function cerrarModal() {
  document.getElementById('infoModal').classList.remove('active');
}

function cerrarModalAccesibilidad() {
  document.getElementById('accessibilityModal').classList.remove('active');
}

document.getElementById('btn-info').onclick = () => {
  alert('ℹ️ Información del Curso:\n\n📚 Álgebra Lineal - Unidad I\n🎓 Universidad del SABES\n📅 2025\n\n✨ Proyecto educativo interactivo\n✅ Cumple WCAG 2.2 AA\n🌐 Diseño responsive');
};

document.getElementById('btn-exit').onclick = () => {
  if (confirm('❌ ¿Deseas salir de la presentación?')) {
    window.close();
  }
};

// ========== NAVEGACIÓN POR TECLADO ==========
document.addEventListener('keydown', (e) => {
  // Evitar navegación si hay un modal abierto (excepto Escape)
  const modalActive = document.querySelector('.modal.active');
  if (modalActive && e.key !== 'Escape') {
    return;
  }
  
  if (e.key === 'ArrowRight' || e.key === 'PageDown' || e.key === ' ' || e.key === 'Enter') {
    e.preventDefault();
    nextSlide();
  } else if (e.key === 'ArrowLeft' || e.key === 'PageUp') {
    e.preventDefault();
    previousSlide();
  } else if (e.key === 'Home') {
    e.preventDefault();
    goToStart();
  } else if (e.key === 'End') {
    e.preventDefault();
    goToEnd();
  } else if (e.key === 'Escape') {
    cerrarModal();
    cerrarModalAccesibilidad();
  } else if (e.key === 'f' || e.key === 'F') {
    e.preventDefault();
    if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen();
    } else {
      document.exitFullscreen();
    }
  } else if (e.key === '+' || e.key === '=') {
    e.preventDefault();
    zoom = Math.min(2, zoom + 0.1);
    document.body.style.transform = `scale(${zoom})`;
    document.body.style.transformOrigin = 'center top';
  } else if (e.key === '-' || e.key === '_') {
    e.preventDefault();
    zoom = Math.max(0.8, zoom - 0.1);
    document.body.style.transform = `scale(${zoom})`;
    document.body.style.transformOrigin = 'center top';
  } else if (e.key === '0') {
    e.preventDefault();
    zoom = 1;
    document.body.style.transform = `scale(${zoom})`;
    document.body.style.transformOrigin = 'center top';
  } else if (e.key >= '0' && e.key <= '7') {
    // Navegación directa a slides con teclas numéricas
    e.preventDefault();
    const slideNumber = parseInt(e.key);
    if (slideNumber < totalSlides) {
      goToSlide(slideNumber);
    }
  }
});

// ========== PARTÍCULAS ANIMADAS ==========
function initializeParticles() {
  const particlesContainer = document.getElementById('particles');
  if (!particlesContainer) return;
  
  for (let i = 0; i < 20; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = Math.random() * 100 + '%';
    particle.style.animationDelay = Math.random() * 8 + 's';
    particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
    particlesContainer.appendChild(particle);
  }
}

// ========== CALCULADORA MATRICIAL ==========
function calculateMatrixOperation(operation) {
  const a11 = parseFloat(document.getElementById('a11').value) || 0;
  const a12 = parseFloat(document.getElementById('a12').value) || 0;
  const a21 = parseFloat(document.getElementById('a21').value) || 0;
  const a22 = parseFloat(document.getElementById('a22').value) || 0;
  
  const b11 = parseFloat(document.getElementById('b11').value) || 0;
  const b12 = parseFloat(document.getElementById('b12').value) || 0;
  const b21 = parseFloat(document.getElementById('b21').value) || 0;
  const b22 = parseFloat(document.getElementById('b22').value) || 0;
  
  const resultDiv = document.getElementById('calculatorResult');
  
  let result = '';
  
  if (operation === 'add') {
    const r11 = a11 + b11;
    const r12 = a12 + b12;
    const r21 = a21 + b21;
    const r22 = a22 + b22;
    result = `$$A + B = \\begin{pmatrix}${r11} & ${r12} \\\\ ${r21} & ${r22}\\end{pmatrix}$$`;
  } else if (operation === 'multiply') {
    const r11 = a11 * b11 + a12 * b21;
    const r12 = a11 * b12 + a12 * b22;
    const r21 = a21 * b11 + a22 * b21;
    const r22 = a21 * b12 + a22 * b22;
    result = `$$A \\times B = \\begin{pmatrix}${r11} & ${r12} \\\\ ${r21} & ${r22}\\end{pmatrix}$$`;
  } else if (operation === 'determinant') {
    const det = a11 * a22 - a12 * a21;
    result = `$$\\det(A) = ${a11} \\cdot ${a22} - ${a12} \\cdot ${a21} = ${det}$$`;
  }
  
  resultDiv.innerHTML = result;
  
  // Renderizar MathJax solo si está listo
  if (window.mathJaxReady && typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
    MathJax.typesetPromise([resultDiv]).catch((err) => console.log('MathJax error:', err));
  }
}

function updateCalculator() {
  // Actualización automática se puede implementar aquí si se desea
}

// ========== QUIZ INTERACTIVO ==========
function checkAnswer(element, type) {
  // Remover clases previas de todas las opciones del mismo quiz
  const options = element.parentElement.querySelectorAll('.quiz-option');
  options.forEach(opt => {
    opt.classList.remove('correct', 'incorrect');
    opt.style.pointerEvents = 'auto';
  });
  
  // Agregar clase según respuesta
  if (type === 'correct') {
    element.classList.add('correct');
    // Desactivar todas las opciones después de responder correctamente
    options.forEach(opt => {
      opt.style.pointerEvents = 'none';
    });
    setTimeout(() => {
      alert('✅ ¡Correcto! Excelente.\n\n💡 Has demostrado comprensión del tema.');
    }, 100);
  } else {
    element.classList.add('incorrect');
    setTimeout(() => {
      alert('❌ Incorrecto. \n\n📚 Te recomendamos revisar el contenido de esta semana.\n\n💪 ¡Inténtalo de nuevo!');
      // Remover la marca incorrecta para permitir otro intento
      setTimeout(() => {
        element.classList.remove('incorrect');
      }, 500);
    }, 100);
  }
}

// ========== BOTONES INFO ==========
function toggleInfo(infoId) {
  const infoBox = document.getElementById(infoId);
  if (infoBox) {
    infoBox.classList.toggle('active');
  }
}

// ========== THREE.JS - VISUALIZACIÓN 3D ==========
function initializeThreeJS() {
  const canvas = document.getElementById('threejs-canvas');
  if (!canvas) return;
  
  // Configurar escena
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0x1a1f2e);
  
  // Configurar cámara
  camera = new THREE.PerspectiveCamera(75, canvas.parentElement.clientWidth / 400, 0.1, 1000);
  camera.position.set(5, 5, 5);
  camera.lookAt(0, 0, 0);
  
  // Configurar renderer
  renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
  renderer.setSize(canvas.parentElement.clientWidth, 400);
  
  // Agregar luces
  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);
  
  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
  directionalLight.position.set(10, 10, 10);
  scene.add(directionalLight);
  
  // Crear cubo con geometría
  const geometry = new THREE.BoxGeometry(2, 2, 2);
  const material = new THREE.MeshPhongMaterial({ 
    color: 0x6496fa,
    transparent: true,
    opacity: 0.8
  });
  cube = new THREE.Mesh(geometry, material);
  scene.add(cube);
  
  // Agregar wireframe
  const wireframe = new THREE.WireframeGeometry(geometry);
  const line = new THREE.LineSegments(wireframe);
  line.material.color.setHex(0x00d4aa);
  line.material.linewidth = 2;
  cube.add(line);
  
  // Agregar ejes
  axes = new THREE.AxesHelper(4);
  scene.add(axes);
  
  // Agregar grid
  grid = new THREE.GridHelper(10, 10, 0x6496fa, 0x2a3142);
  scene.add(grid);
  
  // Iniciar animación
  animate3D();
}

function animate3D() {
  animationId = requestAnimationFrame(animate3D);
  
  if (cube && !isAnimating) {
    cube.rotation.x += 0.005;
    cube.rotation.y += 0.005;
  }
  
  if (renderer && scene && camera) {
    renderer.render(scene, camera);
  }
}

function animateTransformation(type) {
  if (!cube) return;
  
  isAnimating = true;
  let progress = 0;
  const duration = 2000; // 2 segundos
  const startTime = Date.now();
  
  const originalScale = { x: 1, y: 1, z: 1 };
  const originalRotation = { x: cube.rotation.x, y: cube.rotation.y, z: cube.rotation.z };
  
  function animateStep() {
    const currentTime = Date.now();
    progress = Math.min((currentTime - startTime) / duration, 1);
    
    if (type === 'rotation') {
      cube.rotation.y = originalRotation.y + progress * Math.PI * 2;
    } else if (type === 'scaling') {
      const scale = 1 + Math.sin(progress * Math.PI) * 0.5;
      cube.scale.set(scale, scale, scale);
    } else if (type === 'shear') {
      cube.rotation.x = originalRotation.x + Math.sin(progress * Math.PI * 2) * 0.5;
    }
    
    if (progress < 1) {
      requestAnimationFrame(animateStep);
    } else {
      isAnimating = false;
    }
  }
  
  animateStep();
}

function resetTransformation() {
  if (!cube) return;
  cube.rotation.set(0, 0, 0);
  cube.scale.set(1, 1, 1);
  cube.position.set(0, 0, 0);
}

// Redimensionar canvas cuando cambia el tamaño de la ventana
window.addEventListener('resize', () => {
  const canvas = document.getElementById('threejs-canvas');
  if (canvas && renderer && camera) {
    const width = canvas.parentElement.clientWidth;
    const height = 400;
    renderer.setSize(width, height);
    camera.aspect = width / height;
    camera.updateProjectionMatrix();
  }
});
</script>

</body>
</html>