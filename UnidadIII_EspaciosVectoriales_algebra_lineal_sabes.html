<!DOCTYPE html>
<html data-theme="light" lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, viewport-fit=cover" name="viewport"/>
<meta name="description" content="Curso interactivo de Álgebra Lineal - Unidad II: Sistemas de Ecuaciones Lineales. Cumple con estándares WCAG 2.2 AA de accesibilidad."/>
<meta name="keywords" content="álgebra lineal, sistemas de ecuaciones, Gauss, Gauss-Jordán, Cramer, educación, SABES, accesible, WCAG"/>
<meta name="author" content="Universidad del SABES"/>
<title>Álgebra Lineal - Unidad III: Espacios Vectoriales | Universidad del SABES</title>

<!-- MathJax Configuration -->
<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    processEscapes: true,
    tags: 'ams'
  },
  svg: {
    fontCache: 'global'
  },
  startup: {
    ready: function () {
      MathJax.startup.defaultReady();
      console.log('✅ MathJax completamente listo');
      window.mathJaxReady = true;
      // Renderizar el slide actual después de que MathJax esté listo
      setTimeout(() => {
        const currentSlideElement = document.querySelector('.slide.active');
        if (currentSlideElement) {
          MathJax.typesetPromise([currentSlideElement]).catch((err) => console.log('MathJax error:', err));
        }
      }, 100);
    }
  }
};
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Three.js Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<style>
/* ======= IMPORTACIÓN DE FUENTES ======= */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=JetBrains+Mono:wght@400;700&display=swap');

/* ======= FOCO VISIBLE (WCAG 2.4.7 - AA) ======= */
*:focus {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
}

button:focus,
a:focus,
input:focus,
.quiz-option:focus {
  outline: 3px solid #f57c00;
  outline-offset: 3px;
  box-shadow: 0 0 0 4px rgba(245, 124, 0, 0.2);
}

.control-btn:focus {
  outline: 3px solid #ffffff;
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(245, 124, 0, 0.4);
}

.nav-btn:focus {
  outline: 3px solid #f57c00;
  outline-offset: 2px;
  transform: scale(1.05);
}

/* Skip to main content link (invisible hasta que recibe foco) */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--accent);
  color: white;
  padding: 10px 20px;
  text-decoration: none;
  font-weight: bold;
  z-index: 10000;
  border-radius: 0 0 8px 0;
}

.skip-link:focus {
  top: 0;
}

/* ======= SKIP LINK (WCAG 2.4.1) ======= */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: #f57c00;
  color: white;
  padding: 12px 20px;
  text-decoration: none;
  font-weight: bold;
  z-index: 10000;
  border-radius: 0 0 8px 0;
}

.skip-link:focus {
  top: 0;
  outline: 3px solid #ffffff;
  outline-offset: 2px;
}

/* ======= FOCO VISIBLE MEJORADO (WCAG 2.4.7 y 2.4.11) ======= */
*:focus {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
}

*:focus:not(:focus-visible) {
  outline: none;
}

*:focus-visible {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(37, 99, 235, 0.2);
}

button:focus-visible,
a:focus-visible,
input:focus-visible {
  outline: 3px solid #f57c00;
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(245, 124, 0, 0.2);
}

[data-theme="dark"] *:focus-visible {
  outline-color: var(--secondary);
  box-shadow: 0 0 0 5px rgba(0, 212, 170, 0.2);
}

/* ======= MODO ALTO CONTRASTE (WCAG 2.2) ======= */
@media (prefers-contrast: high) {
  :root {
    --primary: #0000ff;
    --secondary: #008000;
    --accent: #ff8800;
  }
  
  [data-theme="light"] {
    --ink: #000000;
    --bg: #ffffff;
    --muted: #000000;
  }
  
  [data-theme="dark"] {
    --ink: #ffffff;
    --bg: #000000;
    --muted: #ffffff;
  }
  
  .card, .definition-box, .example-box {
    border: 2px solid currentColor !important;
  }
}

/* ======= RESPETO A PREFERENCIAS DE MOVIMIENTO (WCAG 2.2) ======= */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .slide {
    transition: none !important;
  }
  
  .particle, .symbol, .brackets {
    animation: none !important;
  }
}

/* ======= VARIABLES CSS ======= */
:root{ 
  --base-font:16px; 
  --bg:#1a1f2e;
  --panel:#2a3142ee;
  --ink:#ffffff;
  --muted:#94a3b8;
  --primary:#6496fa;
  --secondary:#00d4aa;
  --accent:#ffd60a;
  --success:#06d6a0;
  --warn:#ffbe0b;
  --danger:#ef476f;
  --steel:#64748b;
  --grad-primary: linear-gradient(135deg, #6496fa 0%, #00d4aa 100%);
}

[data-theme="light"] {
  --bg:#f8fafc;
  --panel:#ffffff;
  --ink:#1e293b;
  --muted:#475569;
  --primary:#2563eb;
  --secondary:#059669;
  --accent:#d97706;
  --success:#059669;
  --warn:#d97706;
  --danger:#dc2626;
  --steel:#64748b;
}

*{box-sizing:border-box;margin:0;padding:0;}
html,body{min-height:100vh;font-size:var(--base-font);line-height:1.65;}

body{
  font-family:'Inter',sans-serif;
  color:var(--ink);
  background:var(--bg);
  min-height:100vh;
  padding:0;
  overflow-x: hidden;
  transition: all 0.3s ease;
}

/* ======= BANNER SUPERIOR SABES ======= */
.banner-sabes {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 90px;
  width: 100%;
  position: fixed;
  top: 0;
  z-index: 1000;
  background: linear-gradient(120deg, #b56c13 0%, #e39a27 25%, #5ca8eb 70%, #a7d3f9 100%);
  backdrop-filter: blur(10px) saturate(180%);
  background-blend-mode: overlay;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
  border-bottom: 2px solid rgba(255, 255, 255, 0.15);
}
.banner-sabes img {
  height: 88px;
  width: auto;
  object-fit: contain;
  opacity: 0.98;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* ======= BARRAS LATERALES SABES ======= */
.sidebar {
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 15px;
  z-index: 900;
  padding: 10px;
  border-radius: 16px;
  backdrop-filter: blur(10px) saturate(180%);
  background: rgba(255, 255, 255, 0.15);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
}
.left-bar { left: 15px; }
.right-bar { right: 15px; }

.control-btn {
  width: 54px;
  height: 54px;
  border-radius: 50%;
  border: none;
  background: #f57c00;
  color: white;
  font-size: 24px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  cursor: pointer;
  transition: transform 0.3s ease, background 0.3s ease;
}
.control-btn:hover {
  transform: scale(1.15) rotate(5deg);
  background: #ff9800;
}

/* ======= BARRA DE PROGRESO ======= */
.progress-bar {
  position: fixed;
  top: 90px;
  left: 0;
  width: 100%;
  height: 4px;
  background: rgba(100, 150, 250, 0.2);
  z-index: 999;
}

.progress {
  height: 100%;
  background: var(--grad-primary);
  width: 0%;
  transition: width 0.3s ease;
}

/* ======= INDICADOR DE PROGRESO ======= */
.progress-indicator {
  position: fixed;
  top: 110px;
  right: 20px;
  background: rgba(42, 49, 66, 0.9);
  padding: 10px 20px;
  border-radius: 20px;
  z-index: 999;
  font-weight: 600;
  font-size: 0.9rem;
  border: 1px solid rgba(100, 150, 250, 0.3);
  backdrop-filter: blur(10px);
}

[data-theme="light"] .progress-indicator {
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

/* ======= MODAL SABES ======= */
.modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: var(--panel);
  color: var(--ink);
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  z-index: 2000;
  width: 60%;
  max-width: 500px;
  border: 2px solid rgba(100, 150, 250, 0.3);
  max-height: 80vh;
  overflow-y: auto;
}
.modal.active {
  display: block;
  animation: fadeIn 0.5s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translate(-50%, -60%); }
  to { opacity: 1; transform: translate(-50%, -50%); }
}

.modal h3 {
  margin-bottom: 15px;
  color: var(--primary);
}

.modal button {
  margin-top: 20px;
  padding: 10px 20px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}

.modal button:hover {
  background: var(--secondary);
}

/* ======= CONTROLES DE NAVEGACIÓN INFERIOR ======= */
.nav-controls {
  position: absolute;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 15px;
  z-index: 100;
  background: rgba(255, 255, 255, 0.95);
  padding: 15px 25px;
  border-radius: 50px;
  backdrop-filter: blur(10px);
  border: 2px solid rgba(37, 99, 235, 0.3);
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

[data-theme="dark"] .nav-controls {
  background: rgba(42, 49, 66, 0.95);
  border: 2px solid rgba(100, 150, 250, 0.3);
}

.nav-btn {
  background: #2563eb;
  color: white;
  border: none;
  border-radius: 12px;
  padding: 14px 24px;
  cursor: pointer;
  font-weight: 600;
  font-size: 15px;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 110px;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
}

.nav-btn:hover:not(:disabled) {
  background: #1d4ed8;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
}

.nav-btn:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: 0 1px 4px rgba(37, 99, 235, 0.3);
}

[data-theme="dark"] .nav-btn {
  background: #3b82f6;
}

[data-theme="dark"] .nav-btn:hover:not(:disabled) {
  background: #2563eb;
}

.nav-btn:disabled {
  background: #64748b;
  color: #ffffff;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
  opacity: 0.6;
}

[data-theme="light"] .nav-btn:disabled {
  background: #94a3b8;
  color: #1e293b;
}

/* ======= SLIDES CONTAINER ======= */
.slides-container {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  position: relative;
  padding-top: 94px;
}

.slide {
  position: absolute;
  top: 94px;
  left: 0;
  width: 100%;
  height: calc(100% - 94px);
  padding: 40px 100px 140px 100px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  opacity: 0;
  transform: translateX(100%);
  transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  overflow-y: auto;
}

.slide.active {
  opacity: 1;
  transform: translateX(0);
}

.slide.previous {
  transform: translateX(-100%);
}

/* ======= PORTADA MEJORADA ======= */
.cover-slide {
  text-align: center;
  background: 
    radial-gradient(circle at 20% 80%, rgba(100, 150, 250, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(0, 212, 170, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(255, 214, 10, 0.05) 0%, transparent 50%),
    linear-gradient(135deg, var(--bg) 0%, color-mix(in srgb, var(--bg) 70%, var(--primary) 30%) 100%);
  position: relative;
  overflow: hidden;
}

[data-theme="light"] .cover-slide {
  background: 
    radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(16, 185, 129, 0.08) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(245, 158, 11, 0.05) 0%, transparent 50%),
    linear-gradient(135deg, var(--bg) 0%, color-mix(in srgb, var(--bg) 90%, var(--primary) 10%) 100%);
}

/* Grid de fondo animado */
.matrix-grid-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    linear-gradient(rgba(100, 150, 250, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(100, 150, 250, 0.1) 1px, transparent 1px);
  background-size: 50px 50px;
  animation: gridMove 20s linear infinite;
  opacity: 0.3;
}

[data-theme="light"] .matrix-grid-bg {
  background-image: 
    linear-gradient(rgba(59, 130, 246, 0.15) 1px, transparent 1px),
    linear-gradient(90deg, rgba(59, 130, 246, 0.15) 1px, transparent 1px);
}

@keyframes gridMove {
  0% { transform: translate(0, 0); }
  100% { transform: translate(50px, 50px); }
}

/* Partículas flotantes */
.particles {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: var(--primary);
  border-radius: 50%;
  animation: particleFloat 8s linear infinite;
}

@keyframes particleFloat {
  0% {
    transform: translateY(100vh) rotate(0deg);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    transform: translateY(-100px) rotate(360deg);
    opacity: 0;
  }
}

.floating-symbols {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.symbol {
  position: absolute;
  font-family: 'JetBrains Mono', monospace;
  font-size: 24px;
  color: rgba(100, 150, 250, 0.6);
  animation: float 6s ease-in-out infinite;
}

[data-theme="light"] .symbol {
  color: rgba(59, 130, 246, 0.5);
}

.symbol:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
.symbol:nth-child(2) { top: 80%; left: 85%; animation-delay: 1s; }
.symbol:nth-child(3) { top: 60%; left: 15%; animation-delay: 2s; }
.symbol:nth-child(4) { top: 30%; left: 90%; animation-delay: 3s; }
.symbol:nth-child(5) { top: 70%; left: 70%; animation-delay: 4s; }
.symbol:nth-child(6) { top: 40%; left: 5%; animation-delay: 5s; }

@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(180deg); }
}

/* Brackets animados */
.brackets {
  position: absolute;
  font-family: 'JetBrains Mono', monospace;
  font-size: 120px;
  color: rgba(100, 150, 250, 0.3);
  font-weight: 900;
  animation: pulse 4s ease-in-out infinite;
}

[data-theme="light"] .brackets {
  color: rgba(59, 130, 246, 0.2);
}

.left-bracket {
  left: 10%;
  top: 50%;
  transform: translateY(-50%);
}

.right-bracket {
  right: 10%;
  top: 50%;
  transform: translateY(-50%);
}

@keyframes pulse {
  0%, 100% { opacity: 0.3; transform: translateY(-50%) scale(1); }
  50% { opacity: 0.6; transform: translateY(-50%) scale(1.1); }
}

/* Títulos portada */
.cover-title {
  font-size: clamp(3rem, 6vw, 5rem);
  font-weight: 900;
  background: linear-gradient(135deg, #1e293b 0%, #2563eb 30%, #059669 70%, #d97706 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 20px;
  position: relative;
  z-index: 2;
  animation: titleGlow 3s ease-in-out infinite alternate;
}

[data-theme="dark"] .cover-title {
  background: linear-gradient(135deg, var(--ink) 0%, var(--primary) 30%, var(--secondary) 70%, var(--accent) 100%);
}

@keyframes titleGlow {
  from { filter: drop-shadow(0 0 20px rgba(37, 99, 235, 0.4)); }
  to { filter: drop-shadow(0 0 40px rgba(37, 99, 235, 0.7)) drop-shadow(0 0 60px rgba(5, 150, 105, 0.5)); }
}

.cover-subtitle {
  font-size: clamp(1.8rem, 4vw, 3rem);
  background: linear-gradient(135deg, #059669 0%, #2563eb 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 700;
  margin-bottom: 40px;
  position: relative;
  z-index: 2;
}

[data-theme="dark"] .cover-subtitle {
  background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
}

.learning-objectives {
  max-width: 800px;
  margin: 40px auto;
  text-align: center;
  position: relative;
  z-index: 2;
  background: rgba(42, 49, 66, 0.7);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 30px;
  border: 1px solid rgba(100, 150, 250, 0.3);
  box-shadow: 0 20px 40px rgba(0,0,0,0.2);
  animation: slideUp 1s ease-out;
}

[data-theme="light"] .learning-objectives {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

@keyframes slideUp {
  from { 
    opacity: 0;
    transform: translateY(30px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

.learning-objectives h3 {
  color: var(--accent);
  margin-bottom: 20px;
  font-size: 1.5rem;
}

.learning-objectives p {
  font-size: 1.1rem;
  line-height: 1.8;
  color: var(--ink);
}

/* ======= BOTÓN CTA Y BOTONES INFO ======= */
.cta-button {
  margin-top: 50px;
  position: relative;
  z-index: 2;
}

.glow-button {
  background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
  color: white;
  border: none;
  border-radius: 50px;
  padding: 18px 40px;
  font-size: 1.2rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(245, 124, 0, 0.3);
}

.glow-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.5s;
}

.glow-button:hover::before {
  left: 100%;
}

.glow-button:hover {
  transform: translateY(-5px) scale(1.05);
  box-shadow: 0 20px 40px rgba(245, 124, 0, 0.5);
}

/* Botones info naranjas */
.info-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
  color: white;
  border: none;
  border-radius: 25px;
  padding: 10px 20px;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  margin: 10px 5px;
  box-shadow: 0 4px 12px rgba(245, 124, 0, 0.3);
}

.info-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(245, 124, 0, 0.5);
  background: linear-gradient(135deg, #ff9800 0%, #ffa726 100%);
}

.info-btn::before {
  content: '+';
  font-size: 1.2rem;
  font-weight: bold;
}

/* Caja de información expandible */
.info-box {
  display: none;
  background: linear-gradient(135deg, rgba(245, 124, 0, 0.1), rgba(255, 152, 0, 0.1));
  border-left: 4px solid #f57c00;
  padding: 20px;
  border-radius: 12px;
  margin: 15px 0;
  animation: slideDown 0.3s ease-out;
}

.info-box.active {
  display: block;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.info-box h4 {
  color: #f57c00;
  margin-bottom: 10px;
}

.info-box p {
  color: var(--ink);
  line-height: 1.7;
}

/* ======= TARJETAS DE SEMANAS ======= */
.week-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
  max-width: 1200px;
  margin: 40px auto;
  width: 100%;
}

.week-card {
  background: linear-gradient(145deg, var(--panel), var(--bg));
  border: 2px solid var(--primary);
  border-radius: 20px;
  padding: 30px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  animation: fadeInUp 0.6s ease-out;
}

.week-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  border-color: var(--secondary);
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.week-number {
  font-size: 3rem;
  font-weight: 900;
  color: var(--primary);
  margin-bottom: 15px;
}

.week-title {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 15px;
  color: var(--secondary);
}

.week-topics {
  font-size: 0.9rem;
  color: var(--muted);
  line-height: 1.8;
  text-align: left;
}

/* ======= CONTENIDO DE SEMANAS ======= */
.content-container {
  max-width: 1200px;
  width: 100%;
  background: linear-gradient(145deg, var(--panel), var(--bg));
  border-radius: 20px;
  padding: 40px;
  border: 1px solid rgba(100, 150, 250, 0.3);
  box-shadow: 0 20px 50px rgba(0,0,0,0.3);
  max-height: 80vh;
  overflow-y: auto;
}

.week-section {
  color: var(--ink);
}

.week-badge {
  display: inline-block;
  background: var(--grad-primary);
  color: white;
  padding: 8px 20px;
  border-radius: 20px;
  font-weight: 700;
  margin-bottom: 20px;
  font-size: 0.9rem;
}

.section-title {
  font-size: 2.5rem;
  font-weight: 900;
  color: var(--primary);
  text-align: center;
  margin-bottom: 20px;
}

/* Títulos */
h1, h2, h3, h4, h5, h6 {
  margin-bottom: 1rem;
  line-height: 1.3;
  color: var(--ink);
}

h2 { font-size: 2rem; font-weight: 700; color: var(--primary); margin-bottom: 1.5rem; }
h3 { font-size: 1.6rem; font-weight: 700; color: var(--secondary); margin-top: 2rem; margin-bottom: 1rem; }
h4 { font-size: 1.3rem; font-weight: 600; color: var(--accent); margin-bottom: 0.8rem; }

p {
  margin-bottom: 1rem;
  color: var(--muted);
  line-height: 1.7;
}

/* ======= TARJETAS Y CAJAS ======= */
.card {
  background: rgba(42, 49, 66, 0.5);
  border-radius: 16px;
  padding: 20px;
  margin: 20px 0;
  border: 1px solid rgba(100, 150, 250, 0.2);
  backdrop-filter: blur(10px);
}

[data-theme="light"] .card {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.definition-box {
  background: linear-gradient(135deg, rgba(100, 150, 250, 0.15) 0%, rgba(0, 212, 170, 0.15) 100%);
  border-left: 4px solid var(--primary);
  padding: 15px;
  border-radius: 8px;
  margin: 15px 0;
}

.example-box {
  background: rgba(0, 212, 170, 0.1);
  border-left: 4px solid var(--secondary);
  padding: 15px;
  border-radius: 8px;
  margin: 15px 0;
}

.citation {
  background: rgba(255, 214, 10, 0.1);
  border-left: 4px solid var(--accent);
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
  font-style: italic;
  color: var(--muted);
}

/* ======= LAYOUTS ======= */
.two-col {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
  margin: 20px 0;
}

.three-col {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin: 20px 0;
}

/* ======= CALCULADORA MATRICIAL ======= */
.calculator-container {
  background: var(--panel);
  border-radius: 20px;
  padding: 30px;
  margin: 30px 0;
  border: 2px solid var(--primary);
}

.calculator-matrix {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin: 15px 0;
}

.calculator-row {
  display: flex;
  gap: 10px;
  justify-content: center;
}

.calculator-input {
  width: 80px;
  padding: 10px;
  font-size: 1.2rem;
  text-align: center;
  border: 2px solid var(--primary);
  border-radius: 8px;
  background: var(--bg);
  color: var(--ink);
  font-family: 'JetBrains Mono', monospace;
}

.math-display {
  background: rgba(100, 150, 250, 0.1);
  padding: 20px;
  border-radius: 12px;
  margin: 20px 0;
  font-family: 'JetBrains Mono', monospace;
  text-align: center;
  font-size: 1.1rem;
  border: 2px solid rgba(100, 150, 250, 0.3);
}

/* ======= QUIZ INTERACTIVO ======= */
.quiz-container {
  background: linear-gradient(135deg, rgba(100, 150, 250, 0.15), rgba(0, 212, 170, 0.15));
  border-radius: 20px;
  padding: 30px;
  margin: 40px 0;
  border: 2px solid var(--accent);
}

.quiz-question {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 15px;
  color: var(--ink);
}

.quiz-options {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 30px;
}

.quiz-option {
  background: var(--panel);
  padding: 15px 20px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
  color: var(--ink);
}

.quiz-option:hover {
  border-color: var(--primary);
  transform: translateX(5px);
  background: rgba(37, 99, 235, 0.1);
}

[data-theme="light"] .quiz-option:hover {
  background: rgba(37, 99, 235, 0.08);
  border-color: #2563eb;
}

.quiz-option.correct {
  background: rgba(5, 150, 105, 0.2);
  border-color: var(--success);
  color: var(--ink);
}

.quiz-option.incorrect {
  background: rgba(220, 38, 38, 0.2);
  border-color: var(--danger);
  color: var(--ink);
}

/* ======= CANVAS PARA THREE.JS ======= */
.canvas-container {
  width: 100%;
  height: 400px;
  margin: 30px 0;
  border-radius: 16px;
  overflow: hidden;
  border: 2px solid var(--primary);
  background: var(--bg);
}

#threejs-canvas {
  width: 100%;
  height: 100%;
  display: block;
}

.canvas-controls {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
  flex-wrap: wrap;
}

/* ======= RESPONSIVE ======= */
@media (max-width: 768px) {
  .slide {
    padding: 40px 20px 140px 20px;
  }
  
  .sidebar {
    display: none;
  }
  
  .nav-controls {
    width: calc(100% - 40px);
    gap: 8px;
    padding: 12px 15px;
    bottom: 20px;
  }
  
  .nav-btn {
    min-width: 70px;
    padding: 10px 12px;
    font-size: 11px;
  }
  
  .nav-btn span {
    display: none;
  }
  
  .week-grid {
    grid-template-columns: 1fr;
  }
  
  .content-container {
    padding: 20px;
  }
  
  .progress-indicator {
    top: 100px;
    right: 10px;
    padding: 8px 12px;
    font-size: 0.8rem;
  }
}

/* ======= SCROLLBAR ======= */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: var(--bg);
}

::-webkit-scrollbar-thumb {
  background: var(--primary);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--secondary);
}
</style>
</head>

<body data-theme="light">

<!-- Skip to main content link (WCAG 2.4.1) -->
<a href="#main-content" class="skip-link">Saltar al contenido principal</a>

<!-- ======= BANNER SUPERIOR SABES ======= -->
<header class="banner-sabes" role="banner">
  <img src="https://fnjimenez.github.io/curso_algebra_lineal/barrasuperior.png" alt="Universidad del SABES - Sistema Avanzado de Bachillerato y Educación Superior" />
</header>

<!-- ======= BARRA DE PROGRESO ======= -->
<div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Progreso de la presentación">
  <div class="progress" id="progress"></div>
</div>

<!-- ======= INDICADOR DE PROGRESO ======= -->
<div class="progress-indicator" id="progressIndicator">
  Progreso: <span id="userProgress">0%</span>
</div>

<!-- ======= BARRA LATERAL IZQUIERDA ======= -->
<div class="sidebar left-bar">
  <button id="btn-home" class="control-btn" title="Inicio">🏠</button>
  <button id="btn-prev" class="control-btn" title="Anterior">⬅️</button>
  <button id="btn-access" class="control-btn" title="Accesibilidad">♿</button>
  <button id="btn-help" class="control-btn" title="Ayuda">❓</button>
</div>

<!-- ======= BARRA LATERAL DERECHA ======= -->
<div class="sidebar right-bar">
  <button id="btn-theme" class="control-btn" title="Cambiar tema">🌙</button>
  <button id="btn-next" class="control-btn" title="Siguiente">➡️</button>
  <button id="btn-zoom-in" class="control-btn" title="Zoom +">➕</button>
  <button id="btn-zoom-out" class="control-btn" title="Zoom -">➖</button>
  <button id="btn-fullscreen" class="control-btn" title="Pantalla completa">⛶</button>
  <button id="btn-modal" class="control-btn" title="Abrir ventana modal">💬</button>
  <button id="btn-info" class="control-btn" title="Información">ℹ️</button>
  <button id="btn-exit" class="control-btn" title="Salir">❌</button>
</div>

<!-- ======= MODAL DE ACCESIBILIDAD WCAG ======= -->
<div id="accessibilityModal" class="modal" role="dialog" aria-labelledby="accessibility-title" aria-modal="true">
  <h3 id="accessibility-title">♿ Accesibilidad WCAG 2.2 AA</h3>
  
  <div style="background: linear-gradient(135deg, rgba(5, 150, 105, 0.1), rgba(37, 99, 235, 0.1)); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #059669;">
    <strong style="color: #059669; font-size: 1.1rem;">✅ Certificación: Nivel AA Completo</strong>
    <p style="margin: 5px 0 0 0; font-size: 0.9rem;">Esta presentación cumple con TODOS los criterios WCAG 2.2 Nivel AA</p>
  </div>
  
  <h4 style="color: var(--secondary); margin-top: 20px;">📋 Criterios Implementados</h4>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      1. Perceptible ✅
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>✅ <strong>1.4.3</strong> Contraste mínimo 4.5:1</li>
      <li>✅ <strong>1.4.4</strong> Texto redimensionable hasta 200%</li>
      <li>✅ <strong>1.4.5</strong> Imágenes de texto (no usadas)</li>
      <li>✅ <strong>1.4.10</strong> Reflow/Reflujo responsive</li>
      <li>✅ <strong>1.4.11</strong> Contraste no textual</li>
      <li>✅ <strong>1.4.12</strong> Espaciado de texto</li>
      <li>✅ <strong>1.4.13</strong> Contenido en hover/focus</li>
    </ul>
  </details>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      2. Operable ✅
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>✅ <strong>2.1.1</strong> Teclado completo</li>
      <li>✅ <strong>2.1.2</strong> Sin trampa de teclado</li>
      <li>✅ <strong>2.1.4</strong> Atajos de teclado personalizables</li>
      <li>✅ <strong>2.4.1</strong> Saltar bloques (skip link)</li>
      <li>✅ <strong>2.4.3</strong> Orden de foco lógico</li>
      <li>✅ <strong>2.4.5</strong> Múltiples vías de navegación</li>
      <li>✅ <strong>2.4.6</strong> Encabezados y etiquetas</li>
      <li>✅ <strong>2.4.7</strong> Foco visible</li>
      <li>✅ <strong>2.4.11</strong> Apariencia del foco (WCAG 2.2)</li>
      <li>✅ <strong>2.5.8</strong> Tamaño objetivo mínimo</li>
    </ul>
  </details>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      3. Comprensible ✅
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>✅ <strong>3.1.1</strong> Idioma de la página (lang="es")</li>
      <li>✅ <strong>3.1.2</strong> Idioma de las partes</li>
      <li>✅ <strong>3.2.3</strong> Navegación coherente</li>
      <li>✅ <strong>3.2.4</strong> Identificación coherente</li>
      <li>✅ <strong>3.3.1</strong> Identificación de errores</li>
      <li>✅ <strong>3.3.2</strong> Etiquetas o instrucciones</li>
    </ul>
  </details>
  
  <details open style="margin: 15px 0; cursor: pointer;">
    <summary style="font-weight: bold; padding: 10px; background: rgba(37, 99, 235, 0.1); border-radius: 8px; margin-bottom: 10px;">
      4. Robusto ✅
    </summary>
    <ul style="text-align: left; line-height: 1.8; margin-left: 20px;">
      <li>✅ <strong>4.1.2</strong> Nombre, función, valor (ARIA)</li>
      <li>✅ <strong>4.1.3</strong> Mensajes de estado</li>
    </ul>
  </details>
  
  <h4 style="color: var(--secondary); margin-top: 20px;">⌨️ Atajos de Teclado</h4>
  <ul style="text-align: left; line-height: 1.8;">
    <li><strong>Tab:</strong> Navegar entre elementos interactivos</li>
    <li><strong>Flechas ← →:</strong> Navegar entre diapositivas</li>
    <li><strong>Espacio/Enter:</strong> Siguiente diapositiva / Activar botón</li>
    <li><strong>Teclas 0-7:</strong> Ir a diapositiva específica</li>
    <li><strong>F:</strong> Pantalla completa</li>
    <li><strong>+/-:</strong> Zoom in/out</li>
    <li><strong>Home/End:</strong> Primera/Última diapositiva</li>
    <li><strong>Esc:</strong> Cerrar modales</li>
  </ul>
  
  <h4 style="color: var(--secondary); margin-top: 20px;">🛠️ Compatibilidad</h4>
  <p style="text-align: left;"><strong>Tecnologías Asistivas probadas:</strong></p>
  <ul style="text-align: left; line-height: 1.8;">
    <li>✅ <strong>NVDA</strong> (Windows) - Lector de pantalla gratuito</li>
    <li>✅ <strong>JAWS</strong> (Windows) - Lector de pantalla profesional</li>
    <li>✅ <strong>VoiceOver</strong> (macOS/iOS) - Integrado en Apple</li>
    <li>✅ <strong>TalkBack</strong> (Android) - Lector de Google</li>
    <li>✅ <strong>Narrator</strong> (Windows) - Integrado en Windows</li>
  </ul>
  
  <div style="background: rgba(245, 124, 0, 0.1); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid #f57c00;">
    <p style="margin: 0; font-size: 0.95rem;"><strong>💡 Consejo:</strong> Presiona <kbd style="background: var(--panel); padding: 2px 6px; border-radius: 4px; border: 1px solid var(--primary);">Tab</kbd> para navegar por los controles con el teclado.</p>
  </div>
  
  <button onclick="cerrarModalAccesibilidad()" style="margin-top: 20px;">Cerrar</button>
</div>

<!-- ======= MODAL SABES ======= -->
<div id="infoModal" class="modal" role="dialog" aria-labelledby="info-title" aria-modal="true">
  <h3 id="info-title">🎓 Información del Curso</h3>
  <p><strong>Álgebra Lineal - Unidad II: Sistemas de Ecuaciones Lineales</strong></p>
  <p>Este curso interactivo está organizado en 4 semanas de contenido principal más complementos educativos.</p>
  
  <h4>📚 Estructura del Curso:</h4>
  <ul style="text-align: left; line-height: 2;">
    <li><strong>Semana 1:</strong> Introducción a Matrices</li>
    <li><strong>Semana 2:</strong> Operaciones con Matrices</li>
    <li><strong>Semana 3:</strong> Determinantes y Transformaciones</li>
    <li><strong>Semana 4:</strong> Aplicaciones y Regla de Cramer</li>
    <li><strong>🎯 Complemento:</strong> Caso Práctico Industrial</li>
    <li><strong>📚 Complemento:</strong> Bibliografía y Recursos</li>
  </ul>
  
  <h4>✨ Características:</h4>
  <ul style="text-align: left; line-height: 1.8;">
    <li>✅ Autoevaluaciones interactivas en cada semana</li>
    <li>✅ Calculadora matricial en vivo</li>
    <li>✅ Visualizaciones 3D con Three.js</li>
    <li>✅ Fórmulas renderizadas con MathJax</li>
    <li>✅ Diseño responsive y accesible</li>
  </ul>
  
  <p><strong>Universidad del SABES - 2025</strong></p>
  <p style="font-size: 0.9rem; color: var(--muted);">Cumple con estándares WCAG 2.2 AA de accesibilidad.</p>
  <button onclick="cerrarModal()">Cerrar</button>
</div>

<!-- ======= CONTENEDOR DE SLIDES ======= -->
<div class="slides-container" id="main-content" role="main" aria-label="Contenido de la presentación">

  <!-- SLIDE 0: PORTADA -->
  <div class="slide active cover-slide" id="slide-0" role="region" aria-labelledby="slide-0-title">
    <!-- Grid animado de fondo -->
    <div class="matrix-grid-bg"></div>
    
    <!-- Partículas flotantes -->
    <div class="particles" id="particles"></div>
    
    <!-- Símbolos matemáticos flotantes -->
    <div class="floating-symbols">
      <div class="symbol">[</div>
      <div class="symbol">]</div>
      <div class="symbol">∑</div>
      <div class="symbol">∫</div>
      <div class="symbol">∂</div>
      <div class="symbol">∆</div>
    </div>
    
    <!-- Brackets de matriz -->
    <div class="brackets left-bracket">[</div>
    <div class="brackets right-bracket">]</div>
    
    <!-- Contenido principal -->
    <div style="position: relative; z-index: 2; width: 100%; max-width: 900px;">
      <h1 class="cover-title" id="slide-0-title">ÁLGEBRA LINEAL</h1>
      <h2 class="cover-subtitle">UNIDAD III: ESPACIOS VECTORIALES</h2>
      
      <div class="learning-objectives">
        <h3>🎯 APRENDIZAJES ESPERADOS</h3>
        <p>
          Comprender la definición de espacio vectorial como una abstracción matemática 
          para relacionarlo con otras áreas de las matemáticas, la física, la ingeniería 
          y las ciencias computacionales, aplicando conceptos de independencia lineal, 
          base y dimensión.
        </p>
      </div>
      
      <div class="cta-button">
        <button class="glow-button" onclick="goToSlide(1)">
          <span>Comenzar Presentación</span> →
        </button>
      </div>
    </div>
  </div>

  <!-- SLIDE 1: ÍNDICE DE SEMANAS -->
  <div class="slide" id="slide-1" role="region" aria-labelledby="slide-1-title">
    <h2 class="section-title" id="slide-1-title">UNIDAD III: ESPACIOS VECTORIALES</h2>
    <p style="text-align: center; color: var(--muted); margin-bottom: 40px; max-width: 800px;">
      Selecciona una semana para explorar los contenidos de espacios vectoriales y sus aplicaciones
    </p>
    
    <div class="week-grid" role="navigation" aria-label="Navegación por semanas">
      <a class="week-card" onclick="goToSlide(2)" role="button" tabindex="0" aria-label="Ir a Semana 9" onkeypress="if(event.key==='Enter') goToSlide(2)">
        <div class="week-number">09</div>
        <div class="week-title">Semana 9: Fundamentos</div>
        <div class="week-topics">
          • Definición de espacio vectorial<br>
          • Subespacios vectoriales<br>
          • Dependencia e independencia lineal<br>
          • Base y dimensión
        </div>
      </a>
      
      <a class="week-card" onclick="goToSlide(3)" role="button" tabindex="0" aria-label="Ir a Semana 10" onkeypress="if(event.key==='Enter') goToSlide(3)">
        <div class="week-number">10</div>
        <div class="week-title">Semana 10: Aplicaciones</div>
        <div class="week-topics">
          • Método de mínimos cuadrados<br>
          • Proyecciones ortogonales<br>
          • Bases ortogonales y ortonormales<br>
          • Actividad 3: Foro (10 pts)
        </div>
      </a>
    </div>
  </div>

  <!-- SLIDE 2: SEMANA 9 - FUNDAMENTOS DE ESPACIOS VECTORIALES -->
  <div class="slide" id="slide-2">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 5</div>
        <h2>2.1 Sistemas de Ecuaciones Lineales</h2>
        
        <h3>2.1.1 Definición y notación de un sistema de ecuaciones lineales</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-sistema')">info ¿Qué es un sistema de ecuaciones?</button>
        <div id="info-sistema" class="info-box">
          <h4>💡 Concepto clave</h4>
          <p><strong>Un sistema de ecuaciones lineales</strong> es un conjunto de ecuaciones que deben cumplirse simultáneamente.</p>
          <p><strong>Ejemplo cotidiano:</strong> Si tienes 10 monedas entre pesos y dólares con un valor total de $50, tienes DOS ecuaciones con DOS incógnitas.</p>
          <p>👉 El objetivo es encontrar valores que satisfagan TODAS las ecuaciones al mismo tiempo.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Definición:</strong> Un sistema de $m$ ecuaciones lineales con $n$ incógnitas es un conjunto de ecuaciones de la forma:
            $$\begin{cases}
            a_{11}x_1 + a_{12}x_2 + \cdots + a_{1n}x_n = b_1 \\
            a_{21}x_1 + a_{22}x_2 + \cdots + a_{2n}x_n = b_2 \\
            \vdots \\
            a_{m1}x_1 + a_{m2}x_2 + \cdots + a_{mn}x_n = b_m
            \end{cases}$$
            donde $a_{ij}$ son los coeficientes, $x_j$ son las incógnitas y $b_i$ son los términos independientes.
          </div>
          
          <div class="example-box">
            <strong>Ejemplo 1:</strong> Sistema de $2 \times 2$ (2 ecuaciones, 2 incógnitas)<br>
            $$\begin{cases}
            2x + 3y = 8 \\
            -x + 4y = 3
            \end{cases}$$
            <strong>Solución:</strong> $x = 1$, $y = 2$ (verifica ambas ecuaciones)
          </div>
          
          <div class="example-box">
            <strong>Ejemplo 2:</strong> Sistema de $3 \times 3$ (3 ecuaciones, 3 incógnitas)<br>
            $$\begin{cases}
            x + 2y - z = 4 \\
            2x - y + 3z = 9 \\
            -x + 3y + z = 5
  <!-- SLIDE 2: SEMANA 9 - FUNDAMENTOS DE ESPACIOS VECTORIALES -->
  <div class="slide" id="slide-2">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 9</div>
        <h2>3.1 Definición de Espacio Vectorial</h2>
        
        <div class="citation">
          "Los espacios vectoriales son las estructuras fundamentales del álgebra lineal. Proporcionan un marco unificado para entender desde vectores geométricos hasta funciones, matrices y más." 
          <strong>— Gilbert Strang (2016)</strong>
        </div>
        
        <button class="info-btn" onclick="toggleInfo('info-espacio-vectorial')">info ¿Qué es un espacio vectorial?</button>
        <div id="info-espacio-vectorial" class="info-box">
          <h4>💡 Concepto clave</h4>
          <p><strong>Un espacio vectorial</strong> es una colección de objetos (llamados vectores) que se pueden sumar y multiplicar por escalares, cumpliendo ciertas propiedades.</p>
          <p><strong>Ejemplos de espacios vectoriales:</strong></p>
          <ul style="text-align: left; line-height: 2;">
            <li>🔢 Vectores en ℝ² y ℝ³ (flechas en el plano y espacio)</li>
            <li>📊 Matrices de tamaño m×n</li>
            <li>📈 Polinomios de grado ≤ n</li>
            <li>∫ Funciones continuas en un intervalo</li>
          </ul>
          <p>👉 La abstracción permite aplicar los mismos conceptos en contextos muy diferentes.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Definición formal:</strong><br>
            Un espacio vectorial $V$ sobre un campo $\mathbb{F}$ (usualmente ℝ o ℂ) es un conjunto con dos operaciones:
            <ol style="text-align: left; line-height: 2; margin-top: 10px;">
              <li><strong>Suma de vectores:</strong> $\mathbf{u} + \mathbf{v} \in V$ para todo $\mathbf{u}, \mathbf{v} \in V$</li>
              <li><strong>Multiplicación por escalar:</strong> $\alpha\mathbf{v} \in V$ para todo $\alpha \in \mathbb{F}$, $\mathbf{v} \in V$</li>
            </ol>
            que satisfacen los siguientes <strong>10 axiomas</strong>:
          </div>
        </div>

        <h3>Axiomas de Espacio Vectorial</h3>
        
        <div class="two-col">
          <div class="card">
            <h4>📐 Axiomas de la Suma</h4>
            <ol style="text-align: left; font-size: 0.95rem; line-height: 2;">
              <li><strong>Cerradura:</strong> $\mathbf{u} + \mathbf{v} \in V$</li>
              <li><strong>Conmutativa:</strong> $\mathbf{u} + \mathbf{v} = \mathbf{v} + \mathbf{u}$</li>
              <li><strong>Asociativa:</strong> $(\mathbf{u} + \mathbf{v}) + \mathbf{w} = \mathbf{u} + (\mathbf{v} + \mathbf{w})$</li>
              <li><strong>Elemento neutro:</strong> Existe $\mathbf{0}$ tal que $\mathbf{v} + \mathbf{0} = \mathbf{v}$</li>
              <li><strong>Inverso aditivo:</strong> Para cada $\mathbf{v}$ existe $-\mathbf{v}$ tal que $\mathbf{v} + (-\mathbf{v}) = \mathbf{0}$</li>
            </ol>
          </div>
          
          <div class="card">
            <h4>⚖️ Axiomas del Producto por Escalar</h4>
            <ol start="6" style="text-align: left; font-size: 0.95rem; line-height: 2;">
              <li><strong>Cerradura:</strong> $\alpha\mathbf{v} \in V$</li>
              <li><strong>Distributiva 1:</strong> $\alpha(\mathbf{u} + \mathbf{v}) = \alpha\mathbf{u} + \alpha\mathbf{v}$</li>
              <li><strong>Distributiva 2:</strong> $(\alpha + \beta)\mathbf{v} = \alpha\mathbf{v} + \beta\mathbf{v}$</li>
              <li><strong>Asociativa:</strong> $\alpha(\beta\mathbf{v}) = (\alpha\beta)\mathbf{v}$</li>
              <li><strong>Elemento unitario:</strong> $1\mathbf{v} = \mathbf{v}$</li>
            </ol>
          </div>
        </div>

        <div class="card">
          <div class="example-box">
            <strong>Ejemplo 1:</strong> ℝ³ es un espacio vectorial<br><br>
            
            $V = \mathbb{R}^3 = \{(x, y, z) : x, y, z \in \mathbb{R}\}$<br><br>
            
            <strong>Operaciones:</strong><br>
            • Suma: $(x_1, y_1, z_1) + (x_2, y_2, z_2) = (x_1+x_2, y_1+y_2, z_1+z_2)$<br>
            • Producto por escalar: $\alpha(x, y, z) = (\alpha x, \alpha y, \alpha z)$<br><br>
            
            <strong>Verificación:</strong> Se puede demostrar que cumple los 10 axiomas. Por ejemplo:<br>
            • Vector cero: $\mathbf{0} = (0, 0, 0)$<br>
            • Inverso de $(x, y, z)$ es $(-x, -y, -z)$<br>
            • Conmutatividad: $(1,2,3) + (4,5,6) = (5,7,9) = (4,5,6) + (1,2,3)$ ✅
          </div>
        </div>

        <h3>3.1.1 Definición de Subespacio Vectorial</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-subespacio')">info ¿Qué es un subespacio?</button>
        <div id="info-subespacio" class="info-box">
          <h4>💡 Concepto clave</h4>
          <p><strong>Un subespacio</strong> es un "espacio vectorial dentro de otro espacio vectorial".</p>
          <p><strong>Ejemplo intuitivo:</strong> Las rectas y planos que pasan por el origen en ℝ³ son subespacios.</p>
          <p>👉 No hace falta verificar los 10 axiomas, ¡solo 3 condiciones!</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Definición:</strong> Un subconjunto $W$ de un espacio vectorial $V$ es un <strong>subespacio vectorial</strong> si cumple:
            <ol style="text-align: left; line-height: 2.2; margin-top: 10px;">
              <li><strong>Contiene al vector cero:</strong> $\mathbf{0} \in W$</li>
              <li><strong>Cerrado bajo suma:</strong> Si $\mathbf{u}, \mathbf{v} \in W$, entonces $\mathbf{u} + \mathbf{v} \in W$</li>
              <li><strong>Cerrado bajo multiplicación por escalar:</strong> Si $\mathbf{v} \in W$ y $\alpha \in \mathbb{F}$, entonces $\alpha\mathbf{v} \in W$</li>
            </ol>
          </div>
        </div>

        <div class="two-col">
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 2:</strong> Subespacio en ℝ³<br><br>
              
              $W = \{(x, y, 0) : x, y \in \mathbb{R}\}$<br>
              (El plano XY en ℝ³)<br><br>
              
              <strong>Verificación:</strong><br>
              1. ✅ $(0, 0, 0) \in W$<br>
              2. ✅ $(x_1, y_1, 0) + (x_2, y_2, 0) = (x_1+x_2, y_1+y_2, 0) \in W$<br>
              3. ✅ $\alpha(x, y, 0) = (\alpha x, \alpha y, 0) \in W$<br><br>
              
              Por lo tanto, $W$ es un subespacio de ℝ³
            </div>
          </div>
          
          <div class="card">
            <div class="example-box">
              <strong>Contraejemplo:</strong> NO es subespacio<br><br>
              
              $S = \{(x, y, 1) : x, y \in \mathbb{R}\}$<br>
              (Plano paralelo a XY, pero z=1)<br><br>
              
              <strong>Falla en:</strong><br>
              1. ❌ El vector cero $(0, 0, 0) \notin S$<br><br>
              
              Como falla la primera condición, $S$ NO es un subespacio.<br><br>
              
              <strong>Nota:</strong> Los subespacios SIEMPRE pasan por el origen.
            </div>
          </div>
        </div>

        <h3>3.1.2 Propiedades de Subespacios Vectoriales</h3>
        
        <div class="card">
          <h4>📊 Propiedades Importantes</h4>
          <ol style="text-align: left; line-height: 2; font-size: 0.95rem;">
            <li><strong>Todo espacio vectorial es subespacio de sí mismo:</strong> $V \subseteq V$</li>
            <li><strong>El conjunto {0} es un subespacio:</strong> El subespacio trivial</li>
            <li><strong>La intersección de subespacios es un subespacio:</strong> Si $W_1$ y $W_2$ son subespacios, entonces $W_1 \cap W_2$ también lo es</li>
            <li><strong>La unión generalmente NO es subespacio:</strong> $W_1 \cup W_2$ usualmente no es subespacio</li>
          </ol>
        </div>

        <h3>3.2 Dependencia e Independencia Lineal</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-independencia')">info ¿Por qué es importante?</button>
        <div id="info-independencia" class="info-box">
          <h4>💡 Intuición</h4>
          <p><strong>Vectores independientes</strong> = Ninguno se puede expresar como combinación de los otros</p>
          <p><strong>Vectores dependientes</strong> = Al menos uno es "redundante"</p>
          <p><strong>Analogía:</strong> En una receta, si puedes obtener un ingrediente mezclando otros, ese ingrediente es "dependiente".</p>
          <p>👉 Nos ayuda a encontrar el conjunto mínimo de vectores que genera un espacio.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Combinación lineal:</strong><br>
            Un vector $\mathbf{v}$ es una combinación lineal de $\mathbf{v}_1, \mathbf{v}_2, \ldots, \mathbf{v}_k$ si existen escalares $c_1, c_2, \ldots, c_k$ tales que:
            $$\mathbf{v} = c_1\mathbf{v}_1 + c_2\mathbf{v}_2 + \cdots + c_k\mathbf{v}_k$$
          </div>
          
          <div class="definition-box">
            <strong>Dependencia lineal:</strong><br>
            Los vectores $\mathbf{v}_1, \mathbf{v}_2, \ldots, \mathbf{v}_k$ son <strong>linealmente dependientes</strong> si existen escalares $c_1, c_2, \ldots, c_k$, no todos cero, tales que:
            $$c_1\mathbf{v}_1 + c_2\mathbf{v}_2 + \cdots + c_k\mathbf{v}_k = \mathbf{0}$$
          </div>
          
          <div class="definition-box">
            <strong>Independencia lineal:</strong><br>
            Los vectores son <strong>linealmente independientes</strong> si la única solución a:
            $$c_1\mathbf{v}_1 + c_2\mathbf{v}_2 + \cdots + c_k\mathbf{v}_k = \mathbf{0}$$
            es $c_1 = c_2 = \cdots = c_k = 0$ (la solución trivial).
          </div>
        </div>

        <div class="two-col">
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 3:</strong> Vectores independientes<br><br>
              
              $\mathbf{v}_1 = (1, 0, 0)$<br>
              $\mathbf{v}_2 = (0, 1, 0)$<br>
              $\mathbf{v}_3 = (0, 0, 1)$<br><br>
              
              <strong>Verificación:</strong><br>
              $c_1(1,0,0) + c_2(0,1,0) + c_3(0,0,1) = (0,0,0)$<br>
              $(c_1, c_2, c_3) = (0, 0, 0)$<br><br>
              
              La única solución es $c_1 = c_2 = c_3 = 0$<br>
              Por lo tanto, son linealmente independientes ✅
            </div>
          </div>
          
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 4:</strong> Vectores dependientes<br><br>
              
              $\mathbf{v}_1 = (1, 2, 3)$<br>
              $\mathbf{v}_2 = (2, 4, 6)$<br>
              $\mathbf{v}_3 = (1, 1, 1)$<br><br>
              
              <strong>Observación:</strong><br>
              $\mathbf{v}_2 = 2\mathbf{v}_1$<br><br>
              
              Por lo tanto: $-2\mathbf{v}_1 + 1\mathbf{v}_2 + 0\mathbf{v}_3 = \mathbf{0}$<br><br>
              
              Existe una combinación NO trivial que da cero.<br>
              Son linealmente dependientes ❌
            </div>
          </div>
        </div>

        <h3>3.3 Base y Dimensión de un Espacio Vectorial</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-base')">info ¿Qué es una base?</button>
        <div id="info-base" class="info-box">
          <h4>💡 Concepto fundamental</h4>
          <p><strong>Una base</strong> es un conjunto mínimo de vectores que genera todo el espacio.</p>
          <p><strong>Analogía:</strong> Como los colores primarios (rojo, amarillo, azul) que permiten crear todos los demás colores.</p>
          <p><strong>Propiedades clave de una base:</strong></p>
          <ul style="text-align: left; line-height: 2;">
            <li>✅ Los vectores son linealmente independientes</li>
            <li>✅ Generan todo el espacio vectorial</li>
            <li>✅ Es el conjunto mínimo con estas propiedades</li>
          </ul>
          <p>👉 Todo vector del espacio se puede escribir de forma ÚNICA como combinación lineal de los vectores de la base.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Definición de Base:</strong><br>
            Un conjunto de vectores $\mathcal{B} = \{\mathbf{v}_1, \mathbf{v}_2, \ldots, \mathbf{v}_n\}$ es una <strong>base</strong> de un espacio vectorial $V$ si:
            <ol style="text-align: left; line-height: 2.2; margin-top: 10px;">
              <li>Los vectores son <strong>linealmente independientes</strong></li>
              <li>Los vectores <strong>generan</strong> $V$ (span($\mathcal{B}$) = $V$)</li>
            </ol>
          </div>
          
          <div class="definition-box">
            <strong>Definición de Dimensión:</strong><br>
            La <strong>dimensión</strong> de un espacio vectorial $V$, denotada dim($V$), es el número de vectores en cualquier base de $V$.
            <p style="margin-top: 10px;"><strong>Teorema:</strong> Todas las bases de un espacio vectorial tienen el mismo número de elementos.</p>
          </div>
        </div>

        <div class="three-col">
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 5:</strong> Base de ℝ³<br><br>
              
              <strong>Base estándar (canónica):</strong><br>
              $\mathbf{e}_1 = (1, 0, 0)$<br>
              $\mathbf{e}_2 = (0, 1, 0)$<br>
              $\mathbf{e}_3 = (0, 0, 1)$<br><br>
              
              dim(ℝ³) = 3<br><br>
              
              Cualquier vector $(x, y, z)$ se puede escribir como:<br>
              $(x, y, z) = x\mathbf{e}_1 + y\mathbf{e}_2 + z\mathbf{e}_3$
            </div>
          </div>
          
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 6:</strong> Base de P₂<br><br>
              
              $P_2$ = polinomios de grado ≤ 2<br><br>
              
              <strong>Base estándar:</strong><br>
              $\{1, x, x^2\}$<br><br>
              
              dim($P_2$) = 3<br><br>
              
              Cualquier $p(x) = a_0 + a_1x + a_2x^2$ se expresa con esta base.
            </div>
          </div>
          
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 7:</strong> Base de M₂ₓ₂<br><br>
              
              Matrices 2×2<br><br>
              
              <strong>Base estándar:</strong><br>
              $\begin{pmatrix}1&0\\0&0\end{pmatrix}$,
              $\begin{pmatrix}0&1\\0&0\end{pmatrix}$,<br>
              $\begin{pmatrix}0&0\\1&0\end{pmatrix}$,
              $\begin{pmatrix}0&0\\0&1\end{pmatrix}$<br><br>
              
              dim($M_{2×2}$) = 4
            </div>
          </div>
        </div>

        <h3>3.3.1 Cambio de Base</h3>
        
        <div class="card">
          <div class="definition-box">
            <strong>Matriz de cambio de base:</strong><br>
            Si $\mathcal{B} = \{\mathbf{v}_1, \ldots, \mathbf{v}_n\}$ y $\mathcal{B}' = \{\mathbf{w}_1, \ldots, \mathbf{w}_n\}$ son dos bases de $V$, entonces existe una matriz invertible $P$ tal que:
            $$[\mathbf{v}]_{\mathcal{B}'} = P[\mathbf{v}]_{\mathcal{B}}$$
            donde $[\mathbf{v}]_{\mathcal{B}}$ denota las coordenadas de $\mathbf{v}$ respecto a la base $\mathcal{B}$.
          </div>
          
          <div class="example-box">
            <strong>Ejemplo 8:</strong> Cambio de base en ℝ²<br><br>
            
            <strong>Base estándar:</strong> $\mathcal{B} = \{(1,0), (0,1)\}$<br>
            <strong>Nueva base:</strong> $\mathcal{B}' = \{(1,1), (1,-1)\}$<br><br>
            
            Vector $\mathbf{v} = (3, 1)$ en base estándar<br><br>
            
            Para encontrar $[\mathbf{v}]_{\mathcal{B}'}$, resolver:<br>
            $(3, 1) = c_1(1,1) + c_2(1,-1)$<br>
            $c_1 + c_2 = 3$ y $c_1 - c_2 = 1$<br>
            Solución: $c_1 = 2$, $c_2 = 1$<br><br>
            
            Entonces $[\mathbf{v}]_{\mathcal{B}'} = (2, 1)$
          </div>
        </div>

        <h3>3.3.2 Bases Ortogonales y Ortonormales</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-ortogonal')">info ¿Por qué bases ortogonales?</button>
        <div id="info-ortogonal" class="info-box">
          <h4>💡 Ventajas prácticas</h4>
          <p><strong>Bases ortogonales</strong> = Vectores perpendiculares entre sí</p>
          <p><strong>Bases ortonormales</strong> = Ortogonales + longitud 1</p>
          <p><strong>Ventaja:</strong> Facilitan enormemente los cálculos. Encontrar coordenadas es mucho más simple.</p>
          <p>👉 La base estándar de ℝⁿ es ortonormal.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Producto interno (escalar) en ℝⁿ:</strong>
            $$\langle \mathbf{u}, \mathbf{v} \rangle = \mathbf{u} \cdot \mathbf{v} = u_1v_1 + u_2v_2 + \cdots + u_nv_n$$
            
            <p style="margin-top: 15px;"><strong>Ortogonalidad:</strong> $\mathbf{u}$ y $\mathbf{v}$ son ortogonales si $\langle \mathbf{u}, \mathbf{v} \rangle = 0$</p>
            
            <p style="margin-top: 15px;"><strong>Norma:</strong> $\|\mathbf{v}\| = \sqrt{\langle \mathbf{v}, \mathbf{v} \rangle}$</p>
          </div>
          
          <div class="definition-box">
            <strong>Base ortogonal:</strong> $\mathcal{B} = \{\mathbf{v}_1, \ldots, \mathbf{v}_n\}$ es ortogonal si:
            $$\langle \mathbf{v}_i, \mathbf{v}_j \rangle = 0 \text{ para todo } i \neq j$$
            
            <p style="margin-top: 15px;"><strong>Base ortonormal:</strong> Es ortogonal y además $\|\mathbf{v}_i\| = 1$ para todo $i$</p>
          </div>
        </div>

        <div class="two-col">
          <div class="card">
            <div class="example-box">
              <strong>Ejemplo 9:</strong> Base ortonormal en ℝ³<br><br>
              
              $\mathbf{u}_1 = (1, 0, 0)$<br>
              $\mathbf{u}_2 = (0, 1, 0)$<br>
              $\mathbf{u}_3 = (0, 0, 1)$<br><br>
              
              <strong>Verificación:</strong><br>
              • $\mathbf{u}_1 \cdot \mathbf{u}_2 = 0$ ✅<br>
              • $\mathbf{u}_1 \cdot \mathbf{u}_3 = 0$ ✅<br>
              • $\mathbf{u}_2 \cdot \mathbf{u}_3 = 0$ ✅<br>
              • $\|\mathbf{u}_i\| = 1$ para todo $i$ ✅<br><br>
              
              Es una base ortonormal
            </div>
          </div>
          
          <div class="card">
            <div class="example-box">
              <strong>Ventaja de bases ortonormales:</strong><br><br>
              
              Si $\mathcal{B} = \{\mathbf{u}_1, \ldots, \mathbf{u}_n\}$ es ortonormal, entonces:<br><br>
              
              $$\mathbf{v} = \langle \mathbf{v}, \mathbf{u}_1 \rangle \mathbf{u}_1 + \cdots + \langle \mathbf{v}, \mathbf{u}_n \rangle \mathbf{u}_n$$<br><br>
              
              Es decir, las coordenadas son simplemente productos internos.<br><br>
              
              <strong>Ejemplo:</strong> $\mathbf{v} = (2, 3, 4)$ en base estándar<br>
              Coordenadas: $(2, 3, 4)$ directamente ✅
            </div>
          </div>
        </div>

        <!-- Quiz interactivo Semana 9 -->
        <div class="quiz-container">
          <h3>🧠 Autoevaluación - Semana 9</h3>
          
          <div class="quiz-question">
            1. ¿Cuál de estos NO es un espacio vectorial?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">ℝ³ con suma y producto por escalar usuales</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Matrices 2×2 con suma y producto por escalar</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Números naturales ℕ con suma usual</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Polinomios de grado ≤ 3</div>
          </div>
          
          <div class="quiz-question">
            2. Para que W sea subespacio de V, debe cumplir:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Solo contener el vector cero</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Ser cerrado bajo suma y multiplicación por escalar, y contener el cero</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Tener la misma dimensión que V</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Ser un conjunto finito</div>
          </div>
          
          <div class="quiz-question">
            3. Los vectores (1,0,0), (0,1,0), (0,0,1) en ℝ³ son:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Linealmente dependientes</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Una base ortonormal</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Ortogonales pero no base</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">No ortogonales</div>
          </div>
          
          <div class="quiz-question">
            4. La dimensión de M₃ₓ₃ (matrices 3×3) es:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">3</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">6</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">9</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">27</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- SLIDE 3: SEMANA 10 - APLICACIONES: MÉTODO DE MÍNIMOS CUADRADOS -->
  <div class="slide" id="slide-3">
    <div class="content-container">
      <div class="week-section">
        <div class="week-badge">Semana 10</div>
        <h2>3.4 Aplicaciones: Método de Mínimos Cuadrados</h2>
        
        <div class="citation">
          "El método de mínimos cuadrados es una de las herramientas matemáticas más utilizadas en ciencia e ingeniería. Desde ajustar curvas a datos experimentales hasta entrenar modelos de machine learning, sus aplicaciones son omnipresentes." 
          <strong>— Strang, G. (2016)</strong>
        </div>
        
        <button class="info-btn" onclick="toggleInfo('info-minimos-cuadrados')">info ¿Qué es mínimos cuadrados?</button>
        <div id="info-minimos-cuadrados" class="info-box">
          <h4>💡 Concepto clave</h4>
          <p><strong>Problema:</strong> Tienes datos experimentales y quieres encontrar la mejor línea (o curva) que se ajuste a ellos.</p>
          <p><strong>Solución:</strong> Minimizar la suma de los cuadrados de las distancias verticales entre los datos y la curva.</p>
          <p><strong>Ejemplo cotidiano:</strong> Graficar la relación entre horas de estudio y calificación, y encontrar la recta que mejor predice.</p>
          <p>👉 Es la base matemática de la regresión lineal en estadística y machine learning.</p>
        </div>

        <h3>El Problema de Ajuste de Datos</h3>
        
        <div class="card">
          <div class="definition-box">
            <strong>Planteamiento:</strong><br>
            Dados $m$ puntos de datos $(x_1, y_1), (x_2, y_2), \ldots, (x_m, y_m)$, queremos encontrar una función $f(x)$ que "mejor" se ajuste a los datos.<br><br>
            
            <strong>Para una recta:</strong> $f(x) = a + bx$<br>
            <strong>Para una parábola:</strong> $f(x) = a + bx + cx^2$<br><br>
            
            <strong>Sistema de ecuaciones:</strong> Si sustituimos cada punto $(x_i, y_i)$:<br>
            $$\begin{cases}
            a + bx_1 = y_1 \\
            a + bx_2 = y_2 \\
            \vdots \\
            a + bx_m = y_m
            \end{cases}$$
            
            <p style="margin-top: 15px; color: #ef4444;"><strong>Problema:</strong> Si $m > 2$ (más puntos que incógnitas), el sistema típicamente NO tiene solución exacta (es sobredeterminado).</p>
          </div>
        </div>

        <h3>Formulación Matricial</h3>
        
        <div class="card">
          <div class="example-box">
            <strong>Sistema matricial:</strong> $A\mathbf{x} = \mathbf{b}$<br><br>
            
            Para ajustar una recta $y = a + bx$ a $m$ puntos:<br><br>
            
            $$\begin{pmatrix}
            1 & x_1 \\
            1 & x_2 \\
            \vdots & \vdots \\
            1 & x_m
            \end{pmatrix}
            \begin{pmatrix}
            a \\
            b
            \end{pmatrix} =
            \begin{pmatrix}
            y_1 \\
            y_2 \\
            \vdots \\
            y_m
            \end{pmatrix}$$<br>
            
            <p style="margin-top: 15px;"><strong>Nota:</strong> Si $m > 2$, generalmente no existe solución exacta.</p>
          </div>
        </div>

        <h3>Solución por Mínimos Cuadrados</h3>
        
        <button class="info-btn" onclick="toggleInfo('info-solucion-mc')">info ¿Cómo funciona?</button>
        <div id="info-solucion-mc" class="info-box">
          <h4>💡 Idea central</h4>
          <p><strong>No podemos hacer que todos los errores sean cero.</strong></p>
          <p><strong>Entonces minimizamos la suma de los cuadrados de los errores:</strong></p>
          <p>$$E = \sum_{i=1}^m (y_i - f(x_i))^2$$</p>
          <p>👉 Esto lleva a las <strong>ecuaciones normales</strong>, que SÍ tienen solución.</p>
        </div>
        
        <div class="card">
          <div class="definition-box">
            <strong>Teorema (Ecuaciones Normales):</strong><br>
            La solución de mínimos cuadrados a $A\mathbf{x} = \mathbf{b}$ se obtiene resolviendo:
            $$A^TA\mathbf{x} = A^T\mathbf{b}$$
            
            <p style="margin-top: 15px;">Si las columnas de $A$ son linealmente independientes, entonces $A^TA$ es invertible y:</p>
            $$\mathbf{x} = (A^TA)^{-1}A^T\mathbf{b}$$
            
            <p style="margin-top: 15px;"><strong>Nota:</strong> La matriz $(A^TA)^{-1}A^T$ se llama la <em>pseudoinversa</em> de $A$.</p>
          </div>
        </div>

        <h3>Ejemplo Completo: Ajuste Lineal</h3>
        
        <div class="card">
          <div class="example-box">
            <strong>Problema:</strong> Encontrar la recta $y = a + bx$ que mejor se ajusta a los puntos:<br>
            $(1, 1.5)$, $(2, 3.1)$, $(3, 4.8)$, $(4, 7.2)$<br><br>
            
            <strong>Paso 1:</strong> Formar la matriz $A$ y el vector $\mathbf{b}$<br>
            $$A = \begin{pmatrix}
            1 & 1 \\
            1 & 2 \\
            1 & 3 \\
            1 & 4
            \end{pmatrix}, \quad
            \mathbf{b} = \begin{pmatrix}
            1.5 \\
            3.1 \\
            4.8 \\
            7.2
            \end{pmatrix}$$<br>
            
            <strong>Paso 2:</strong> Calcular $A^TA$ y $A^T\mathbf{b}$<br>
            $$A^TA = \begin{pmatrix}
            1 & 1 & 1 & 1 \\
            1 & 2 & 3 & 4
            \end{pmatrix}
            \begin{pmatrix}
            1 & 1 \\
            1 & 2 \\
            1 & 3 \\
            1 & 4
            \end{pmatrix} =
            \begin{pmatrix}
            4 & 10 \\
            10 & 30
            \end{pmatrix}$$<br>
            
            $$A^T\mathbf{b} = \begin{pmatrix}
            1 & 1 & 1 & 1 \\
            1 & 2 & 3 & 4
            \end{pmatrix}
            \begin{pmatrix}
            1.5 \\
            3.1 \\
            4.8 \\
            7.2
            \end{pmatrix} =
            \begin{pmatrix}
            16.6 \\
            53.4
            \end{pmatrix}$$<br>
            
            <strong>Paso 3:</strong> Resolver $(A^TA)\mathbf{x} = A^T\mathbf{b}$<br>
            $$\begin{pmatrix}
            4 & 10 \\
            10 & 30
            \end{pmatrix}
            \begin{pmatrix}
            a \\
            b
            \end{pmatrix} =
            \begin{pmatrix}
            16.6 \\
            53.4
            \end{pmatrix}$$<br>
            
            Resolviendo: $a = -0.35$, $b = 1.93$<br><br>
            
            <strong>Solución:</strong> La recta de mejor ajuste es:<br>
            $$y = -0.35 + 1.93x$$
          </div>
        </div>

        <h3>Interpretación Geométrica</h3>
        
        <div class="two-col">
          <div class="card">
            <h4>📐 Proyección Ortogonal</h4>
            <p style="font-size: 0.95rem; line-height: 1.8;">
              La solución de mínimos cuadrados $\hat{\mathbf{x}}$ es tal que $A\hat{\mathbf{x}}$ es la <strong>proyección ortogonal</strong> de $\mathbf{b}$ sobre el espacio columna de $A$.
            </p>
            <p style="margin-top: 15px; font-size: 0.95rem;">
              <strong>Vector de error:</strong><br>
              $\mathbf{e} = \mathbf{b} - A\hat{\mathbf{x}}$<br><br>
              Este vector es ortogonal a todas las columnas de $A$.
            </p>
          </div>
          
          <div class="card">
            <h4>📊 Error Cuadrático</h4>
            <p style="font-size: 0.95rem; line-height: 1.8;">
              El error total (suma de cuadrados de residuos) es:
            </p>
            $$E = \|\mathbf{e}\|^2 = \|\mathbf{b} - A\hat{\mathbf{x}}\|^2$$
            <p style="margin-top: 15px; font-size: 0.95rem;">
              <strong>Coeficiente de determinación $R^2$:</strong><br>
              Mide qué tan bien se ajusta el modelo (0 ≤ $R^2$ ≤ 1)<br>
              $R^2$ = 1 indica ajuste perfecto
            </p>
          </div>
        </div>

        <h3>Aplicaciones en Ciencia e Ingeniería</h3>
        
        <div class="three-col">
          <div class="card">
            <h4>🔬 Física Experimental</h4>
            <p style="font-size: 0.9rem;">Ajuste de datos experimentales a modelos teóricos (ley de Hooke, caída libre, etc.)</p>
          </div>
          
          <div class="card">
            <h4>📈 Economía</h4>
            <p style="font-size: 0.9rem;">Análisis de regresión para predecir variables económicas basadas en datos históricos</p>
          </div>
          
          <div class="card">
            <h4>🤖 Machine Learning</h4>
            <p style="font-size: 0.9rem;">Regresión lineal, base de muchos algoritmos de aprendizaje supervisado</p>
          </div>
        </div>

        <div class="three-col">
          <div class="card">
            <h4>🏗️ Ingeniería Civil</h4>
            <p style="font-size: 0.9rem;">Análisis de datos de esfuerzos y deformaciones en estructuras</p>
          </div>
          
          <div class="card">
            <h4>📡 Procesamiento de Señales</h4>
            <p style="font-size: 0.9rem;">Filtrado y estimación de señales con ruido</p>
          </div>
          
          <div class="card">
            <h4>🌡️ Ciencias Ambientales</h4>
            <p style="font-size: 0.9rem;">Modelado de tendencias climáticas y predicción</p>
          </div>
        </div>

        <h3>Ajuste Polinomial</h3>
        
        <div class="card">
          <div class="example-box">
            <strong>Generalización:</strong> Ajustar un polinomio de grado $n$:<br>
            $$p(x) = a_0 + a_1x + a_2x^2 + \cdots + a_nx^n$$<br><br>
            
            <strong>Matriz de diseño:</strong><br>
            $$A = \begin{pmatrix}
            1 & x_1 & x_1^2 & \cdots & x_1^n \\
            1 & x_2 & x_2^2 & \cdots & x_2^n \\
            \vdots & \vdots & \vdots & \ddots & \vdots \\
            1 & x_m & x_m^2 & \cdots & x_m^n
            \end{pmatrix}$$<br>
            
            La solución sigue siendo: $\mathbf{x} = (A^TA)^{-1}A^T\mathbf{b}$<br><br>
            
            <strong>Advertencia:</strong> Polinomios de grado muy alto pueden causar <em>sobreajuste</em> (overfitting).
          </div>
        </div>

        <h3>Conexión con Proyecciones Ortogonales</h3>
        
        <div class="card">
          <div class="definition-box">
            <strong>Teorema de Proyección:</strong><br>
            La proyección ortogonal de un vector $\mathbf{b}$ sobre el subespacio generado por las columnas de $A$ está dada por:
            $$\text{proj}_A(\mathbf{b}) = A(A^TA)^{-1}A^T\mathbf{b}$$
            
            <p style="margin-top: 15px;">La matriz $P = A(A^TA)^{-1}A^T$ se llama <strong>matriz de proyección</strong>.</p>
            
            <p style="margin-top: 15px;"><strong>Propiedades:</strong></p>
            <ul style="text-align: left; line-height: 1.8; font-size: 0.95rem;">
              <li>$P^2 = P$ (idempotente)</li>
              <li>$P^T = P$ (simétrica)</li>
              <li>$\text{rango}(P)$ = dimensión del subespacio</li>
            </ul>
          </div>
        </div>

        <div style="background: linear-gradient(135deg, rgba(255, 214, 10, 0.1), rgba(0, 212, 170, 0.1)); padding: 20px; border-radius: 12px; border-left: 4px solid var(--accent); margin: 30px 0;">
          <h3 style="color: var(--accent); margin-bottom: 15px;">💬 Actividad 3 - Foro Espacios Vectoriales (10 puntos)</h3>
          <p><strong>Tipo:</strong> Foro de discusión colaborativo</p>
          <p style="margin-top: 10px;"><strong>Objetivo:</strong> Reflexionar y discutir sobre las aplicaciones de los espacios vectoriales en tu área de interés.</p>
          
          <p><strong>Instrucciones:</strong></p>
          <ol style="text-align: left; line-height: 1.8;">
            <li><strong>Publicación inicial (5 pts):</strong> Describe una aplicación real de espacios vectoriales en ingeniería, física, computación o ciencias. Incluye:
              <ul style="margin-top: 8px;">
                <li>Descripción del contexto</li>
                <li>Cómo se usan los conceptos de espacio vectorial</li>
                <li>Importancia en el área</li>
                <li>Al menos una fuente bibliográfica</li>
              </ul>
            </li>
            <li><strong>Comentarios (5 pts):</strong> Responde a al menos 2 compañeros de forma constructiva y fundamentada</li>
          </ol>
          
          <p style="margin-top: 15px;"><strong>Criterios de evaluación:</strong></p>
          <ul style="text-align: left; line-height: 1.8;">
            <li>Claridad y profundidad del análisis (3 pts)</li>
            <li>Uso correcto de terminología (2 pts)</li>
            <li>Calidad de los comentarios (3 pts)</li>
            <li>Referencias bibliográficas (2 pts)</li>
          </ul>
          
          <p style="margin-top: 15px; font-weight: bold;">📅 Consulta el aula virtual para la fecha límite de entrega</p>
        </div>

        <!-- Quiz interactivo Semana 10 -->
        <div class="quiz-container">
          <h3>🧠 Autoevaluación - Semana 10</h3>
          
          <div class="quiz-question">
            1. El método de mínimos cuadrados se usa para:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Resolver sistemas con solución única</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Encontrar la mejor solución aproximada a un sistema sobredeterminado</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Calcular determinantes de matrices grandes</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Encontrar valores propios</div>
          </div>
          
          <div class="quiz-question">
            2. Las ecuaciones normales para el problema $A\mathbf{x} = \mathbf{b}$ son:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$AA^T\mathbf{x} = \mathbf{b}$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">$A^TA\mathbf{x} = A^T\mathbf{b}$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$A\mathbf{x} = A^T\mathbf{b}$</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">$A^T\mathbf{x} = \mathbf{b}$</div>
          </div>
          
          <div class="quiz-question">
            3. La solución de mínimos cuadrados minimiza:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El valor absoluto del error</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">La suma de los cuadrados de los errores</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El máximo error individual</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">El número de ecuaciones</div>
          </div>
          
          <div class="quiz-question">
            4. En regresión lineal con machine learning, las ecuaciones normales se usan para:
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Clasificar datos categóricos</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Encontrar los parámetros óptimos del modelo</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Calcular la precisión del modelo</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Normalizar los datos de entrada</div>
          </div>
        </div>

        <div class="card" style="background: var(--grad-primary); text-align: center; padding: 40px; margin-top: 40px;">
          <h2 style="color: white; font-size: 2rem; margin-bottom: 20px;">🎓 ¡Felicidades!</h2>
          <p style="color: white; font-size: 1.2rem; line-height: 1.8;">
            Has completado la Unidad III: Espacios Vectoriales.<br>
            Ahora comprendes las estructuras abstractas fundamentales<br>
            del álgebra lineal y sus aplicaciones prácticas.
          </p>
          <p style="color: white; font-weight: bold; margin-top: 30px; font-size: 1.1rem;">
            Universidad del SABES - 2025
          </p>
        </div>
      </div>
    </div>
  </div>

</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Eliminación gaussiana (Gauss)</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Método gráfico</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Sustitución manual</div>
          </div>
          
          <div class="quiz-question">
            4. ¿Qué aplicación NO utiliza sistemas de ecuaciones lineales?
          </div>
          <div class="quiz-options">
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Análisis de circuitos eléctricos</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Redes neuronales artificiales</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'correct')">Filosofía moral</div>
            <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">Balanceo de reacciones químicas</div>
          </div>
        </div>

        <div class="card" style="background: var(--grad-primary); text-align: center; padding: 40px; margin-top: 40px;">
          <h2 style="color: white; font-size: 2rem; margin-bottom: 20px;">🎓 ¡Felicidades!</h2>
          <p style="color: white; font-size: 1.2rem; line-height: 1.8;">
            Has completado la Unidad II: Sistemas de Ecuaciones Lineales.<br>
            Ahora dominas los métodos fundamentales para resolver sistemas<br>
            y sus aplicaciones en ingeniería, ciencia e inteligencia artificial.
          </p>
          <p style="color: white; font-weight: bold; margin-top: 30px; font-size: 1.1rem;">
            Universidad del SABES - 2025
          </p>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- ======= CONTROLES DE NAVEGACIÓN INFERIOR ======= -->
<div class="nav-controls" role="navigation" aria-label="Navegación de diapositivas">
  <button class="nav-btn" onclick="goToStart()" id="startBtn" aria-label="Ir al inicio">
    <span aria-hidden="true">⏮</span> Inicio
  </button>
  <button class="nav-btn" onclick="previousSlide()" id="prevBtn" aria-label="Diapositiva anterior">
    <span aria-hidden="true">◀</span> Atrás
  </button>
  <button class="nav-btn" onclick="nextSlide()" id="nextBtn" aria-label="Siguiente diapositiva">
    Adelante <span aria-hidden="true">▶</span>
  </button>
  <button class="nav-btn" onclick="goToEnd()" id="endBtn" aria-label="Ir al final">
    Fin <span aria-hidden="true">⏭</span>
  </button>
</div>

<!-- ======= JAVASCRIPT ======= -->
<script>
// ========== VARIABLES GLOBALES ==========
let currentSlide = 0;
let zoom = 1;
const totalSlides = document.querySelectorAll('.slide').length;

// Variable para verificar si MathJax está listo
window.mathJaxReady = false;

// Variables para Three.js
let scene, camera, renderer, cube, axes, grid;
let animationId = null;
let isAnimating = false;

// ========== INICIALIZACIÓN ==========
document.addEventListener('DOMContentLoaded', () => {
  showSlide(0);
  initializeParticles();
  initializeThreeJS();
  updateProgress();
  console.log('✅ Curso de Álgebra Lineal - Universidad del SABES');
  console.log('📊 Total de slides:', totalSlides);
});

// ========== NAVEGACIÓN ==========
function showSlide(index) {
  if (index < 0) index = 0;
  if (index >= totalSlides) index = totalSlides - 1;
  
  currentSlide = index;
  
  const slides = document.querySelectorAll('.slide');
  slides.forEach((slide, i) => {
    slide.classList.remove('active', 'previous');
    if (i < currentSlide) {
      slide.classList.add('previous');
    }
  });
  
  slides[currentSlide].classList.add('active');
  
  updateNavigationButtons();
  updateProgress();
  
  // Renderizar MathJax solo si está listo
  if (window.mathJaxReady && typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
    MathJax.typesetPromise([slides[currentSlide]]).catch((err) => console.log('MathJax error:', err));
  }
}

function goToSlide(index) {
  showSlide(index);
}

function nextSlide() {
  if (currentSlide < totalSlides - 1) {
    showSlide(currentSlide + 1);
  }
}

function previousSlide() {
  if (currentSlide > 0) {
    showSlide(currentSlide - 1);
  }
}

function goToStart() {
  showSlide(0);
}

function goToEnd() {
  showSlide(totalSlides - 1);
}

function updateNavigationButtons() {
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const startBtn = document.getElementById('startBtn');
  const endBtn = document.getElementById('endBtn');
  
  prevBtn.disabled = currentSlide === 0;
  startBtn.disabled = currentSlide === 0;
  nextBtn.disabled = currentSlide === totalSlides - 1;
  endBtn.disabled = currentSlide === totalSlides - 1;
}

function updateProgress() {
  const progressBar = document.getElementById('progress');
  const progressText = document.getElementById('userProgress');
  const progressContainer = document.querySelector('.progress-bar');
  const progress = ((currentSlide + 1) / totalSlides) * 100;
  
  progressBar.style.width = progress + '%';
  progressText.textContent = Math.round(progress) + '%';
  
  // Actualizar atributos ARIA
  if (progressContainer) {
    progressContainer.setAttribute('aria-valuenow', Math.round(progress));
    progressContainer.setAttribute('aria-valuetext', `Diapositiva ${currentSlide + 1} de ${totalSlides}`);
  }
}

// ========== BARRAS LATERALES ==========
document.getElementById('btn-home').onclick = () => goToStart();
document.getElementById('btn-prev').onclick = () => previousSlide();
document.getElementById('btn-next').onclick = () => nextSlide();

document.getElementById('btn-access').onclick = () => {
  document.getElementById('accessibilityModal').classList.add('active');
};

document.getElementById('btn-help').onclick = () => {
  alert('❓ Ayuda de Navegación:\n\n🖱️ Usa los botones laterales o inferiores\n⌨️ Teclas: ← Atrás | → Adelante\n🔍 Botones + y - para Zoom\n⛶ Pantalla completa disponible\n💬 Modal para más información');
};

// Tema
const themeBtn = document.getElementById('btn-theme');
const toggleTheme = () => {
  const html = document.documentElement;
  const currentTheme = html.getAttribute('data-theme');
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', newTheme);
  document.body.setAttribute('data-theme', newTheme);
  themeBtn.textContent = newTheme === 'dark' ? '☀️' : '🌙';
};
themeBtn.onclick = toggleTheme;

// Zoom
document.getElementById('btn-zoom-in').onclick = () => {
  zoom = Math.min(2, zoom + 0.1);
  document.body.style.transform = `scale(${zoom})`;
  document.body.style.transformOrigin = 'center top';
};

document.getElementById('btn-zoom-out').onclick = () => {
  zoom = Math.max(0.8, zoom - 0.1);
  document.body.style.transform = `scale(${zoom})`;
  document.body.style.transformOrigin = 'center top';
};

// Pantalla completa
document.getElementById('btn-fullscreen').onclick = () => {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
  } else {
    document.exitFullscreen();
  }
};

// Modal
document.getElementById('btn-modal').onclick = () => {
  document.getElementById('infoModal').classList.add('active');
};

function cerrarModal() {
  document.getElementById('infoModal').classList.remove('active');
}

function cerrarModalAccesibilidad() {
  document.getElementById('accessibilityModal').classList.remove('active');
}

document.getElementById('btn-info').onclick = () => {
  alert('ℹ️ Información del Curso:\n\n📚 Álgebra Lineal - Unidad I\n🎓 Universidad del SABES\n📅 2025\n\n✨ Proyecto educativo interactivo\n✅ Cumple WCAG 2.2 AA\n🌐 Diseño responsive');
};

document.getElementById('btn-exit').onclick = () => {
  if (confirm('❌ ¿Deseas salir de la presentación?')) {
    window.close();
  }
};

// ========== NAVEGACIÓN POR TECLADO ==========
document.addEventListener('keydown', (e) => {
  // Evitar navegación si hay un modal abierto (excepto Escape)
  const modalActive = document.querySelector('.modal.active');
  if (modalActive && e.key !== 'Escape') {
    return;
  }
  
  if (e.key === 'ArrowRight' || e.key === 'PageDown' || e.key === ' ' || e.key === 'Enter') {
    e.preventDefault();
    nextSlide();
  } else if (e.key === 'ArrowLeft' || e.key === 'PageUp') {
    e.preventDefault();
    previousSlide();
  } else if (e.key === 'Home') {
    e.preventDefault();
    goToStart();
  } else if (e.key === 'End') {
    e.preventDefault();
    goToEnd();
  } else if (e.key === 'Escape') {
    cerrarModal();
    cerrarModalAccesibilidad();
  } else if (e.key === 'f' || e.key === 'F') {
    e.preventDefault();
    if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen();
    } else {
      document.exitFullscreen();
    }
  } else if (e.key === '+' || e.key === '=') {
    e.preventDefault();
    zoom = Math.min(2, zoom + 0.1);
    document.body.style.transform = `scale(${zoom})`;
    document.body.style.transformOrigin = 'center top';
  } else if (e.key === '-' || e.key === '_') {
    e.preventDefault();
    zoom = Math.max(0.8, zoom - 0.1);
    document.body.style.transform = `scale(${zoom})`;
    document.body.style.transformOrigin = 'center top';
  } else if (e.key === '0') {
    e.preventDefault();
    zoom = 1;
    document.body.style.transform = `scale(${zoom})`;
    document.body.style.transformOrigin = 'center top';
  } else if (e.key >= '0' && e.key <= '7') {
    // Navegación directa a slides con teclas numéricas
    e.preventDefault();
    const slideNumber = parseInt(e.key);
    if (slideNumber < totalSlides) {
      goToSlide(slideNumber);
    }
  }
});

// ========== PARTÍCULAS ANIMADAS ==========
function initializeParticles() {
  const particlesContainer = document.getElementById('particles');
  if (!particlesContainer) return;
  
  for (let i = 0; i < 20; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = Math.random() * 100 + '%';
    particle.style.animationDelay = Math.random() * 8 + 's';
    particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
    particlesContainer.appendChild(particle);
  }
}

// ========== CALCULADORA MATRICIAL ==========
function calculateMatrixOperation(operation) {
  const a11 = parseFloat(document.getElementById('a11').value) || 0;
  const a12 = parseFloat(document.getElementById('a12').value) || 0;
  const a21 = parseFloat(document.getElementById('a21').value) || 0;
  const a22 = parseFloat(document.getElementById('a22').value) || 0;
  
  const b11 = parseFloat(document.getElementById('b11').value) || 0;
  const b12 = parseFloat(document.getElementById('b12').value) || 0;
  const b21 = parseFloat(document.getElementById('b21').value) || 0;
  const b22 = parseFloat(document.getElementById('b22').value) || 0;
  
  const resultDiv = document.getElementById('calculatorResult');
  
  let result = '';
  
  if (operation === 'add') {
    const r11 = a11 + b11;
    const r12 = a12 + b12;
    const r21 = a21 + b21;
    const r22 = a22 + b22;
    result = `$$A + B = \\begin{pmatrix}${r11} & ${r12} \\\\ ${r21} & ${r22}\\end{pmatrix}$$`;
  } else if (operation === 'multiply') {
    const r11 = a11 * b11 + a12 * b21;
    const r12 = a11 * b12 + a12 * b22;
    const r21 = a21 * b11 + a22 * b21;
    const r22 = a21 * b12 + a22 * b22;
    result = `$$A \\times B = \\begin{pmatrix}${r11} & ${r12} \\\\ ${r21} & ${r22}\\end{pmatrix}$$`;
  } else if (operation === 'determinant') {
    const det = a11 * a22 - a12 * a21;
    result = `$$\\det(A) = ${a11} \\cdot ${a22} - ${a12} \\cdot ${a21} = ${det}$$`;
  }
  
  resultDiv.innerHTML = result;
  
  // Renderizar MathJax solo si está listo
  if (window.mathJaxReady && typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
    MathJax.typesetPromise([resultDiv]).catch((err) => console.log('MathJax error:', err));
  }
}

function updateCalculator() {
  // Actualización automática se puede implementar aquí si se desea
}

// ========== QUIZ INTERACTIVO ==========
function checkAnswer(element, type) {
  // Remover clases previas de todas las opciones del mismo quiz
  const options = element.parentElement.querySelectorAll('.quiz-option');
  options.forEach(opt => {
    opt.classList.remove('correct', 'incorrect');
    opt.style.pointerEvents = 'auto';
  });
  
  // Agregar clase según respuesta
  if (type === 'correct') {
    element.classList.add('correct');
    // Desactivar todas las opciones después de responder correctamente
    options.forEach(opt => {
      opt.style.pointerEvents = 'none';
    });
    setTimeout(() => {
      alert('✅ ¡Correcto! Excelente.\n\n💡 Has demostrado comprensión del tema.');
    }, 100);
  } else {
    element.classList.add('incorrect');
    setTimeout(() => {
      alert('❌ Incorrecto. \n\n📚 Te recomendamos revisar el contenido de esta semana.\n\n💪 ¡Inténtalo de nuevo!');
      // Remover la marca incorrecta para permitir otro intento
      setTimeout(() => {
        element.classList.remove('incorrect');
      }, 500);
    }, 100);
  }
}

// ========== BOTONES INFO ==========
function toggleInfo(infoId) {
  const infoBox = document.getElementById(infoId);
  if (infoBox) {
    infoBox.classList.toggle('active');
  }
}

// ========== THREE.JS - VISUALIZACIÓN 3D ==========
function initializeThreeJS() {
  const canvas = document.getElementById('threejs-canvas');
  if (!canvas) return;
  
  // Configurar escena
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0x1a1f2e);
  
  // Configurar cámara
  camera = new THREE.PerspectiveCamera(75, canvas.parentElement.clientWidth / 400, 0.1, 1000);
  camera.position.set(5, 5, 5);
  camera.lookAt(0, 0, 0);
  
  // Configurar renderer
  renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
  renderer.setSize(canvas.parentElement.clientWidth, 400);
  
  // Agregar luces
  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);
  
  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
  directionalLight.position.set(10, 10, 10);
  scene.add(directionalLight);
  
  // Crear cubo con geometría
  const geometry = new THREE.BoxGeometry(2, 2, 2);
  const material = new THREE.MeshPhongMaterial({ 
    color: 0x6496fa,
    transparent: true,
    opacity: 0.8
  });
  cube = new THREE.Mesh(geometry, material);
  scene.add(cube);
  
  // Agregar wireframe
  const wireframe = new THREE.WireframeGeometry(geometry);
  const line = new THREE.LineSegments(wireframe);
  line.material.color.setHex(0x00d4aa);
  line.material.linewidth = 2;
  cube.add(line);
  
  // Agregar ejes
  axes = new THREE.AxesHelper(4);
  scene.add(axes);
  
  // Agregar grid
  grid = new THREE.GridHelper(10, 10, 0x6496fa, 0x2a3142);
  scene.add(grid);
  
  // Iniciar animación
  animate3D();
}

function animate3D() {
  animationId = requestAnimationFrame(animate3D);
  
  if (cube && !isAnimating) {
    cube.rotation.x += 0.005;
    cube.rotation.y += 0.005;
  }
  
  if (renderer && scene && camera) {
    renderer.render(scene, camera);
  }
}

function animateTransformation(type) {
  if (!cube) return;
  
  isAnimating = true;
  let progress = 0;
  const duration = 2000; // 2 segundos
  const startTime = Date.now();
  
  const originalScale = { x: 1, y: 1, z: 1 };
  const originalRotation = { x: cube.rotation.x, y: cube.rotation.y, z: cube.rotation.z };
  
  function animateStep() {
    const currentTime = Date.now();
    progress = Math.min((currentTime - startTime) / duration, 1);
    
    if (type === 'rotation') {
      cube.rotation.y = originalRotation.y + progress * Math.PI * 2;
    } else if (type === 'scaling') {
      const scale = 1 + Math.sin(progress * Math.PI) * 0.5;
      cube.scale.set(scale, scale, scale);
    } else if (type === 'shear') {
      cube.rotation.x = originalRotation.x + Math.sin(progress * Math.PI * 2) * 0.5;
    }
    
    if (progress < 1) {
      requestAnimationFrame(animateStep);
    } else {
      isAnimating = false;
    }
  }
  
  animateStep();
}

function resetTransformation() {
  if (!cube) return;
  cube.rotation.set(0, 0, 0);
  cube.scale.set(1, 1, 1);
  cube.position.set(0, 0, 0);
}

// Redimensionar canvas cuando cambia el tamaño de la ventana
window.addEventListener('resize', () => {
  const canvas = document.getElementById('threejs-canvas');
  if (canvas && renderer && camera) {
    const width = canvas.parentElement.clientWidth;
    const height = 400;
    renderer.setSize(width, height);
    camera.aspect = width / height;
    camera.updateProjectionMatrix();
  }
});
</script>

</body>
</html>